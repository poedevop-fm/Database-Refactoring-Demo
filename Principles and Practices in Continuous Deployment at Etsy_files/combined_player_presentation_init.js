function ModalShare(e){this.config=e,e&&this.init()}function PlayerModalShare(e,t){this.config=$.extend(e,t.config),this.sslastscreen=t,e&&this.init(),this.gaCategory=this.config.gaCategory?this.config.gaCategory:t.gaCategory}function SSLastScreen(e){this.config=e,this._init()}function SSLeadCTA(e){this.config=e,this.image_width=103,this._init()}function SSLeadForm(e){this.playerController=e,this.downloadSelector=".j-download, #slideshow-actions .download",this._init(),this._load(),this.trackingUtils=new TrackingUtils,this.appId=this.trackingUtils.getAppId("leads")}function SSReplayScreen(e){this.config=e,this.html=e.settings.html,this._init()}function SSShareWidgets(e){this.gaCategory=e.gaCategory,this.container=e.container}function SSShareOptions(e){this.config=e,this.renderTo=e.renderTo,this.html=this.config.html,this._init()}function SSSlideDisplayer(e){"undefined"!=typeof e&&(this.config=e,this.slideOffsets=[],this.playerBgColor=e.playerBgColor||"jsplBgColorBigfoot",this.state="initialized",this.zoomIndex=0,this._init())}function SSTouchInteraction(e){this.config=e,this._init()}function SSToolbar(e){this.config=e,this.isClippable=window.slideshare_object&&window.slideshare_object.slideshow.is_clippable,this.GA_EVENTS={viewonss:"toolbar_viewonss",zoomin:"toolbar_zoomin",zoomout:"toolbar_zoomout",viewfullscreen:"toolbar_fullscreen",leavefullscreen:"toolbar_leavefullscreen",gotolastslide:"goto_last_slide",gotofirstslide:"goto_first_slide"},this.GA_EVENTS_SRC={previous:"toolbar_prev",next:"toolbar_next"},this._init(),this._ELEMENTS=this.getElements(e.elementOverrides),this._ELEMENT_PRIORITIES={1:["nav"],5:["viewOnSS"],2:["fullScreen","leaveFullScreen"],3:["share"],4:["goToSlide"],6:["zoomButtons"]},this._BUTTONS=this.getButtons({btnFirst:"#btnFirst",btnPrevious:"#btnPrevious",btnNext:"#btnNext",btnLast:"#btnLast",btnSS:".btnSS",btnViewOnSS:".btnViewOnSS",btnFullScreen:"#btnFullScreen",btnLeaveFullScreen:"#btnLeaveFullScreen",btnZoomOut:"#btnZoomOut",btnZoomIn:"#btnZoomIn",btnFind:".btnFind",btnShare:".btnShare",btnAudio:".btnAudio",btnVolume:".btnVolume"},e.buttonOverrides),this._ELEMENT_VISIBILITY={share:!this.config.disableShare,fullScreen:!this.config.disableFullScreen&&!this.config.isFullScreen,leaveFullScreen:!this.config.disableLeaveFullScreen&&this.config.isFullScreen,viewOnSS:this.config.enableViewSS,zoomButtons:this.config.enableZoomButtons||!1,nav:!this.config.disableNav,goToSlide:!this.config.disableGoToSlide},this._ELEMENT_SECTION={nav:"one",share:"two",fullScreen:"two",leaveFullScreen:"two",goToSlide:"two",viewOnSS:"one",zoomButtons:"two"};var t={small:29,normal:88};"document"==this.config.playerType||"infographic"===this.config.playerType?(this._ELEMENT_WIDTHS={nav:30,share:72,fullScreen:24,leaveFullScreen:24,goToSlide:57,viewOnSS:t[this.config.toolbarClass],zoomButtons:56},this._ELEMENT_SECTION.share="one"):this._ELEMENT_WIDTHS={nav:57,share:35,fullScreen:24,leaveFullScreen:24,goToSlide:57,viewOnSS:t[this.config.toolbarClass]},this.config.toolbarPadding=6}function SSPlayerController(e){"undefined"!=typeof e&&(this.config=e,this.realSlideCount=this.config.slide_count,this.slideCount=this.realSlideCount,this.config.has_video&&(this.slideCount+=this.config.video_slides_count),delete this.config.slide_count,this.mode=this.config.mode,this.config.show_image_player&&"html"===this.config.mode&&(this.mode="image"),this.config.disable_meta=!!this.config.show_image_player,delete this.config.mode,this.currentPosition=0,this.loadingSlides=[],this.loadedSlides=[],this.slideModes={},this.availableBgSizes={},this.availableFallbackSizes={},this.PRELOAD_PRE_LIMIT=2,this.PRELOAD_POST_LIMIT=5,this.FONT_BATCH_COUNT=10,this.DEFAULT_ERROR_SCORE=0,this.AUTOVERIFICATION_ERROR_THRESHOLD=.001,this.AUTOVERIFICATION_THRESHOLDS={"bad v1.0":.001,"bad v1.1":1e-4,"bad v2.0":1e-4},this.MAX_PERCENTAGE_FAILING={"bad v1.0":100,"bad v1.1":20,"bad v2.0":20},this.isEmbed="embed"===this.config.hosted_in,this.isEmbed?this.TOOLBAR_HEIGHT=38:this.TOOLBAR_HEIGHT=56,this.MULTIMEDIABAR_HEIGHT=25,this.config.show_image_player&&(this.MULTIMEDIABAR_HEIGHT=29),this.initialized=!1,this.PRERENDER_COUNT=1,this._init(),this.startSlide=parseInt(this.config.start_slide||1,10),this.play(this.startSlide),this.config.actionButtonsContainer=$("#svPlayerId .action-btns-container, #player .action-btns-container"))}function SSPlayer(e){this.config=e,this._init()}function SSResource(e){"undefined"!=typeof e&&(this.TIMEOUT_LIMIT=1e5,this.RETRY_WAIT_TIME=3e3,this.config=e,this.resourceKey=e.resourceKey,this._init())}function SSSlide(e){"undefined"!=typeof e&&(this.index=e.index,this.realIndex=e.realIndex,this.setContentDimensions(e.contentWidth,e.contentHeight),delete e.contentWidth,delete e.contentHeight,this.config=e,this._init())}function SSFontResource(e){this.resourceTemplate={prefix:e.baseUrl,cacheable:!0,retries:2,isCritical:!1},SSResource.call(this,e)}function SSHtmlResource(e){this.resourceTemplate={prefix:e.baseUrl,key:"page_",suffix:".js?"+e.timestamp,digitLength:4,cacheable:!0,retries:2,isCritical:!0},e.is_private&&void 0===e.signature&&(this.loadBlocked=!0),SSResource.call(this,e)}function SSImageResource(e){"undefined"!=typeof e&&(e.availableSizes?(this.imageVersions=this._mapSizesToVersions(e.availableSizes),delete e.availableSizes,this._setUrlGenerator(e.is_private)):this.loadBlocked=!0,this.contentWidth=e.contentWidth,delete e.contentWidth,SSResource.call(this,e),this.RETRY_WAIT_TIME=1e3,delete this.imageVersions)}function SSMetaResource(e){this.resourceTemplate={url:e.url,cacheable:!0,retries:2,isCritical:!0},SSResource.call(this,e)}function SSBgImageResource(e){this.resourceTemplate={prefix:e.baseUrl,digitLength:3,cacheable:!0,retries:0,isCritical:!0},this.useTimeStamp=!0;var t=e.availableSizes;this.imageVersions=[];for(var i in t)this.imageVersions[parseInt(i,10)]=t[i];e.is_private?(this.useTimeStamp=!1,this._generateUrl=this._generatePrivateUrl):this._generateUrl=this._generateUrl,SSImageResource.call(this,e)}function SSFallbackImageResource(e){this.resourceTemplate={prefix:e.baseUrl,digitLength:1,cacheable:!0,retries:0,isCritical:!0},this.useTimeStamp=!0,SSImageResource.call(this,e)}function SSBandInteraction(e){this.config=e,this._init()}function SSInfographicDisplayer(e){"undefined"!=typeof e&&SSSlideDisplayer.call(this,e)}function SSInfographicSlide(e){SSSlide.call(this,e),this.padding=5,"slideview"===this.config.hosted_in&&this.bindScrollEvents()}function SSPresentationDisplayer(e){"undefined"!=typeof e&&(SSSlideDisplayer.call(this,e),this.zoomLevels=[1],this.prerenderedSlides=[],!e.isTouch&&this.initPointlyFinger())}function SSPresentationSlide(e){SSSlide.call(this,e),this.PADDING=0}function SSVideoEmbedSlide(e){SSPresentationSlide.call(this,e),this.config=e,this.PLAYER_UNINITIALIZED=-1,this.PLAYER_AUTOHIDE=2,this.ENABLE_JS_API=1,this.PADDING=0,this.RELATED_VIDEOS=0,this.playerReady=!1,this._initVideoSlidesLoading()}!function(e){function t(e,t){return c.call(e)===t}function i(t,i){var o,n=t.split("."),r=n.length,s=e,a=0;for(a;r>a;a++){if(o=n[a],!s[o]){if(!i)return null;s[o]=a+1===r?i:{}}s=s[o]}return s}function o(){var t=e.document.querySelectorAll(g);m.i18n_locale(),Array.prototype.slice.call(t).forEach(function(e){var t=JSON.parse(e.content);Object.keys(t).forEach(function(e){i(s+e,t[e])})})}var n="slideshare_object",r=n+"._modules.",s=n+"._i18n.",a=!1,l="en",d=/[^a-zA-Z\d\-_]/g,c=Object.prototype.toString,h="[object String]",p="[object Number]",u="[object Array]",f="[object Object]",g='meta[name="ss-i18n-translations"]',m={},S={en:"en_US",fr:"fr_FR",es:"es_ES",pt:"pt_BR",de:"de_DE"};m.i18n_locale=function(){if(!a){var e=document.documentElement.lang||l;a=S[e]||S[l]}return a},m.isString=function(e){return t(e,h)},m.isNumber=function(e){return t(e,p)},m.isArray=function(e){return t(e,u)},m.isPlainObject=function(e){return t(e,f)},m.addClass=function(e,t){return(e=e&&1===e.nodeType?e:document.querySelector(e))?(e.className?new RegExp("\\b"+t+"\\b").test(e.className)||(e.className+=" "+t):e.className=t,e):null},m.sanitizeForCSS=function(e){return e.replace(d,"-")},m.isUserAuthenticated=function(){var t=e[n].user;return"non-member"!==t.member_type&&t.loggedin!==!1&&"guest"!==t.login},m.i18n=function(e,t){if(i(s)||o(),e){var n=i(s+e);if(n&&t&&window.xmessage){var r=window.xmessage.fromString(n,a);Array.isArray(t)||(t=[t]),n=r(t)}return n}return i(s.slice(0,-1))},m.exports=function(e,t){i(r+e,t)},m.imports=function(e){return i(r+e)},i(n+".utils",m)}(window),function(e,t,i,o){var n=e(t);e.fn.lazyload=function(r){function s(){var t=0;l.each(function(){var i=e(this);if(!d.skip_invisible||i.is(":visible"))if(e.abovethetop(this,d)||e.leftofbegin(this,d));else if(e.belowthefold(this,d)||e.rightoffold(this,d)){if(++t>d.failure_limit)return!1}else i.trigger("appear"),t=0})}var a,l=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return r&&(o!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),o!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),e.extend(d,r)),a=d.container===o||d.container===t?n:e(d.container),0===d.event.indexOf("scroll")&&a.bind(d.event,function(){return s()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.attr("src")!==o&&i.attr("src")!==!1||i.is("img")&&i.attr("src",d.placeholder),i.one("appear",function(){if(!this.loaded){if(d.appear){var o=l.length;d.appear.call(t,o,d)}e("<img />").bind("load",function(){var o=i.attr("data-"+d.data_attribute);i.hide(),i.is("img")?i.attr("src",o):i.css("background-image","url('"+o+"')"),i[d.effect](d.effect_speed),t.loaded=!0;var n=e.grep(l,function(e){return!e.loaded});if(l=e(n),d.load){var r=l.length;d.load.call(t,r,d)}}).attr("src",i.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&i.bind(d.event,function(){t.loaded||i.trigger("appear")})}),n.bind("resize",function(){s()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){s()}),this},e.belowthefold=function(i,r){var s;return s=r.container===o||r.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(r.container).offset().top+e(r.container).height(),s<=e(i).offset().top-r.threshold},e.rightoffold=function(i,r){var s;return s=r.container===o||r.container===t?n.width()+n.scrollLeft():e(r.container).offset().left+e(r.container).width(),s<=e(i).offset().left-r.threshold},e.abovethetop=function(i,r){var s;return s=r.container===o||r.container===t?n.scrollTop():e(r.container).offset().top,s>=e(i).offset().top+r.threshold+e(i).height()},e.leftofbegin=function(i,r){var s;return s=r.container===o||r.container===t?n.scrollLeft():e(r.container).offset().left,s>=e(i).offset().left+r.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(e){function t(){var e;this.APP_BASE="slideshare.js.tracking",this._bodyDefaults={},o.user&&o.user.id&&(e={header:{applicationViewerUrn:this.getUrn("User",o.user.id)}},this._bodyDefaults=$.extend({},this._bodyDefaults,e)),"undefined"!==r&&(r.setTrackingUrl(),r.setAppId(this.APP_BASE))}var i,o=e.slideshare_object,n=o.utils,r=window.liTrackClient;n&&!n.imports("tracking.TrackingUtils")&&(i={Clip:"urn:li:slideShareClip:",Clipboard:"urn:li:slideShareClipboard:",Guest:"urn:li:slideShareGuest:",LyndaCategory:"urn:li:lyndaCategory:",LyndaCourse:"urn:li:lyndaCourse:",LyndaVideo:"urn:li:lyndaVideo:",LeadCampaign:"urn:li:slideShareLeadCampaign:",Slideshow:"urn:li:slideShareSlideshow:",User:"urn:li:slideShareUser:"},t.prototype={constructor:t,getAppId:function(e){return e?this.APP_BASE+"."+e:this.APP_BASE},recordTrackingEvent:function(e,t,i,o){var n;if(i=$.extend({},this._bodyDefaults,i),!window.liTrackClient)throw new Error("liTrackClient is not initialized");n={eventInfo:{eventName:t,appId:e},eventBody:i},o?r.trackWithCallback(n,o):r.track(n)},generateTrackingID:function(e){var t,i="",n="0000";for(e=e||16,"undefined"!=typeof o&&"undefined"!=typeof o.slideshow&&null!==o.slideshow.id&&(t=parseInt(o.slideshow.id).toString(16).slice(-4),i+=(n+t).slice(-n.length)),null!==cookie("_uv_id")&&(t=parseInt(cookie("_uv_id")).toString(16).slice(-4),i+=(n+t).slice(-n.length)),e-=i.length;e--;)i+=Math.floor(16*Math.random()).toString(16).toUpperCase();return i},getUrn:function(e,t){return t?i[e]?i[e]+t:"urn:li:slideShare"+e+":"+t:null},getPageKey:function(){var e=/^pagekey-(.+)$/.exec(document.body.id);return e?e[1]:void 0},getSlideShareGuest:function(){return cookie("_uv_id")}},n.exports("tracking.TrackingUtils",t))}(window),function(e){function t(e){this._groups=this._validateGroups(e)}var i=e.slideshare_object.utils;t.prototype={isValid:function(){return this._groups.length>0},containsUser:function(){return this._groups.some(function(e){var t=this._getValidationMethod(e);return t&&t.call(this)},this)},_validateGroups:function(e){return e=i.isArray(e)?e:[e],e.filter(function(e){return-1!==t.GROUPS.indexOf(e)})},_getValidationMethod:function(e){return this["_userIs"+e.charAt(0).toUpperCase()+e.slice(1)]},_getUser:function(){return e.slideshare_object.user},_userIsSuperuser:function(){var e=this._getUser();return e&&e.su},_userIsCompany:function(){var e=this._getUser();return e&&e.li}},t.GROUPS=["superuser","company"],i.exports("Whitelist",t)}(window),function(e,t){function i(){var e=t[i.LS_NAMESPACE]&&JSON.parse(t[i.LS_NAMESPACE]);this._experiments=e||{}}var o=e.slideshare_object.utils,n=o.imports("Whitelist");i.prototype={is:function(e,t){return this.getBucket(e)===t},getExperiment:function(e){return this._experiments[e]},getBucket:function(e){var t=this.getExperiment(e);return t&&t.bucket},isOverride:function(e){var t=this.getExperiment(e);return t&&t.override},deleteExperiment:function(e){return this.isOverride(e)?null:(delete this._experiments[e],this._save())},addClass:function(e,t){var i=this.getBucket(t);return i&&o.addClass(e,"exp--"+o.sanitizeForCSS(t)+"--"+o.sanitizeForCSS(i)),this},register:function(e,t,i){var o=new n(i),r=this.getBucket(e);if(o.isValid()){if(o.containsUser()){if(!r)return this._save(e,this._assign(t))}else if(r)return this.deleteExperiment(e)}else if(!r)return this._save(e,this._assign(t));return r},override:function(e,t){return this._save(e,this._assign(t),!0)},ga:function(e,t,i,o,n,r){var s=this.getBucket(e);return s&&_gaq.push(["_trackEvent",t,i,s+"_"+o,n,!!r]),null},_assign:function(e){return o.isNumber(e)&&(e=[e]),o.isArray(e)?this._assignFromArray(e):o.isPlainObject(e)?this._assignFromObject(e):o.isString(e)?e:null},_assignFromArray:function(e,t){var o,n,r=100,s=Math.random();for(t=t||i.BUCKETS,e[e.length-1]!==r&&e.push(r),o=0,n=e.length;n>o;o++)if(s<=e[o]/r)return t[o]||i.BUCKETS[o];return null},_assignFromObject:function(e){var t,i=[],o=[];for(t in e)i.push(t),o.push(e[t]);return this._assignFromArray(o,i)},_save:function(e,o,n){var r=this._experiments;return o=o||null,e&&(r[e]={bucket:o},n&&(r[e].override=!0)),t[i.LS_NAMESPACE]=JSON.stringify(this._experiments),o}},i.BUCKETS="a b c d e f".split(" "),i.LS_NAMESPACE="slideshare.experiments",o.exports("Experiments",i)}(window,window.localStorage||{}),function(e){var t=e.slideshare_object.utils.imports("Experiments"),i=new t;i.deleteExperiment("slideview-clip-button"),i.deleteExperiment("slideview-clip-button-exp-2"),i.deleteExperiment("slideview-clip-button-exp-3")}(window),function(e){function t(e){var e=e||{};this.trackingUtils=new i,this.pageKey=ssClientUtils.li.getPageKey(),this.appId=e.appId||this.trackingUtils.getAppId("sharing"),this.trackingId=e.trackingId||this.trackingUtils.generateTrackingID(),this.bodyDefaults={sharingTrackingId:this.trackingId,isOwner:!1,isEmbed:!1,requestHeader:{pageKey:this.pageKey,path:window.document.location.pathname,userAgent:window.navigator&&window.navigator.userAgent}}}var i=slideshare_object.utils.imports("tracking.TrackingUtils"),o={SlideShareExternalShareEvent:"SlideShareExternalShareEvent"},n={slideshow:"Slideshow"},r={directlink:"DIRECT_LINK",email:"EMAIL",facebook:"FACEBOOK",googleplus:"GOOGLE_PLUS",linkedin:"LINKEDIN",pinterest:"PINTEREST",twitter:"TWITTER"};t.prototype.track=function(e,t){var t=$.extend({},this.bodyDefaults,t);this.trackingUtils.recordTrackingEvent(this.appId,e,t)},t.prototype.shareSlideShow=function(e){var e=e||{},t=e.entityId,i=r[e.shareType];return null!=t&&null!=i?this.track(o.SlideShareExternalShareEvent,{entityUrn:ssClientUtils.li.getUrn(n.slideshow,t),shareType:i,isOwner:e.isOwner,isEmbed:e.isEmbed}):void 0},e.ShareTracker=t}(window.slideshare_object),ModalShare.prototype.init=function(){this.$container=$(this.config.el),this.$shareBtn=$(this.config.btnShare),this.$shareEmailMsg=this.$container.find(".j-share-email-msg"),this.$addMsgButton=this.$container.find(".j-add-msg"),this.$emailSentButton=this.$container.find(".j-email-sent"),this.$shareEmailSend=this.$container.find("#share-email-send"),this.$shareEmailForm=this.$container.find(".j-share-email-form"),this.$linkURLInput=this.$container.find(".j-share-link-url"),this.$close=this.$container.find(".j-modal-close"),this.$contentWrapper=this.$container.find(".modal-content-wrapper"),this.gaTrackCategory=this.$container.data("ga-track-category"),this.gaTrackAction=this.$container.data("ga-track-action"),this.shareTracker=new slideshare_object.ShareTracker,this.createShareHash(),slideshare_object&&slideshare_object.user&&slideshare_object.user.loggedin===!0&&null!==slideshare_object.user.login&&this.$container.find(".j-share-email-name").val(slideshare_object.user.login),this.bindModalToShareButtons(),this.bindModalEvents(),this.bindCustomModalEvents(),this.adjustShareModalTop()},ModalShare.prototype.get_viral_share_url=function(e){$elem=$("li."+e+" a");var t=this.data.ssLink;return $elem.length>0&&(t=$.param($elem.data()),!t&&(t=this.data.ssLink)),this.SHARE_HASH[e]+t},ModalShare.prototype.get_viral_share_urls=function(){return{facebook:this.get_viral_share_url("facebook"),linkedin:this.get_viral_share_url("linkedin"),twitter:this.get_viral_share_url("twitter"),wordpress:this.get_viral_share_url("wordpress"),pinterest:this.get_viral_share_url("pinterest"),googleplus:this.get_viral_share_url("googleplus")}},ModalShare.prototype.sharePopup=function(e){var t=626,i=436,o=this.data.social[e];if(void 0!==o){if("facebook"===e){if(window.FB)return void this.postToFacebook()}else if("linkedin"===e&&window.IN&&window.IN.UI)return IN.UI.Share().params({url:this.data.ssLink}).place(),void this.saveShare(e);window.open(o,"shareDialog","width="+t+",height="+i),this.saveShare(e)}},ModalShare.prototype.show=function(){this.reset(),this.$container.show(),this.shareGATracking("modalOpen")},ModalShare.prototype.close=function(){this.reset(),this.$container.hide()},ModalShare.prototype.reset=function(){this.$container.find(".j-embed-use-ssl-cbox").prop("checked",!1),$(".j-modal-popup").scrollTop(0),this.clearEmailFields(),this.$shareEmailForm.show(),this.$emailSentButton.hide(),this.collapseAllSections()},ModalShare.prototype.updateEmbed=function(){var e=this.$container.find(".j-share-embed-link"),t=e.val(),i=this.$container.find(".j-embed-size-picker").val(),o=this.$container.find(".j-embed-size-picker :selected").data("width")||this.config.embed_sizes.presets[i].size.width,n=this.$container.find(".j-embed-size-picker :selected").data("height")||this.config.embed_sizes.presets[i].size.height,r=t.match(/src="([^"]+)"/)[1].split("?")[0],s=this.$container.find(".j-embed-start-picker").prop("selectedIndex")+1||1;r+=s>1?"?startSlide="+s:"",t=t.replace(/src="[^"]+"/,'src="'+r+'"'),t=t.replace("http:",""),t=t.replace("https:",""),t=t.replace(/height="\d+"/,'height="'+n+'"'),t=t.replace(/width="\d+"/,'width="'+o+'"'),e.val(t)},ModalShare.prototype.clearEmailErrorAlerts=function(){$(".error").removeClass("error")},ModalShare.prototype.clearEmailFields=function(){this.$container.find(".j-email-clear").val(""),this.$shareEmailSend.prop("disabled",!1),this.clearEmailErrorAlerts()},ModalShare.prototype.sendShareEmail=function(e){this.shareGATracking("share_email","send");var t=this,i=this.$container.find(".j-share-email-to").val(),o=this.$container.find(".j-share-email-name").val(),n=this.$shareEmailMsg.val(),r=!1;t.$shareEmailSend.val(""),t.$shareEmailSend.addClass("sending"),t.$shareEmailSend.prop("disabled",!0),t.clearEmailErrorAlerts(),r||(r=!0,$.post("/list/email_share",{data:{id:this.data.ssId,name:o,recipients:i,msg:n},dataType:"json"}).done(function(e){if(0===e.respCode)t.clearEmailFields(),t.$shareEmailForm.slideUp(400),t.collapseAllSections(),t.$container.find("#email-sent").slideDown(400),setTimeout(function(){t.$container.find("#email-sent").slideUp(400),t.$shareEmailForm.slideDown(400)},2e3),t.$contentWrapper.removeClass("email-expanded"),t.trackShareEvent({entityId:t.data.ssId,shareType:"email",entityAuthorId:t.data.authorId,isEmbed:t.config.isEmbed||!1});else{var i=t.$container.find(".j-email-flash");switch(i.text(e.resp).show(),e.respCode){case 1:t.$container.find(".j-share-email-to").addClass("error");break;case 2:t.$container.find(".j-share-email-name").addClass("error")}setTimeout(function(){i.fadeOut(400)},5e3)}r=!1,t.$shareEmailSend.val("Send"),t.$shareEmailSend.removeClass("sending"),t.$shareEmailSend.prop("disabled",!1)}).fail(function(e,i,o){r=!1,t.$shareEmailSend.val("Send"),t.$shareEmailSend.removeClass("sending"),t.$shareEmailSend.prop("disabled",!1)}))},ModalShare.prototype.shareGATracking=function(e,t){var i=window._gaq||[];e=this.gaTrackAction?this.gaTrackAction+"_"+e:e,i.push(["_trackEvent",this.gaTrackCategory,e,t])},ModalShare.prototype.renderSlideStartOptions=function(){for(var e="",t=0;t<this.data.totalSlides;t++){var i="slide "+(t+1);e+="<option ",0===t&&(e+=' selected="selected"'),e+=">"+i+"</option>"}var o=this.$container.find(".j-embed-start-picker, .j-share-start-picker");o.empty(),o.append(e),this.updateStartSlide()},ModalShare.prototype.renderDefaultEmbedOptions=function(){var e,t={0:{small:[344,292],medium:[429,357],large:[514,422],"default":[599,487]},1:{small:[386,410],medium:[481,512],large:[576,614],"default":[672,716]},3:{small:[340,191],medium:[425,239],large:[510,287],"default":[595,335]}};e=3===this.data.ssType?t[3]:t[this.data.ssType%2];var i="";for(var o in e){var n=e[o][0]+" x "+e[o][1];i+='<option value="'+o+'" data-width="'+e[o][0]+'" data-height="'+e[o][1]+'"',"default"===o&&(i+=" selected"),i+=">"+n+"</option>"}var r=this.$container.find(".j-embed-size-picker");r.empty(),r.append(i),this.$container.find(".j-embed-start-picker").prop("selecteIndex",1),this.$container.find(".j-share-embed-wp").val(this.data.social.wordpress),this.$container.find(".j-share-embed-link").text(this.data.embedCode)},ModalShare.prototype.toggleAddMessageHeight=function(e){this.$shareEmailMsg.toggleClass("msg-expanded",e)},ModalShare.prototype.collapseAllSections=function(){$(".j-share-expand").slideUp(),$("#share-embed-link").scrollTop(0),$(".j-triggered").removeClass("j-triggered"),this.toggleAddMessageHeight(!1)},ModalShare.prototype.triggerExpand=function(e){this.collapseAllSections(),$(e).addClass("j-triggered"),$(e).siblings(".j-share-expand").slideDown(400,this.adjustShareModalTop.bind(this)),this.$contentWrapper.removeClass("email-expanded embed-expanded"),$(e).hasClass("j-share-email-to")?this.$contentWrapper.addClass("email-expanded"):$(e).hasClass("j-share-embed-link")&&this.$contentWrapper.addClass("embed-expanded")},ModalShare.prototype.getNewSlideURL=function(e,t){var i=document.createElement("a");i.href=e;var o=i.pathname.split("/");o[0]||o.shift();for(var n=o.length,r=o[n-1];!r&&n>0;)o.pop(),n--,r=o[n-1];return parseInt(r,10)&&n>2&&o.pop(),t>1&&o.push(t),i.pathname=o.join("/"),i.href},ModalShare.prototype.getSlideImageURL=function(e){return $('#svPlayerId .slide[data-index="'+e+'"] .slide_image').data("full")},ModalShare.prototype.bindModalEvents=function(){var e=this;this.$close.bind("click",function(){e.close()}),this.$container.find(".j-share-start-picker").change(function(t){e.updateStartSlide(),e.shareGATracking("share_social",$(this).data("ga"))}),this.$shareEmailForm.submit(function(t){t.preventDefault(),t.stopPropagation(),e.sendShareEmail()}),this.$shareEmailMsg.click(function(){e.toggleAddMessageHeight(!0)}),this.$container.find(".j-share-email-to, .j-share-email-name").click(function(t){e.toggleAddMessageHeight(!1)}),this.$container.find(".j-share-social-list li").click(function(){e.sharePopup($(this).data("network")),e.trackShareEvent({entityId:e.data.ssId,shareType:$(this).data("network"),entityAuthorId:e.data.authorId,isEmbed:e.config.isEmbed||!1})}),this.$container.find(".j-update-embed").change(function(){e.updateEmbed()}),this.$container.find(".j-share-embed-link, .j-share-embed-wp, .j-last-screen-ssurl").bind("click",function(){this.select()}),this.$container.find(".j-share-link-url").click(function(){this.select(),e.shareGATracking("share_social",$(this).data("ga"))}),this.$container.find(".j-share-email-form input, .j-share-email-form textarea, .j-add-msg, .j-send-another-email").click(function(t){"send"!==$(this).data("ga")&&e.shareGATracking("share_email",$(this).data("ga"))}),this.$container.find(".j-embed-use-ssl-cbox, .j-embed-related-cbox, .j-embed-size-picker, .j-embed-start-picker").click(function(){e.shareGATracking("share_embed",$(this).data("ga"))}),this.$container.find(".j-share-expand-trigger").click(function(){$(this).siblings(".j-share-expand:visible").length>0||e.triggerExpand(this)}),$(window).resize(function(){e.adjustShareModalTop()}),$(document).keydown(function(t){27===t.which&&(t.preventDefault(),e.close())}),$(".j-modal-popup").on("scroll",function(t){e.$close.css("top",8+$(this).scrollTop()+"px")})},ModalShare.prototype.bindCustomModalEvents=function(){},ModalShare.prototype.createShareHash=function(){this.SHARE_HASH={facebook:"https://www.facebook.com/sharer/sharer.php?u=",linkedin:"https://www.linkedin.com/cws/share?trk=SLIDESHARE&",twitter:"https://twitter.com/share?",googleplus:"https://plus.google.com/share?",wordpress:"",pinterest:"https://pinterest.com/pin/create/button/?"}},ModalShare.prototype.getSSId=function(e){return e.length?e.data("slideshowid"):slideshare_object.modal_player.get_ss_id()},ModalShare.prototype.bindModalToShareButtons=function(){},ModalShare.prototype.trackShareEvent=function(e){var t=e||{},i=t.isEmbed||!1,o=t.entityAuthorId&&window.slideshare_object.user&&t.entityAuthorId===window.slideshare_object.user.id||!1;this.shareTracker.shareSlideShow({entityId:t.entityId,shareType:t.shareType,isOwner:o,isEmbed:i})},ModalShare.prototype.saveShare=function(e){$.post("/share/viralshare",{data:{id:this.data.ssId,network:e}})},ModalShare.prototype.showLikeUsModal=function(){},ModalShare.prototype.postToFacebook=function(){var e=this;if(window.FB){var t=function(t){t&&t.post_id&&e.saveShare("facebook")};FB.ui({method:"feed",display:"popup",link:this.data.ssLink},t)}},ModalShare.prototype.adjustShareModalTop=function(){},ModalShare.prototype.updateStartSlide=function(){},PlayerModalShare.prototype=new ModalShare,PlayerModalShare.prototype.set_data=function(){this.data={ssLink:this.getNewSlideURL($(".j-share-social-list").data("canonical-url"),1),ssId:this.sslastscreen.config.slideshowId,totalSlides:this.sslastscreen.config.totalSlides,authorId:this.config.authorId},this.data.social=this.get_viral_share_urls(),this.SHARE_ABBRS={facebook:"fb",linkedin:"li",twitter:"tw",googleplus:"gp",pinterest:"pi"},this.renderSlideStartOptions()},PlayerModalShare.prototype.bindCustomModalEvents=function(){this.set_data()},PlayerModalShare.prototype.close=function(){$("#svPlayerId").hasClass("infographic_player")&&$("body").removeClass("overflow_hidden"),this.reset(),this.$container.hide(),this.sslastscreen.restoreLastScreenState(),this.sslastscreen.isShareScreenVisible=!1,this.shareGATracking("modalClose")},PlayerModalShare.prototype.trackShareClick=function(e){this.trackShareEvent({entityId:this.data.ssId,shareType:e,entityAuthorId:this.data.authorId,isEmbed:this.config.isEmbed}),this.shareGATracking(this.SHARE_ABBRS[e],"share_open")},PlayerModalShare.prototype.shareGATracking=function(e,t){"undefined"!=typeof t&&(e=e+"_"+t),$.slideshareEventManager.trackEvent(this.gaCategory+e)},ModalShare.prototype.updateStartSlide=function(){var e=$(".j-share-start-picker").prop("selectedIndex")+1||1;if(!(0>=e)){var t=this;$(".j-share-social-list li a").each(function(i){var o=$(this).data("url");o&&$(this).data("url",t.getNewSlideURL(o,e))}),this.data.ssLink=this.getNewSlideURL(this.data.ssLink,e),$("#share-link-url").prop("value",this.getNewSlideURL($("#share-link-url").prop("value"),e)),$(".j-share-social-list li.pinterest a").data("media",this.getSlideImageURL(e)),$(".j-embed-start-picker").prop("selectedIndex",e-1),this.updateEmbed(),this.data.social=this.get_viral_share_urls()}},function(e){function t(){}function i(e){s=[e]}function o(e,t,i){return e&&e.apply(t.context||t,i)}function n(e){return/\?/.test(e)?"&":"?"}function r(r){function u(e){Y++||(Z(),H&&(T[G]={s:[e]}),O&&(e=O.apply(r,[e])),o(D,r,[e,_,r]),o(V,r,[r,_]))}function L(e){Y++||(Z(),H&&e!=w&&(T[G]=e),o(N,r,[r,e]),o(V,r,[r,e]))}r=e.extend({},I,r);var F,P,A,j,R,D=r.success,N=r.error,V=r.complete,O=r.dataFilter,B=r.callbackParameter,U=r.callback,z=r.cache,H=r.pageCache,W=r.charset,G=r.url,K=r.data,q=r.timeout,Y=0,Z=t;return E&&E(function(e){e.done(D).fail(N),D=e.resolve,N=e.reject}).promise(r),r.abort=function(){!Y++&&Z()},o(r.beforeSend,r,[r])===!1||Y?r:(G=G||d,K=K?"string"==typeof K?K:e.param(K,r.traditional):d,G+=K?n(G)+K:d,B&&(G+=n(G)+encodeURIComponent(B)+"=?"),!z&&!H&&(G+=n(G)+"_"+(new Date).getTime()+"="),G=G.replace(/=\?(&|$)/,"="+U+"$1"),H&&(F=T[G])?F.s?u(F.s[0]):L(F):(C[U]=i,A=e(y)[0],A.id=p+k++,W&&(A[l]=W),M&&M.version()<11.6?(j=e(y)[0]).text="document.getElementById('"+A.id+"')."+g+"()":A[a]=a,x&&(A.htmlFor=A.id,A.event=f),A[m]=A[g]=A[S]=function(e){if(!A[v]||!/i/.test(A[v])){try{A[f]&&A[f]()}catch(t){}e=s,s=0,e?u(e[0]):L(c)}},A.src=G,Z=function(e){R&&clearTimeout(R),A[S]=A[m]=A[g]=null,$[b](A),j&&$[b](j)},$[h](A,P=$.firstChild),j&&$[h](j,P),R=q>0&&setTimeout(function(){L(w)},q)),r)}var s,a="async",l="charset",d="",c="error",h="insertBefore",p="_jqjsp",u="on",f=u+"click",g=u+c,m=u+"load",S=u+"readystatechange",v="readyState",b="removeChild",y="<script>",_="success",w="timeout",C=window,E=e.Deferred,$=e("head")[0]||document.documentElement,T={},k=0,I={callback:p,url:location.href},M=C.opera,x=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;r.setup=function(t){e.extend(I,t)},e.jsonp=r}(jQuery),"undefined"==typeof window.cookie&&(window.cookie=function(e,t,i){if("undefined"==typeof t){var o=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var s=jQuery.trim(n[r]);if(s.substring(0,e.length+1)==e+"="){o=decodeURIComponent(s.substring(e.length+1));break}}return o}i=i||{},null===t&&(t="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+24*i.expires*60*60*1e3)):l=i.expires,
a="; expires="+l.toUTCString()}var d=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,d,c,h].join("")}),void 0===$.slideshareEventManager&&$.extend({slideshareEventManager:{SHOUTEVENTS:{next:!0,previous:!0,gotoslide:!0,slidechanged:!0,leadcreated:!0,insight:!0,flag:!0},functions:{showlastscreen:function(){var e=this.controller;e.isValidNextSlideshowExperiment()?this.trigger("showNextSlideshow"):(e.displayLastScreen(),e.currentComponentSet.leadForm.canShowAtEndOfSlideshow()&&(this.onLastSlide=!0,this.trigger("showleadform_navigation")))},hidelastscreen:function(){this.controller.hideLastScreen()},gotofirstslide:function(){var e=this.controller;this.trigger("hideNextSlideshow"),e.play(1),"video"===e.config.player_type&&e.multimediaResource&&e.multimediaResource.videoPlayer.seek(0).play(!0)},next:function(e){var t=this.controller;if("iframe"==t.mode){var i=t.currentComponentSet.slidedisplayer;return void i.next()}var o=t.currentPosition,n=t.slideCount,r=e&&e.touchedSlideNo,s=t.slides[o];if(t.slides[o+1],!(o-3>r))if(r>n-1&&t.lastSlideReached(),"ytube_video"===s.config.slideMode&&s._pauseVideo(),o===n&&"undefined"==typeof new_mobile_player)this.onLastSlide=!0,t.isValidNextSlideshowExperiment()?this.trigger("showNextSlideshow"):this.trigger("showlastscreen");else{this.onLastSlide=!1;var a=o+1,l=e&&e.source;t.play(a,!1,l,{updateBamboo:!0}),l?($.slideshareEventManager.trackEvent(l+"_"+a),$.slideshareEventManager.trackEvent(l+"_"+this.controller.currentViewMode)):(l="right_arrow_key",$.slideshareEventManager.trackEvent(l+"_"+a),$.slideshareEventManager.trackEvent(l+"_"+this.controller.currentViewMode))}},previous:function(e){var t=this.controller;if("iframe"==t.mode){var i=t.currentComponentSet.slidedisplayer;return void i.previous()}var o=t.currentPosition,n=o-1,r=e&&e.source;this.trigger("hideNextSlideshow"),t.slides[o].stop(),t.play(n,!1,r,{updateBamboo:!0}),e&&e.source&&$.slideshareEventManager.trackEvent(e.source+"_"+n)},showNextSlideshow:function(){this.controller.showNextSlideshowCTA()},hideNextSlideshow:function(){this.controller.isValidNextSlideshowExperiment()&&this.controller.hideNextSlideshowCTA()},updateNextSlideshowCookie:function(e){var t=window.cookie("next_slideshows_seen_ids"),i="clear"===e?-1:1;t&&t.length>=4e3?i=-1:t?(t=t.split(","),-1===t.indexOf(e.toString())&&t.push(e)):t=[this.controller.config.id,e],window.cookie("next_slideshows_seen_ids",t,{expires:i,path:"/"})},mobileScrollPlayingMode:function(e){this.controller.playingMode=e},gotolastslide:function(){var e=this.controller,t=e.slideCount;e.play(t)},document_touch_scroll:function(e){this.controller.currentComponentSet.slidedisplayer.manualScroll(e.delta)},toggleaudio:function(){var e=this.controller;e.multimediaResource&&e.multimediaResource.togglePlay()},audioplayed:function(){var e=this.controller;e.currentComponentSet.toolbar.updateAudioInteraction({audioPlaying:!0})},audiopaused:function(){var e=this.controller;e.currentComponentSet.toolbar.updateAudioInteraction({audioPlaying:!1})},videoready:function(e){var t=this.controller;t.initVideoPlayer(e.mode),t.currentComponentSet.videobar._bindEvents()},gotoslide:function(e){var t=this.controller;t.play(e.index,void 0,void 0,{updateBamboo:!0}),this.trigger("hideNextSlideshow"),$.slideshareEventManager.trackEvent("jumptoslide_"+e.index)},viewonss:function(e){var t=this.controller;window.open(t.config.slideview_url,"viewer")},viewfullscreen:function(e){var t=this.controller,i=t.currentComponentSet;if("nativefullscreen"!=t.currentViewMode&&"fullscreen"!=t.currentViewMode){if("document"===t.config.player_type&&i.slidedisplayer.setZoom(0),i.videobar&&(t.disableLeadForFullscreenVideo(!0),i.slidedisplayer.adjustSpinnerPosition(!0)),t.isNativeFullScreenSupported){if(i.container.addClass("fullscreen"),t.switchNativeView("nativefullscreen"),"undefined"!=typeof SSDocumentDisplayer&&t.currentComponentSet.slidedisplayer instanceof SSDocumentDisplayer){var o=t.currentPosition;setTimeout(function(){t.play(o,!0)},500)}t.currentComponentSet.toolbar.showFullscreenToolbar(!0)}else{if(isIEAllVersion)return"undefined"!=typeof SSVideoEmbedSlide&&t.currentPosition&&t.slides[t.currentPosition]instanceof SSVideoEmbedSlide&&t.slides[t.currentPosition].stop(),void window.open(t.getFullScreenUrl(),"_blank","width="+screen.width+",height="+screen.height+",location=no");t.switchToFullScreen()}"nativefullscreen"===t.currentViewMode&&_gaq.push(["_trackPageview","/"+this.hostedIn+"FullscreenView"])}},leavefullscreen:function(e){var t=this.controller;if(t.currentComponentSet.toolbar.showFullscreenToolbar(!1),"normal"!=t.currentViewMode){if(t.leaveFullScreen(),"undefined"!=typeof SSDocumentDisplayer&&t.currentComponentSet.slidedisplayer instanceof SSDocumentDisplayer){var i=t.currentPosition;setTimeout(function(){t.play(i,!0)},100)}t.currentComponentSet.toolbar.$fullscreenTitleBanner&&t.currentComponentSet.toolbar.$fullscreenTitleBanner.hide()}},zoomin:function(e){var t=this.controller;t.currentComponentSet.slidedisplayer.zoomin()},zoomout:function(e){var t=this.controller;t.currentComponentSet.slidedisplayer.zoomout()},playersearch:function(e){},playershare:function(e){this.controller.displayShareScreen({gaCategory:e,customizations:{title:"Share SlideShare"}}),"video"===this.controller.config.player_type&&this.controller.multimediaResource&&this.controller.multimediaResource.pause()},metadataloaded:function(e){var t=this.controller,i=e.type,o=t._metaDataHandlers()[i];o.success.call(t,e.json)},metadataloadfailed:function(e){var t=this.controller,i=e.type,o=t._metaDataHandlers()[i];o.failure.call(t),this.trackRawEvent("jsplayer_debug",i+"_metadataloadfailed",void 0,!0)},slidechanged:function(e){this.trigger("hidelastscreen");var t=e.index,i=this.controller,o=i.currentPosition,n=i.config.has_video&&i.config.video_hash[i.config.start_slide];if(o!==t||e.force){this.controller.updateCurrentPosition(t),this.controller.hideShareScreen(),i.config.related_position>0&&$.slideshareEventManager.trackEvent("related"+i.config.related_position+"_slide_changed"),t===i.config.start_slide&&i.config.show_image_player&&!n?i._load(t,!0):i._load(t),e.alreadyInPosition||i.currentComponentSet.slidedisplayer._scrollTo(t),2===t?$.slideshareEventManager.trackEvent("slidechange_2"):t===i.slideCount&&$.slideshareEventManager.trackEvent("slidechange_last");var r=this.controller.currentComponentSet.leadForm;if(!r.checkLeadFilledForAuthor()){var s=r.getSlideTriggerNumber();t>s&&r.isLeadFormFilledRequired()?i.play(s):t===s&&(this.onLastSlide=!1,this.trigger("showleadform_navigation"))}i.clickGenTracker.trackOrganicLinkImpressionEventsForSlide(t),$(window).trigger("resize")}},slidescrolled:function(e){var t=e.index,i=this.controller,o=i.currentPosition;(o!==t||e.force)&&this.trigger("slidechanged",e)},handlemultimedia:function(){var e=this.controller;e.multimediaResource&&(e.wasPlaying=e.multimediaResource.isPlaying(),e.multimediaResource.pause())},showleadform_cta:function(){this.controller.currentComponentSet.leadForm.openedViaCTA(this.onLastSlide),this.trigger("showleadform")},showleadform_navigation:function(){this.controller.currentComponentSet.leadForm.checkLeadFilledForAuthor()||(this.controller.currentComponentSet.leadForm.openedViaNavigation(this.onLastSlide,this.controller.currentComponentSet.leadForm.getSlideTriggerNumber()),this.trigger("showleadform"))},showleadform_download:function(){this.controller.currentComponentSet.leadForm.openedViaDownload(this.onLastSlide),this.trigger("showleadform")},showleadform:function(){this.trigger("handlemultimedia"),this.controller.currentComponentSet.leadForm.show(),this.controller.currentComponentSet.leadForm.isVisible()&&this.controller.deactivateToolbar()},leadcreated:function(){this.controller.activateToolbar()},screenoverlayclosed:function(){this.controller.multimediaResource&&this.controller.wasPlaying&&this.controller.multimediaResource.play()},showvideospinner:function(){var e=this.controller;e.currentComponentSet.slidedisplayer.videoSpinner.css("z-index",e.VIDEO_FULLSCREEN_ZINDEX).show()},hidevideospinner:function(){var e=this.controller;e.currentComponentSet.slidedisplayer.videoSpinner.css("z-index","auto").hide()},toolbarshown:function(){$(".toolbar").css("z-index",$(".slideDisplayer").css("z-index"))},leadcancelled:function(){this.controller.activateToolbar()},currentversionloaded:function(e){var t=this.controller.slides[e.index],i=e.resourceKey;t.updateRenderedResourceVersion(i)},resourceloaded:function(e){var t=this.controller.slides[e.index],i=e.resourceKey;if(t.updateResource(i,{status:"cached"}),"failed"!==t.status){var o,n=t.resources;for(o in n)if(n[o].cacheable===!0&&"cached"!==n[o].status)return;t.status="cached",this.trigger("slideloaded",{index:e.index})}},resourceloadfailed:function(e){var t=this.controller.slides[e.index],i=e.resourceKey;t.updateResource(i,{status:"failed"}),t.resources[i].isCritical===!0&&(t.status="failed",this.trigger("slideloadfailed",{index:e.index})),this.trackRawEvent("jsplayer_debug",i+"_resourceloadfailed",void 0,!0)},fontresourceloaded:function(e){var t=this.controller;t.config.use_ssl&&-1!==e.style.indexOf(".eot")&&(e.style=e.style.replace(/http:\/\//g,"https://"));var i="<style>"+e.style+"</style>";$(i).appendTo(t.currentComponentSet.container)},slideloaded:function(e){var t=this.controller,i=e.index,o=t.slides[i];o.currentViewMode.rendered&&("undefined"!=typeof new_mobile_player&&t.resetSlideShowHeight(i),o.paint()),$("#playerFacade").hide(),t.preloadMoreIfIdle(i)},slideloadfailed:function(e){controller=this.controller;var t=controller.slides[e.index];if($("#playerFacade").hide(),t.currentViewMode.rendered){var i=t.currentViewMode.width,o=t.currentViewMode.height;t.displayError(controller.generateErrorDom("slide_error_template",{width:i,height:o}))}controller.preloadMoreIfIdle(e.index);var n=this.controller.config.id+"_slide_"+e.index;this.trackRawEvent("jsplayer_debug","slideloadfailed",n,!0)},videoloadfailed:function(){this.trackRawEvent("jsplayer_debug","videoloadfailed",void 0,!0)},slideloading:function(e){var t=this.controller,i=t.slides[e.index],o=t.loadingSlides;-1===o.indexOf(e.index)&&t.loadingSlides.push(e.index),i.currentViewMode.rendered&&i.displayLoading(),t.currentPosition===e.index&&this.trackRawEvent("jsplayer_debug","current_slide_loading",void 0,!0)},showvolumecontrol:function(e){var t=this.controller.currentComponentSet.toolbar;t&&t.volumeControl&&t.volumeControl.show()},hidevolumecontrol:function(e){var t=this.controller.currentComponentSet.toolbar;t&&t.volumeControl&&t.volumeControl.hide()},changevolume:function(e){var t=this.controller,i=t.multimediaResource;i&&i.changeVolume(e.volume)},volumechanged:function(e){var t=this.controller.currentComponentSet.toolbar;t&&t.volumeControl&&t.volumeControl.setVolume(e.volume)},repaint:function(e){this.controller.repaint(e.mobile)},flag:function(e){var t=this.controller.currentComponentSet.flag;t&&t.toggleFlagMenu()}},registerController:function(e){this.controller=e},registerPlayer:function(e){this.player=$(e)},registerEnvironment:function(e){e=e||"slideshare",this.hostedIn=e},trigger:function(e,t){void 0!==this.functions[e]&&this.functions[e].call(this,t),this.SHOUTEVENTS[e]&&this.player.trigger({type:e,ssData:t})},trackEvent:function(e,t){void 0!==window._gaq&&window._gaq.push(["_trackEvent","jsplayer",this.hostedIn,e,void 0,!!t])},trackRawEvent:function(e,t,i,o){void 0!==window._gaq&&window._gaq.push(["_trackEvent",e,t,i,void 0,!!o])},trackValueEvent:function(e,t,i,o){void 0!==window._gaq&&window._gaq.push(["_trackEvent",e,t,i,o])},trackOutboundClick:function(e){this.controller.clickGenTracker.trackOrganicLinkClickEvent(e)},getController:function(){return this.controller},getCurrentPosition:function(){return this.controller.currentPosition}}}),SSLastScreen.prototype._init=function(){this.isVisible=!1,this.isShareScreenVisible=!1,this.gaCategory="lastscreen_v1_",this.$container=$("#lastScreen"),this.$nextButton=$("#btnNext .j-next-btn"),this.$container.find("img.j-thumbnail").lazyload({effect:"fadeIn",event:"loadThumb"})},SSLastScreen.prototype.exitFullScreenIfIdle=function(){var e=setTimeout(function(){$(".lastScreen").is(":visible")&&($.browser.mozilla||$(".btnLeaveFullScreen").trigger("click"))},5e3);$(".lastScreen").on("click",function(){clearTimeout(e)})},SSLastScreen.prototype.show=function(e,t){if(this.$container.find("img.j-thumbnail").trigger("loadThumb"),this.isVisible=!0,void 0!==this.overlay)return this.overlay.show(),void this.lastScreen.show();var i="lastScreenContainer";isMobile()&&(i+=" mobile"),this.lastScreen=this.$container.addClass(i).appendTo(this.config.renderTo),this.lastScreen.show(),this.overlay=this.lastScreen.find(".j-last-screen-overlay"),this.setDimensions(e),this.populateTemplate(),t&&this.exitFullScreenIfIdle()},SSLastScreen.prototype.populateTemplate=function(){this.lastScreen.find(".lastScreenEmbedCode, .j-share-embed-link").val(this.config.embed_code),this.lastScreen.find(".lastScreenSSUrl, .j-share-link-url").val(this.config.settings.url),this.lastScreen.find(".j-share-embed-wp").val(this.config.wp_code),$.fn.tooltip&&this.lastScreen.find(".j-tooltip").tooltip(),this.config.disableRelated&&(this.lastScreen.find(".lastScreen").addClass("j-disable-related"),this.config.disableShare&&this.lastScreen.find(".lastScreen").addClass("j-disable-share"),this.isProLastScreen=!0),this._bindEvents(),this.initShareWidget(),this.populateEmbedSizes()},SSLastScreen.prototype.initShareWidget=function(){this.shareWidgets=new SSShareWidgets({container:this.lastScreen,gaCategory:this.gaCategory})},SSLastScreen.prototype.populateEmbedSizes=function(){var e=this.lastScreen.find(".j-embed-size-picker");$.each(this.config.embed_sizes.presets,function(t,i){var o=i.size.width+4,n=i.size.height+2,r=$("<option/>").val(t).text(o+"x"+n);e.append(r)}),e.val(this.config.embed_sizes.config.defaultPreset).change()},SSLastScreen.prototype._bindEvents=function(){$(".lastscreen-share-cta").bind("click",function(e){e.preventDefault(),e.stopPropagation(),$.slideshareEventManager.trigger("playershare",this.gaCategory)});var e=this,t=this.lastScreen.find(".j-email-cta");t.bind("click",function(){$.slideshareEventManager.trigger("playershare",this.gaCategory),e.lastScreen.find(".j-share-email-to").click(),e.lastScreen.find(".j-share-email-to").focus(),$.slideshareEventManager.trackEvent(e.gaCategory+"email_cta")}),this.lastScreen.find(".j-last-screen-replay").bind("click",function(t){t.preventDefault(),t.stopPropagation(),e.hide(),$.slideshareEventManager.trigger("gotofirstslide"),$.slideshareEventManager.trackEvent(e.gaCategory+"replay")}),this.lastScreen.find(".j-last-screen-overlay, .j-lastscreen-close").bind("click",function(){e.hide()}),this.lastScreen.find(".j-lastscreen-related a").bind("click",function(t){$.slideshareEventManager.trackEvent(e.gaCategory+"relatedclick")})},SSLastScreen.prototype.showShareScreen=function(e){if(this.shareOpenedFromLastScreen=this.isVisible,this.isShareScreenVisible)this.hide();else{if(this.isShareScreenVisible=!0,this.show(e),this.lastScreen.find(".j-lastscreen").hide(),e.customizations.title){var t=this.lastScreen.find("a#button-share-tab");t.text(e.customizations.title)}this.lastScreen.find("#last-screen-modal-share").show()}},SSLastScreen.prototype.restoreLastScreenState=function(){this.shareOpenedFromLastScreen?this.lastScreen.find(".j-lastscreen").show():(this.lastScreen.find(".j-lastscreen").show(),this.hide())},SSLastScreen.prototype.hide=function(){this.isVisible=!1,this.isShareScreenVisible=!1,this.overlay.hide(),this.lastScreen.hide()},SSLastScreen.prototype.destroy=function(){this.overlay&&(this.overlay.remove(),delete this.overlay),this.lastScreen&&(this.lastScreen.remove(),delete this.lastScreen)},SSLastScreen.prototype.setDimensions=function(e){void 0!==this.lastScreen&&(this.config.lastScreenClass&&this.lastScreen.find(".lastScreen").addClass(this.config.lastScreenClass),this.lastScreen.css({height:e.height,width:e.width}))},SSLeadCTA.prototype._init=function(){var e=this.config.renderTo.find(".stage").length?this.config.renderTo.find(".stage"):this.config.renderTo.find(".slideDisplayer");this.lead_cta_div=$("<div/>").html(this.config.html).insertAfter(e),this.cta_link=$("#lead_cta",this.lead_cta_div),this.setDimensions(),this.deactivate(),this.show()},SSLeadCTA.prototype.setDimensions=function(){this.lead_cta_div.addClass("lead_cta_div")},SSLeadCTA.prototype._bindEvents=function(){this.cta_link.unbind("click").bind("click",function(e){e.preventDefault(),e.stopPropagation(),$(".player").hasClass("fullscreen")&&$.slideshareEventManager.trigger("leavefullscreen"),$.slideshareEventManager.trigger("showleadform_cta")})},SSLeadCTA.prototype._unbindEvents=function(){this.cta_link.unbind("click").bind("click",function(e){e.preventDefault(),e.stopPropagation()})},SSLeadCTA.prototype.deactivate=function(){this._unbindEvents()},SSLeadCTA.prototype.activate=function(){this._bindEvents()},SSLeadCTA.prototype.hide=function(){$(".lead_cta_div").hide(),$.slideshareEventManager.trigger("screenoverlayclosed")},SSLeadCTA.prototype.show=function(){this.lead_cta_div.show()},SSLeadCTA.prototype.destroy=function(){this._unbindEvents(),this.lead_cta_div.remove()};var TrackingUtils=slideshare_object.utils.imports("tracking.TrackingUtils"),OPENED_FROM_CTA_PREFIX="get-in-touch-",OPENED_FROM_NAVIGATION_SUFFIX="-navigation",OPENED_FROM_DOWNLOAD_SUFFIX="-download",TRACKING_ID_URL_PARAM="tracking_id",i18n=slideshare_object.utils.i18n,TRIGGER_TYPES={ON_SLIDE:1,ON_END:2,ON_DOWNLOAD:3,GET_IN_TOUCH:4},PLATFORM_TYPES={DESKTOP:1,MOBILE_WEB:2,EMBED:3};SSLeadForm.prototype._getSlideshowLeadFormUrl=function(){var e=slideshare_object.slideshow.lead_form_url;return this._isEmbed()&&(e+="?embed=true"),e},SSLeadForm.prototype._init=function(){this.gaCategory="bigfoot_leadsform",this.gaActionPrefix="",this.gaActionSuffix="",this.openedViaDownloadFlag=!1,this.leadShownAndDisabled=!1,this.tracking={pageKey:"sld_slideshow/view"},this.slideshowId=slideshare_object.slideshow.id,(this._isEmbed()||this._isFromEmbed())&&(this.tracking.pageKey="sld_slideshow/embed_code")},SSLeadForm.prototype._load=function(){if(!this.checkLeadFilledForAuthor()){var e=this;$.ajax({method:"GET",url:e._getSlideshowLeadFormUrl(),dataType:"json"}).done(function(t){t.success&&(e.leadFormConfig=t.lead_form_config,e._afterLoad())})}},SSLeadForm.prototype._afterLoad=function(){var e=this;return this._isFromEmbed()||this.recordTrackingEvent("SlideShareWithLeadFormViewEvent"),this.leadFormConfig.show_lead_cta&&!window.slideshare_object.is_mobile&&(this.leadCta=new SSLeadCTA({renderTo:this.playerController.currentComponentSet.container,html:this.leadFormConfig.lead_form_cta_html,ssid:this.slideshowId}),this.leadCta.activate(),this.playerController.currentComponentSet.leadcta=this.leadCta,this.playerController.currentComponentSet.navigators.push(this.leadCta),$(".clip-button-top").hide()),this._isEmbed()?void this._loadEmbed():(this.canShowAtDownload()&&(slideshare_object.lead_form_on_download=!0,slideshare_object.downloads&&slideshare_object.downloads.sp_isdwnl&&($(".j-tooltip.j-download").addClass("download-lead-gen").show(),$(".j-clips-toolbar").hide(),$(".clip-button-top").hide()),"undefined"!=typeof slideviewInteraction&&slideviewInteraction.slideviewInteractionObjects.download.unbindEvents(),$(this.downloadSelector).off("click"),$(this.downloadSelector).removeAttr("data-reveal-id"),$(this.downloadSelector).on("click",function(t){t.preventDefault(),t.stopPropagation(),e.checkLeadFilledForAuthor()?e.download():$.slideshareEventManager.trigger("showleadform_download")})),this.gaCategory="new_leadsform",this.$leadFormPlaceHolder=$("#j-lead-form-placeholder"),this.$leadFormPlaceHolder.html(this.leadFormConfig.lead_form_html),this.$leadFormPlaceHolder.show(),this.$formWrapper=$("#j-lead-container"),this.$form=this.$formWrapper.find("#lead-form"),this.$submitLeadButton=this.$form.find("button[type=submit]"),this.$submitLeadButtonLabel=this.$submitLeadButton.find(".button-label"),this.$submitLeadButtonLoading=this.$submitLeadButton.find(".loading"),this.$leadContainer=$(".lead-form-container"),this._initThirdParties(),this._initCountries(),this._bindEvents(),this._isFromEmbed()&&(this._isFromEmbedDownloadCTA()?this.openedViaDownload():this._isFromEmbed()&&this.openedViaCTA()),this._isFromEmbed()&&this.show(),this.trackLeadAction("load"),void this.showCta())},SSLeadForm.prototype._loadEmbed=function(){var e=this,t=$("#lead_cta"),i=$("#lead-download-cta");this.gaCategory="embed_lead_form",this.leadFormConfig&&this.leadFormConfig.leadgen_tracking_id&&(t.attr("href",this.playerController.config.slideview_url+"&from_embed_lead_cta=true&"+TRACKING_ID_URL_PARAM+"="+this.leadFormConfig.leadgen_tracking_id),t.show(),this.trackLeadAction("load"),t.unbind("click").bind("click",function(t){e.trackLeadAction("click")}),this.canShowAtDownload()&&(i.attr("href",this.playerController.config.slideview_url+"&from_embed_lead_cta=download&"+TRACKING_ID_URL_PARAM+"="+this.leadFormConfig.leadgen_tracking_id),i.show(),this.trackLeadAction("load_cta_download"),i.bind("click",function(t){e.trackLeadAction("click_cta_download")})))},SSLeadForm.prototype.exists=function(){return void 0!==this.leadFormConfig},SSLeadForm.prototype.canShowAtEndOfSlideshow=function(){return this.leadFormConfig&&this.leadFormConfig.for_end_of_slideshow},SSLeadForm.prototype.canShowAtDownload=function(){return this.leadFormConfig&&this.leadFormConfig.for_download},SSLeadForm.prototype.getSlideTriggerNumber=function(){return this.leadFormConfig&&this.leadFormConfig.form_after_slide_number},SSLeadForm.prototype.isLeadFormFilledRequired=function(){return this.leadFormConfig&&this.leadFormConfig.form_after_slide_required},SSLeadForm.prototype._setLeadFilledForAuthor=function(){if(this.leadShownAndDisabled=!0,this.hideCta(),window.localStorage){var e=localStorage.getItem("leadFormFilled");e?e.split(",").indexOf(""+this._getAuthorId())<0&&(e+=","+this._getAuthorId(),localStorage.setItem("leadFormFilled",e)):localStorage.setItem("leadFormFilled",this._getAuthorId())}},SSLeadForm.prototype.checkLeadFilledForAuthor=function(){if(this.leadShownAndDisabled)return!0;if(window.slideshare_object&&slideshare_object.slideshow&&slideshare_object.user&&slideshare_object.slideshow.user_login===slideshare_object.user.login)return!1;if("undefined"==typeof localStorage)return!1;var e=window.localStorage&&localStorage.getItem("leadFormFilled");return e&&$.inArray(""+this._getAuthorId(),e.split(","))>=0},SSLeadForm.prototype.trackLeadAction=function(e){var t=this.gaActionPrefix+e+this.gaActionSuffix;slideshare_object.ga(this.gaCategory,t,this.slideshowId.toString())},SSLeadForm.prototype.recordTrackingEvent=function(e){var t=this.slideshowId.toString(),i=this.leadFormConfig.lead_campaign_id.toString(),o={requestHeader:{pageKey:this.tracking.pageKey},trackingId:this._getLeadgenTrackingId(),leadCampaignInfo:{slideshowUrn:this.trackingUtils.getUrn("Slideshow",t),leadCampaignUrn:this.trackingUtils.getUrn("LeadCampaign",i)},triggerInfo:{trigger:this.tracking.trigger,slideNumber:this.leadOnSlideNumber}};this.trackingUtils.recordTrackingEvent(this.appId,e,o)},SSLeadForm.prototype._getLeadgenTrackingId=function(){var e=getUrlVar(TRACKING_ID_URL_PARAM);return e||this.leadFormConfig&&this.leadFormConfig.leadgen_tracking_id},SSLeadForm.prototype._showVariation=function(e){this.$leadContainer.find(".variation").hide(),this.$leadContainer.find("."+e+"-variation").show()},SSLeadForm.prototype.openedViaCTA=function(e){this.gaActionPrefix=OPENED_FROM_CTA_PREFIX,this.gaActionSuffix="",this.gaActionSuffix+=e?"_end":"",this.tracking.trigger="GET_IN_TOUCH",this._showVariation("default"),this.leadOnSlideNumber=null},SSLeadForm.prototype.openedViaNavigation=function(e,t){var i="";this.isLeadFormFilledRequired()?this._showVariation("lead-form-required"):this._showVariation("default"),this.leadOnSlideNumber=null,e?(i="_end",this.tracking.trigger="ON_END"):t&&(this.leadOnSlideNumber=t,this.tracking.trigger="ON_SLIDE"),this.gaActionPrefix=OPENED_FROM_CTA_PREFIX,this.gaActionSuffix=OPENED_FROM_NAVIGATION_SUFFIX+i},SSLeadForm.prototype.openedViaDownload=function(e){this.gaActionPrefix="",this.gaActionSuffix=OPENED_FROM_DOWNLOAD_SUFFIX,this.openedViaDownloadFlag=!0,this.gaActionSuffix+=e?"_end":"",this.tracking.trigger="ON_DOWNLOAD",this._showVariation("download"),this.leadOnSlideNumber=null},SSLeadForm.prototype._bindEvents=function(){var e=this;$("#j-lead-wrapper").on("valid.fndtn.abide","#lead-form",function(t){e._toggleSubmissionState(),$.ajax({url:this.action,type:"POST",data:$(this).serializeArray().concat(e._getDynamicDataForLead()),success:function(t){t.success?(e.trackLeadAction("sent"),e.recordTrackingEvent("SlideShareLeadCreatedEvent"),$.slideshareEventManager&&$.slideshareEventManager.trigger("leadcreated"),e._setLeadFilledForAuthor(),$("#j-lead-form-submission-success").foundation("reveal","open")):($("#j-lead-form-submission-error").foundation("reveal","open"),e.trackLeadAction("error")),e.downloadResponse=t.download,e.openedViaDownloadFlag&&e.download()},complete:function(){e._toggleSubmissionState()},error:function(e){$("#j-lead-form-submission-error").foundation("reveal","open")},crossDomain:!0,xhrFields:{withCredentials:!0}})}),this.$leadContainer.on("click",".j-lead-cancel",function(t){t.preventDefault(),t.stopPropagation(),e.trackLeadAction($(this).data("ga")),$.slideshareEventManager&&$.slideshareEventManager.trigger("leadcancelled"),e.hide()}),this.$leadContainer.on("click",".j-track-lead",function(t){e.trackLeadAction($(this).data("ga"))})},SSLeadForm.prototype.download=function(){slideshare_object.download_interaction.download(this.downloadResponse)},SSLeadForm.prototype._getDynamicDataForLead=function(){function e(e){var t="slideshow_lead";return t+"["+e+"]"}return[{name:e("trigger"),value:TRIGGER_TYPES[this.tracking.trigger]},{name:e("platform"),value:this._getPlatform()}]},SSLeadForm.prototype._getPlatform=function(){var e;return e=this._isFromEmbed()?PLATFORM_TYPES.EMBED:window.slideshare_object.is_mobile?PLATFORM_TYPES.MOBILE_WEB:PLATFORM_TYPES.DESKTOP},SSLeadForm.prototype._unbindEvents=function(){},SSLeadForm.prototype.deactivate=function(){},SSLeadForm.prototype.activate=function(){},SSLeadForm.prototype.hide=function(){this.$leadContainer.foundation("reveal","close")},SSLeadForm.prototype.show=function(){this.trackLeadAction("open"),this.recordTrackingEvent("SlideShareLeadFormViewEvent"),this.$leadContainer.foundation("reveal","open")},SSLeadForm.prototype.isVisible=function(){return $(".lead-overlay").is(":visible")},SSLeadForm.prototype._toggleSubmissionState=function(){this.$submitLeadButtonLabel.toggle(),this.$submitLeadButtonLoading.toggle(),this.$submitLeadButton.prop("disabled",function(e,t){return!t})},SSLeadForm.prototype.hideCta=function(){this.leadCta&&this.leadCta.hide()},SSLeadForm.prototype.showCta=function(){this.leadCta&&this.leadCta.show()},SSLeadForm.prototype.destroy=function(){$(".lead-overlay").remove()},SSLeadForm.prototype._initCountries=function(){this.countryFieldSelector="#slideshow-lead-answer-country",this.$countryField=$(this.countryFieldSelector),this.$countrySubdivisionField=$("#slideshow-lead-answer-country-subdivision"),this.countrySubdivisions={},this.$countrySubdivisionField.length>0&&this.$countryField.length>0&&(this.$countryField.get(0).onchange=function(){$(this).trigger("countryChanged")}),this.$leadContainer.on("countryChanged",this.countryFieldSelector,function(){this.$countrySubdivisionField.length>0&&this._loadCountrySubdivisions(this.$countryField.val())}.bind(this))},SSLeadForm.prototype._loadCountrySubdivisions=function(e){if(this.$countrySubdivisionField.find("option:gt(0)").remove(),this.$countrySubdivisionField.parent().removeClass("error"),e){var t=this;if(this.countrySubdivisions[e]){var i=this.countrySubdivisions[e];this.$countrySubdivisionField.toggle(i.length);for(var o=0;o<i.length;o++)this.$countrySubdivisionField.append(new Option(i[o].name,i[o].value))}else $.ajax({url:"/country/subdivisions?country="+e,dataType:"json",async:!1,success:function(i){t.countrySubdivisions[e]=i.subdivisions,t._loadCountrySubdivisions(e)}})}else this.$countrySubdivisionField.hide();this.$countrySubdivisionField.is(":visible")?this.$countrySubdivisionField.attr("required",""):this.$countrySubdivisionField.removeAttr("required")},SSLeadForm.prototype._getAuthorId=function(){return this.playerController.config.author_id},SSLeadForm.prototype._isEmbed=function(){return this.playerController&&-1!==$.inArray(this.playerController.config.hosted_in,["slideshare","embed"])},SSLeadForm.prototype._isFromEmbed=function(){return getUrlVar("from_embed_lead_cta")},SSLeadForm.prototype._isFromEmbedDownloadCTA=function(){return"download"===getUrlVar("from_embed_lead_cta")},SSLeadForm.prototype._initThirdParties=function(){$(document).foundation({abide:{validators:{phoneValidator:function(e,t,i){return 0===e.value.length?(i.find(".error").empty().append($("#j-lead-form-field-required-error-msg").contents().clone()),!1):/^\+(?:[0-9] ?){6,14}[0-9]$/.test(e.value)?!0:(i.find(".error").empty().append($(document.createTextNode(i18n("lead_form.phone.international_format_message"))).add(document.createElement("br")).add(document.createTextNode(i18n("lead_form.phone.format.example")))),!1)}}}}),$(document).foundation("abide","events"),this._autofillWorkaround()},SSLeadForm.prototype._autofillWorkaround=function(){document.body.appendChild(document.getElementById("j-lead-container"))},SSReplayScreen.prototype._init=function(){},SSReplayScreen.prototype.show=function(e){void 0===this.overlay&&(this.overlay=$("<div/>").css({width:"100%",height:"100%","background-color":"black",opacity:.75,position:"absolute",top:0,left:0}).appendTo(this.config.renderTo),this.lastScreen=$("<div/>").css({position:"absolute"}).html(this.html).appendTo(this.config.renderTo),this.setDimensions(e),this.bindEvents())},SSReplayScreen.prototype.destroy=function(){this.overlay&&(this.overlay.remove(),delete this.overlay),this.lastScreen&&(this.lastScreen.remove(),delete this.lastScreen)},SSReplayScreen.prototype.bindEvents=function(){var e=this;this.lastScreen.find(".j-replay-button").bind("click",function(t){t.preventDefault(),e.destroy(),$.slideshareEventManager.trigger("gotofirstslide"),$.slideshareEventManager.trackEvent("lastscreen_replay")})},SSReplayScreen.prototype.setDimensions=function(e){if(void 0!==this.lastScreen){var t,i,o=93,n=25;t=(e.height-n)/2,i=(e.width-o)/2,t=0>t?0:parseInt(t,10),i=0>i?0:parseInt(i,10),this.lastScreen.css({top:t,left:i})}},SSShareWidgets.prototype.loadTwWidget=function(){window.twttr=function(e,t,i){var o,n,r=e.getElementsByTagName(t)[0];return e.getElementById(i)?void 0:(n=e.createElement(t),n.id=i,n.src="//platform.twitter.com/widgets.js",r.parentNode.insertBefore(n,r),window.twttr||(o={_e:[],ready:function(e){o._e.push(e)}}))}(document,"script","twitter-wjs");var e=this;twttr.ready(function(t){var i=e;t.events.bind("tweet",function(e){e&&$.slideshareEventManager.trackEvent(i.gaCategory+"twitter_share")}),t.events.bind("click",function(e){$.slideshareEventManager.trackEvent(i.gaCategory+"twitter_click")})})},SSShareWidgets.prototype.loadLIwidget=function(){var e=document.location.protocol+"//platform.linkedin.com/in.js?async=true";"undefined"==typeof IN?$.getScript(e,function(){"undefined"!=typeof IN&&IN.init({api_key:"y4wa9oe4c6nu",credentials_cookie:!0,authorize:!0,entropy:Math.floor(1e4*Math.random())})}):IN.parse(document),window.socialScreenLinkedInSuccess=function(){$.slideshareEventManager.trackEvent(that.gaCategory+"li_share")}},SSShareWidgets.prototype.loadGplusWidget=function(){window.___gcfg={lang:"en-US"},function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];
t.parentNode.insertBefore(e,t)}(),window.socialScreenPlusOneSuccess=function(){$.slideshareEventManager.trackEvent(that.gaCategory+"gplus_share")}},SSShareWidgets.prototype.loadPinItWidget=function(){!function(e){var t=e.getElementsByTagName("SCRIPT")[0],i=e.createElement("SCRIPT");i.type="text/javascript",i.async=!0,i.src="//assets.pinterest.com/js/pinit.js",t.parentNode.insertBefore(i,t)}(document),this.container.find(".pinit-btn").click(function(){$.slideshareEventManager.trackEvent(that.gaCategory+"pinit_share")})},SSShareWidgets.prototype.sendMail=function(e){var t=!1,i=e.sendButton;t||(i.trigger("mailSending"),t=!0,$.post(e.postTo,{data:e.params,dataType:"json"}).success(function(e){t=!1,e.isSuccess?i.trigger("mailSendSuccess"):i.trigger("mailSendFailure",e)}).error(function(e,o,n){t=!1,i.trigger("mailSendError")}))},SSShareOptions.prototype._init=function(){},SSShareOptions.prototype.show=function(){var e=this;this.shareOptions=$("<div/>").html(this.html).appendTo(this.renderTo),this.setShareObjects(),$.each({".thirdPartyShare a.Twitter":this.config.twitterShare,".thirdPartyShare a.Linkedin":this.config.linkedinShare},function(t,i){e.shareOptions.find(t).bind("click",function(e){e.preventDefault(),window.open(i,"ss_share","width=660,height=490,toolbar=no,resizable=fixed,status=no,scrollbars=no,menubar=no,screenX=0,screenY=0").focus()})}),this.fbLike.replaceWith(this.config.facebookLike)},SSShareOptions.prototype.setShareObjects=function(){this.twitter=this.shareOptions.find(".Twitter"),this.linkedIn=this.shareOptions.find(".Linkedin"),this.fbLike=this.shareOptions.find(".fb-like")},SSSlideDisplayer.prototype._init=function(){this.config.show_image_player?this.container=$(".stage"):(this.container=$("<div/>").addClass("slideDisplayer "+this.playerBgColor).appendTo(this.config.renderTo),this.showInitializer())},SSSlideDisplayer.prototype.hideInitializer=function(){this.config.show_image_player||this.container.find("*").not(".pointly").remove()},SSSlideDisplayer.prototype.error=function(e){this.hideInitializer(),e.appendTo(this.container)},SSSlideDisplayer.prototype.zoomin=function(){var e=this.zoomIndex+1;e!==this.zoomLevels.length&&(this.zoomIndex=e,this.setZoom(e),$(this).trigger("zoomchanged"))},SSSlideDisplayer.prototype.zoomout=function(){0!==this.zoomIndex&&(this.zoomIndex-=1,this.setZoom(this.zoomIndex),$(this).trigger("zoomchanged"))},SSSlideDisplayer.prototype.activate=function(){},SSSlideDisplayer.prototype.deactivate=function(){},SSSlideDisplayer.prototype.destroy=function(){this.container.remove()},SSSlideDisplayer.prototype._bindEvents=function(){},SSSlideDisplayer.prototype.refresh=function(e){var t=this;$.each(e,function(e,i){t.config[e]&&(t.config[e]=i)})},SSTouchInteraction.prototype._init=function(){this.touch={active:!1},this._bindEvents()},SSTouchInteraction.prototype.scrollVariables=function(){this.slideHeight=$(".verticalStack").height(),this.scrollBottomOffset=2*this.slideHeight},SSTouchInteraction.prototype.loadNextSlides=function(e){var t=2,i=e.data.touch,o=$(window).scrollTop(),n=$(".slideShow").height();if(n-o<i.scrollBottomOffset)for(var r=0;t>r;r++)$.slideshareEventManager.trigger("next",{source:"scroll_next"})},SSTouchInteraction.prototype.loadNextSlide=function(e){var t=$(e.target);t.hasClass(".verticalStack")||(t=t.closest(".verticalStack"));var i=parseInt(t.attr("touchCount"),10),o=parseInt(t.attr("slideNumber"),10);isNaN(o)&&(o=parseInt($("div[touchcount]").last().attr("slidenumber"),10)),isNaN(i)?(t.attr("touchCount",1),$.slideshareEventManager.trigger("next",{source:"scroll_next",touchedSlideNo:o}),window._gaq.push(["_trackEvent","jsplayer","slideTouched",config.player_type])):3>i&&(t.attr("touchCount",i+1),$.slideshareEventManager.trigger("next",{source:"scroll_next",touchedSlideNo:o})),1===o&&i>1||90===window.orientation||-90===window.orientation?updateSlideNumber(o):updateSlideNumber(o+1)},SSTouchInteraction.prototype.getTouchEvent=function(){var e;return e="ontouchstart"in window?"touchstart":window.navigator.msPointerEnabled?"MSPointerDown":"click"},SSTouchInteraction.prototype.slideNextOnScroll=function(){var e=this;config.scroll_test||$("#slideshow").on(this.getTouchEvent(),function(t){e.loadNextSlide(t)}),$("#more-slide").on("click",function(t){window._gaq.push(["_trackEvent","jsplayer","LoadMoreSlide",config.player_type]),e.loadNextSlide(t)})},SSTouchInteraction.prototype.activate=function(){var e=$(".hideControls"),t=$(".slideShow"),i=$.slideshareEventManager,o=this.getTouchEvent(),n=this,r=window.innerWidth>0?window.innerWidth:screen.width,s=this.config.container.width();if("embed"===this.config.hostedIn&&s>r&&$("body").width(r),e.show(),$("#slide_next_mobile").on(o,function(e){e.preventDefault(),i.trigger("next",{source:"tap_next"}),window._gaq.push(["_trackEvent","jsplayer","mobile_next",config.real_player_type])}),$("#slide_previous_mobile").on(o,function(e){e.preventDefault(),i.trigger("previous",{source:"tap_previous"}),window._gaq.push(["_trackEvent","jsplayer","mobile_prev",config.real_player_type])}),"undefined"!=typeof new_mobile_player){$("#slide-end").live(o,function(e){$(window).scrollTop(0)}),this.slideNextOnScroll(),$("#play-icon").on(this.getTouchEvent(),function(e){e.stopPropagation(),"undefined"!=typeof n.containerHeight?t.height(n.containerHeight):t.height(2*$(".verticalStack").height()),$("#play-icon, .presentationSharing, #more-related-content").hide(),$("#view-done, #view-save, #slidecount, #more-slide").show(),$(".header").removeClass("fixed-header"),config.scroll_test&&(n.scrollVariables(),$(window).bind("scroll",{touch:n},n.loadNextSlides)),i.trigger("mobileScrollPlayingMode","play"),window._gaq.push(["_trackEvent","jsplayer","Mobile_PlayButton",config.player_type])}),$("#view-done").on(this.getTouchEvent(),function(e){e.stopPropagation(),e.preventDefault(),n.containerHeight=t.height(),t.height($(".verticalStack").height()),$("#view-done, #view-save, #slidecount, #more-slide, #slide-end").hide(),$(".header").addClass("fixed-header"),i.trigger("mobileScrollPlayingMode","pause"),$.mobile.silentScroll(0),$(".presentationSharing, #more-related-content").show(),$("#play-icon").css("display","table"),config.scroll_test&&$(window).unbind("scroll",n.loadNextSlides),window._gaq.push(["_trackEvent","jsplayer","Mobile_ViewDoneButton",config.player_type])});var a=$("#view-save");a.on(this.getTouchEvent(),function(e){if(e.stopPropagation(),e.preventDefault(),!a.hasClass("mobile_view_saved")){a.addClass("mobile_view_saved");var t=a.data("save-url");window._gaq.push(["_trackEvent","jsplayer","Mobile_ViewSaveButton_Click",config.player_type]),$.ajax({url:t,success:function(e){e.success?(a.text("Saved"),window._gaq.push(["_trackEvent","jsplayer","Mobile_ViewSaveButton_Success",config.player_type])):(a.removeClass("mobile_view_saved"),window._gaq.push(["_trackEvent","jsplayer","Mobile_ViewSaveButton_Failure",config.player_type]))},error:function(e){a.removeClass("mobile_view_saved"),window._gaq.push(["_trackEvent","jsplayer","Mobile_ViewSaveButton_Error",config.player_type])}})}}),$(document).bind("touchmove",function(e){a.is(":visible")&&(a.addClass("scrolling-hide"),$("#view-done, #view-save").hide())}),$(document).bind(this.getTouchEvent(),function(e){a.hasClass("scrolling-hide")&&(a.removeClass("scrolling-hide"),$("#view-done, #view-save").show())})}else e.on(o,function(e){var t=1e3,i=parseInt($(".current_slide_number").text(),10),o=$(".previous .ui-btn-inner"),n=$(".next .ui-btn-inner"),r=$(".landscape-full-screen-slidecount");r.show(),setTimeout(function(){r.hide()},t),1!==i&&(o.show(),setTimeout(function(){o.hide()},t)),i!==parseInt($("#total_slides_number").text(),10)?(n.show(),setTimeout(function(){n.hide()},t)):setTimeout(function(){$(".lastScreen").css("z-index",99999)},2e3),4===i&&$(".navIcons").removeClass("highlight")})},SSTouchInteraction.prototype.deactivate=function(){},SSTouchInteraction.prototype.destroy=function(){},SSTouchInteraction.prototype._bindEvents=function(){},SSToolbar.prototype._init=function(){var e;this.config.show_image_player?e=$(".toolbar"):(e=$('<div class="toolbar"></div>').html(this.config.html).appendTo(this.config.renderTo),$(".slideshow-info-container").css("padding-top",20)),this.container=e,this.toolbarOnFullscreen="presentation"===this.config.player_type||"document"===this.config.player_type,this.toolbarOnFullscreen&&(this.$fullscreenTitleBanner=$(".j-fullscreen-title-banner")),this.$currSlide=this.container.find(".j-current-slide"),this.$progressBar=this.container.find(".j-progress-bar"),this.$progressBar.length&&this.initProgressBar(),this.totalSlideCount=this.config.totalSlideCount,this.config.toolbarClass=this._getToolbarClass(),this.container.addClass(this.config.toolbarClass),this.config.enableViewSS&&e.find(".btnViewOnSS").show(),this.config.isFullScreen&&(e.find("#btnFullScreen").hide(),e.find("#btnLeaveFullScreen").show()),"video"===this.config.playerType&&(this.volumeControl=new SSVolumeControl({container:e.find(".jspl_volume_control"),renderTo:e,trigger:e.find(".btnVolume"),player:this.config.renderTo}),this.audioActive=!0);var t=this;e.find(".j-total-slides").text(this.totalSlideCount),$(".slide_container").on("mousemove",function(e){t.prevCursorScreenX!==e.screenX&&t.prevCursorScreenY!==e.screenY&&(t.prevCursorScreenY=e.screenX,t.prevCursorScreenY=e.screenY,t.showFullscreenToolbar(!0))}),this.container.on("mouseover",function(){t.showFullscreenToolbar(!1)})},SSToolbar.prototype.showFullscreenToolbar=function(e){if(this.config.isFullScreen&&this.toolbarOnFullscreen){var t=this.$fullscreenTitleBanner.add(this.container.closest(".toolbar_wrapper")).add("#lead_cta");t.is(":hidden")&&t.fadeIn("fast"),clearTimeout(this.showFSElemsTimer),e&&(this.showFSElemsTimer=setTimeout(function(){t.fadeOut("fast")},3e3))}},SSToolbar.prototype._initForNativeFullScreen=function(){this._ELEMENT_VISIBILITY.fullScreen=!this.config.disableFullScreen&&!this.config.isFullScreen,this._ELEMENT_VISIBILITY.leaveFullScreen=!this.config.disableLeaveFullScreen&&this.config.isFullScreen},SSToolbar.prototype._getToolbarClass=function(){var e="";return e=this.config.width<400?"small":"normal"},SSToolbar.prototype.resetButtons=function(e){this._unbindButtonHandler(e),this._bindButtonHandler(e)},SSToolbar.prototype.getElements=function(e){var t=this.container,i={nav:".nav",share:".btnShare",fullScreen:"#btnFullScreen",leaveFullScreen:"#btnLeaveFullScreen",viewOnSS:".btnViewOnSS",goToSlide:".goToSlideLabel",zoomButtons:".docActions"},o={};return $.each(i,function(i,n){e&&e[i]?o[i]=$(e[i]):o[i]=t.find(n)}),o},SSToolbar.prototype.getButtons=function(e,t){var i=this,o={},n=t;return $.each(e,function(e,t){n&&n[e]?o[e]=$(n[e]):o[e]=i.container.find(t)}),o},SSToolbar.prototype.deactivate=function(){var e=this._BUTTONS;$.each(e,function(e,t){t.unbind("click")}),this._unbindButtonHandler(this._BUTTONS),this.container.find(".goToSlideLabel>input[type=text]").attr("disabled",!0),this.active=!1,"video"===this.config.playerType&&this._activateAudio()},SSToolbar.prototype.activate=function(){var e=this;this.container,this._bindButtonHandler({btnViewOnSS:"viewonss",btnFirst:"gotofirstslide",btnSS:"viewonss",btnPrevious:"previous",btnNext:"next",btnLast:"gotolastslide",btnFullScreen:"viewfullscreen",btnLeaveFullScreen:"leavefullscreen",btnZoomOut:"zoomout",btnZoomIn:"zoomin",btnFind:"playersearch",btnShare:"playershare"}),this.isClippable||(this.activateProgressTooltip(),this.$progressBar.on("click",function(){var t=parseInt(e.$tooltipSlideCount.text(),10);$.slideshareEventManager.trigger("gotoslide",{index:t}),$.slideshareEventManager.trackEvent("progressbar_click")})),this.active=!0,"video"===this.config.playerType&&this._activateAudio()},SSToolbar.prototype.updateAudioInteraction=function(e){var t;for(t in e)this[t]=e[t];return"video"===this.config.playerType?void this._activateAudio():void(this.active&&this.audioReady&&this.audioMetaReady?(!this.audioActive&&this._activateAudio(),this._updateAudioDisplay()):this.audioActive&&this._deactivateAudio())},SSToolbar.prototype._activateAudio=function(){this.container.find(".btnAudio,.btnVolume").removeClass("disabled"),this._bindButtonHandler({btnAudio:"toggleaudio",btnVolume:"showvolumecontrol"}),this.audioActive=!0},SSToolbar.prototype._deactivateAudio=function(){this.container.find(".btnAudio,.btnVolume").addClass("disabled"),this._unbindButtonHandler({btnAudio:null,btnVolume:null}),this.audioActive=!1},SSToolbar.prototype._updateAudioDisplay=function(e){this.audioPlaying?this.container.find(".btnAudio").removeClass("btnAudioPlay").addClass("btnAudioPause").attr("title","Pause"):this.container.find(".btnAudio").removeClass("btnAudioPause").addClass("btnAudioPlay").attr("title","Play")},SSToolbar.prototype._bindButtonHandler=function(e){var t=this;$.each(e,function(e,i){var o=t._BUTTONS[e];o&&(o.unbind(),o.bind("click",function(e){e.preventDefault();var o=t.GA_EVENTS_SRC[i];$.slideshareEventManager.trigger(i,{source:o});var n=t.GA_EVENTS[i];n&&$.slideshareEventManager.trackEvent(n)}))})},SSToolbar.prototype._unbindButtonHandler=function(e){var t=this;$.each(e,function(e){var i=t._BUTTONS[e];i.unbind(),i.bind("click",function(e){e.preventDefault(),e.stopPropagation()})})},SSToolbar.prototype.setDimensions=function(e){var t,i,o,n,r=this,s=r._ELEMENT_WIDTHS[r._ELEMENT_PRIORITIES[1][0]],a=e.width/2-r.config.toolbarPadding-s,l={one:a,two:a};this._ELEMENT_PRIORITIES.length,$.each(this._ELEMENT_PRIORITIES,function(e,s){t=s.length;for(var a=0;t>a;a++){i=s[a];var d=r._ELEMENT_SECTION[i];o=r._ELEMENT_WIDTHS[i],n=r._ELEMENT_VISIBILITY[i]&&l[d]>o,1==e||n?(r._ELEMENTS[i].show(),1!=e&&(l[d]-=o)):r._ELEMENTS[i].hide()}})},SSToolbar.prototype.updateCurrentPosition=function(e){this.handleDisabledButtons(e),this.$currSlide.text(e)},SSToolbar.prototype.handleDisabledButtons=function(e){this._BUTTONS.btnPrevious.find(".j-prev-btn").removeClass("disabled"),1===e&&this._BUTTONS.btnPrevious.find(".j-prev-btn").addClass("disabled")},SSToolbar.prototype.destroy=function(){this.container.remove()},SSToolbar.prototype.updateProgressBar=function(){if(this.$slidesLoadedBar){var e=this.$currSlide.text()/this.totalSlideCount*100;this.$slidesLoadedBar.width(e+"%")}},SSToolbar.prototype.initProgressBar=function(){var e=this;this.$slidesLoadedBar=this.$progressBar.find(".j-slides-loaded-bar"),this.$progressToolTip=this.$progressBar.find(".j-progress-tooltip"),this.$toolTipContent=this.$progressToolTip.find(".j-tooltip-content"),this.$toolTipThumb=this.$toolTipContent.find(".j-tooltip-thumb"),this.$tooltipSlideCount=this.$progressToolTip.find(".j-slidecount-label"),this.$tooltipSlideCount.text(this.$currSlide.text()),this.isClippable||(this.$progressBar.on("mousemove",function(t){e.displayProgressTooltip(t)}),this.$progressBar.on("mouseleave",function(){e.hideProgressTooltip()}))},SSToolbar.prototype.displayProgressTooltip=function(e){var t=this.$progressBar.offset().left,i=e.pageX-t,o=this.$progressBar.width(),n=Math.max(1,Math.ceil(i/o*this.totalSlideCount)),r=this.$progressToolTip.outerWidth();this.$progressToolTip.css("margin-left",i-r/2),this.$tooltipSlideCount.text(n),this.config.isEmbed&&this.fitTooltipInWindow();var s=this.$toolTipThumb.attr("slide-thumb-"+n);this.$toolTipThumb.attr("src",s),this.$progressToolTip.show()},SSToolbar.prototype.updateBamboo=function(e){var t=this._BUTTONS.btnNext.find("a"),i=this._BUTTONS.btnPrevious.find("a");t.data("slide",e.nextInd),t.attr("href",e.nextHref),t.attr("title",e.nextTitle),i.data("slide",e.prevInd),i.attr("href",e.prevHref),i.attr("title",e.prevTitle)},SSToolbar.prototype.fitTooltipInWindow=function(){this.$toolTipThumb.css({"margin-left":0,"margin-right":0}),this.$tooltipSlideCount.css({"margin-left":0,"margin-right":0,"border-bottom-left-radius":3,"border-bottom-right-radius":3});var e=this.$toolTipThumb.offset().left,t=e+this.$toolTipThumb.outerWidth(),i=this.$tooltipSlideCount.offset().left,o=i+this.$tooltipSlideCount.outerWidth(),n=$(window).width();0>e?this.$toolTipThumb.css("margin-left",-1*e):t>n&&this.$toolTipThumb.css("margin-left",2*(n-t)),0>i?this.$tooltipSlideCount.css({"margin-left":-1*i-1,"border-bottom-left-radius":0}):o>n&&this.$tooltipSlideCount.css({"margin-left":n-o,"border-bottom-right-radius":0})},SSToolbar.prototype.deactivateProgressTooltip=function(){this.$progressToolTip&&this.$progressBar&&!this.isClippable&&(this.$progressToolTip.hide(),this.$progressBar.off("mousemove"),this.$progressBar.off("mouseleave"))},SSToolbar.prototype.activateProgressTooltip=function(){this.$progressToolTip&&this.$progressBar&&!this.isClippable&&(this.deactivateProgressTooltip(),this.$progressBar.on("mousemove",this.displayProgressTooltip.bind(this)),this.$progressBar.on("mouseleave",function(){this.$progressToolTip.hide()}.bind(this)))},SSPlayerController.prototype._init=function(){var e,t=slideshare_object.utils.imports("tracking.ClickGenTracker");if(this.clickGenTracker=new t,this.clickGenTracker.renderAllLinks="all"===this.config.render_links,$.slideshareEventManager.registerController(this),$.slideshareEventManager.registerEnvironment(this.config.hosted_in),this.cachedDomElements={},this.componentSets={},e=this._isFullScreen()?"fullscreen":"normal",this._createComponentSet(e),this.isNativeFullScreenSupported=this._isNativeFullScreenSupported(),this._bindEvents(),this.exitFullScreenHandler=this.exitFullScreenHandlerFactory(),"video"!==this.mode?this.config.disable_meta&&this.config.show_image_player?(this.conversionVersion=2,this.slideSizes={},this.slideLinks={},this.postInitialize()):(this._initMetadata(),this._loadMetadata()):(this.VIDEO_REINITIALISE_TIME=100,this.VIDEO_FULLSCREEN_ZINDEX=100,this._loadVideoMeta()),$(document).trigger("slideshare-player-controller:init-done"),$.slideshareEventManager.trackEvent("player_initialized",!0),this.config.next_prev_experiment){this.config.next_slideshow_pos&&$.slideshareEventManager.trackEvent("next_slideshow_cta_page_load");var i=window.cookie("next_slideshows_seen_ids");if(i&&(i=i.split(","),this.config.ssIds=i,i&&""!==i[0]))for(var o=0,n=i.length;n>o;o++)$('.j-related-more-tab .j-related-item a[data-ssid="'+i[o]+'"]').hide()}$(window).on("keyup",function(e){if(32==e.keyCode){var t=$(".player"),i=window.innerWidth==t.width()&&window.innerHeight==t.height();i&&$.slideshareEventManager.trigger("next",{source:"spacebar_next"})}})},SSPlayerController.prototype._loadVideoMeta=function(){this.config.is_private&&this._getHtmlSignatures(),this.initialized=!0},SSPlayerController.prototype._initMetadata=function(){if("html"===this.mode)this.config.is_private&&this._getHtmlSignatures(),this._initFontResources(),this._initHtmlMetadata(),this.config.image_ready&&this._initImageMetadata(!0);else{if("image"!==this.mode)throw window._gaq&&_gaq.push(["_trackEvent","jsplayer","invalidplayermode",this.config.id]),"Unknown player mode";this._initImageMetadata()}},SSPlayerController.prototype._loadMetadata=function(){if("html"===this.mode)this.metaResource.load(),this.config.image_ready&&this.imageMetaResource.load();else{if("image"!==this.mode)throw"Unknown player mode";this.imageMetaResource.load()}},SSPlayerController.prototype._initHtmlMetadata=function(e){this.metaResource=new SSMetaResource({url:this.config.bucket_location+"meta.js",timestamp:this.config.timestamp,type:"html",is_private:this.config.is_private,signature:e})},SSPlayerController.prototype._initImageMetadata=function(e,t){this.imageMetaResource=new SSMetaResource({url:this.config.image_bucket_location+"/meta.js",timestamp:this.config.timestamp,type:e?"imagefallback":"imageprimary"})},SSPlayerController.prototype._initFontResources=function(e,t){var i=navigator.userAgent.toLowerCase();t?fontBatchNum=Math.ceil(this.slideCount/t):fontBatchNum=Math.ceil(this.slideCount/this.FONT_BATCH_COUNT);var o;o=/msie/.test(i)&&!/opera/.test(i)?this.config.html_eotfont_url_suffix:this.config.html_ttffont_url_suffix;var n;for(this.fontResources=[],n=1;n<=fontBatchNum;n++)this.fontResources[n]=new SSFontResource({baseUrl:this.config.bucket_location,indexString:this._getIndexString(n,0),timestamp:this.config.timestamp,suffix:o})},SSPlayerController.prototype.getImagePrivateSignatures=function(e,t){var o=this;!function(t){$.ajax({url:o.config.images_signature_request_route,data:{id:o.config.id,key:o.config.secret_key,mode:t,images_sizes:e,version:o.conversionVersion,password_hash:o.config.password_hash,authenticity_token:window._auth_token},dataType:"json",cache:!1,type:"POST",success:function(e){if("html"===t?o.privateImageSignatures=e:"image"===t&&(o.privateFallBackImageSignatures=e),"html"===t||"image"===t)o.postInitialize();else if(o.slidesCreated){var n,r,s=o.slideModes.image.length;for(i=0;i<s;i++)r=o.slideModes.image[i],n=o.slides[o.realIndexToIndex[r]],n.resources.image.addSignature(e[r]),n.resources.image.ready()}else o.privateFallBackImageSignatures=e}})}(t)},SSPlayerController.prototype._getHtmlSignatures=function(){var e=this.config.signature_request_route,t=this;$.ajax({url:e,data:{id:this.config.id,key:this.config.secret_key},dataType:"json",cache:!1,type:"GET",success:function(e){var i,o=e.length;if(0!==o){for(var n=0;o>n;n++)i=e[n],t.htmlResourceSignatures=e[n].info;for(n=0;n<t.slideCount;n++)t.slides&&t.slides[n]&&(slide=t.slides[n],slide.resources.html.updateSignature(t.htmlResourceSignatures[n].url),slide.resources.html.ready())}},failure:function(){$.slideshareEventManager.trigger("metadataloadfailed",{type:t.config.type})}})},SSPlayerController.prototype._metaDataHandlers=function(){var e=function(){var e,t,i=this.currentComponentSet.slidedisplayer;e=i.container.height(),t=i.container.width(),i.error(this.generateErrorDom("meta_error_template",{width:t,height:e})),$("#playerFacade").hide()};return{html:{success:function(e){this.conversionVersion=parseInt(e.version||2,10),this.slideSizes=e.sizes||{},this.availableBgSizes=e.available_sizes||{};var t=e.error_scores||{};this.algo=t.algo||"bad v1.0",this.errorScores=t.webkit||{};var i="\n.ssml_div span {line-height:normal;} \n.ssml_div div {line-height:normal;}\n.ssml_div{font-size:16px;}";"none"===this.config.render_links&&(i+="\n.ssml_div a{cursor:default;}");var o="a.ssml_a {text-decoration:none;color:inherit;vertical-align:top;} \n.ssml_div span {position:absolute; white-space:pre; vertical-align:top;} \n.ssml_div div {position:absolute;}",n="<style>"+(e.global_styles_css||o)+i+"</style>";$(n).appendTo(this.currentComponentSet.container),e.pages_per_fontfile&&(this.FONT_BATCH_COUNT=e.pages_per_fontfile,this._initFontResources()),this.config.is_private?this.getImagePrivateSignatures(this.availableBgSizes,"html"):this.postInitialize()},failure:e},imagefallback:{success:function(e){"none"===this.config.render_links&&(e.links={}),this.slidesCreated?this.fallbackMetaHandler(e):this.fallbackMetaData=e},failure:function(){var e,t,i,o,n,r=this.slideModes.image.length;for(e=0;r>e;e++)o=this.slideModes.image[e],n=this.slides[o],t=n.currentViewMode.width,i=n.currentViewMode.height,n.displayError(this.generateErrorDom("slide_error_template",{width:t,height:i}),!0)}},imageprimary:{success:function(e){this.conversionVersion=parseInt(e.version||2,10),this.slideSizes=e.sizes||{},"none"===this.config.render_links&&(e.links={}),this.slideLinks=e.links||{},this.realSlideCount,this.availableFallbackSizes=e.available_sizes,this.config.is_private?this.getImagePrivateSignatures(this.availableFallbackSizes,"image"):this.postInitialize()},failure:e}}},SSPlayerController.prototype.fallbackMetaHandler=function(e){var t,o,n,r=parseInt(e.version||2,10),s=e.sizes||{},a=e.available_sizes||{},l=e.links||{},d=this.slideModes.image.length;for(i=0;i<d;i++)slideIndex=this.slideModes.image[i],o=s[slideIndex]||{},t=a[slideIndex],void 0===t&&(t={320:[75],768:[75]},t[o.width]=[75]),n=this.slides[this.realIndexToIndex[slideIndex]],n.setContentDimensions(o.width||0,o.height||0),n.updateResource("image",{sizes:{contentWidth:o.width||0,availableSizes:t,conversionVersion:r,is_private:this.config.is_private},linkData:l[slideIndex]||[]});this.config.is_private&&this.getImagePrivateSignatures(a,"imagefb")},SSPlayerController.prototype.postInitialize=function(){this._initSlides(),this._activateComponentSet(this.currentViewMode),this._setModeForSlides(this.currentViewMode),this.setDimensions(),$(this).trigger("playerinitialized");try{window.parent.infographic_campaign&&$.slideshareEventManager.trigger("viewfullscreen")}catch(e){}},SSPlayerController.prototype.initVideoPlayer=function(e){this.multimediaResource=this.currentComponentSet.videobar,this.multimediaResource.videoPlayer=jwplayer("videoSlideContainer_"+e),this._activateComponentSet(e),this.setDimensions(),$("[id*=videoSlideContainer]").css("cursor","default")},SSPlayerController.prototype._bindEvents=function(){var e=this;$(this).bind("playerinitialized",function(){this.initialized=!0,e.play()}),this.config.preload_after_pageload&&$(window).bind("load",function(){e.pageLoadFired=!0}),this.config.touch||"video"===this.config.player_type||$(document).bind("keyup",function(t){if("INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName){var i=e.currentComponentSet.leadForm;37!==t.keyCode||i&&i.isVisible()||(e.currentComponentSet.lastScreen&&e.currentComponentSet.lastScreen.destroy(),$.slideshareEventManager.trigger("previous")),39!==t.keyCode||i&&i.isVisible()||$.slideshareEventManager.trigger("next")}}),this.isNativeFullScreenSupported&&$(document).bind(this.nativeFullScreen.fullScreenChangeEventName(),function(t){e._nativeFullScreenHandler.call(e,t)})},SSPlayerController.prototype._bindComponentSetEvents=function(){var e=this,t=this.currentComponentSet;$(t.slidedisplayer).bind("zoomchanged",function(t){if(e.repaint(),this.documentSlider)for(var i=1;i<e.slides.length&&"undefined"!=typeof e.slides[i].currentViewMode.imageElement;)e.currentComponentSet.slidedisplayer.slidesContainer.width()!==e.slides[i].currentViewMode.imageElement.width()&&e.slides[i].show(!0),i++})},SSPlayerController.prototype._createComponentSet=function(e){this.componentSets[e]={},this.currentComponentSet=this.componentSets[e],this.currentViewMode=e;var t=this.currentComponentSet;if("normal"===e||this.config.show_image_player){if(t.container=$("#"+this.config.container),1!==t.container.length)throw"Unable to find container for player"}else"fullscreen"===e&&(this.normalModeScrollPosition=$(window).scrollTop(),t.container=$("<div/>").addClass("jsplInpageFullScreen").appendTo($("body")),$("body, html").css({overflow:"hidden"}));var i=this._isFullScreen(e),o=this._getPlayerBgColor(e);t.navigators=[];var n={renderTo:t.container,spinnerUrl:this.config.spinner_url,errorImageUrl:this.config.error_image_url,mode:this.mode,slideCount:this.slideCount,playerType:this.config.player_type,playerBgColor:o,hosted_in:this.config.hosted_in,show_image_player:this.config.show_image_player};"html"===this.config.player_type&&(n.iframe_id=this.config.iframe_id),this._isFullScreen(e)&&(n.spinnerUrl=this.config.spinner_url_fullscreen),"document"===this.config.player_type?"undefined"!=typeof new_mobile_player?t.slidedisplayer=new SSMobileDocumentDisplayer(n):t.slidedisplayer=new SSDocumentDisplayer(n):"video"===this.config.player_type?(this.videoSpecialSettings=this.getSpecialSettingsForVideo(),n.videoBucket=this.config.video_bucket,n.pptLocation=this.config.ppt_location,n.screenMode=e,n.videoSpinner=this.config.video_spinner_location,n.playerDomName=this.config.container,n.videoExtension=this.config.video_extension,n.useDefaultToolbar=this.videoSpecialSettings.defaultToolbar,n.ieAndLessThan8=this.videoSpecialSettings.ieLT8,n.swfLocation=this.config.swf_location,n.playIcon=this.config.video_play_icon,n.posterImage=this.config.poster_img_url,n.embedOnIe=this.isEmbedAndIE(),n.isEmbed="embed"===this.config.hosted_in,n.autoplayOnEmbed=this.config.autoplayOnEmbed,this.hasToolbar=!this.videoSpecialSettings.defaultToolbar,n.isMobileDevice=this.config.touch,n.isMobileAndNonIos=this.config.touch&&!navigator.userAgent.match(/(iPhone|iPad|iPod)/i),t.slidedisplayer=new SSVideoDisplayer(n)):"infographic"===this.config.player_type?(n.isMobileDevice=this.config.touch,t.slidedisplayer=new SSInfographicDisplayer(n)):"html"===this.config.player_type?(n.isMobileDevice=this.config.touch,t.slidedisplayer=new SSIframeDisplayer(n)):(n.isTouch=this.config.touch,"undefined"!=typeof new_mobile_player?t.slidedisplayer=new NewMobilePresentationDisplayer(n):t.slidedisplayer=new SSPresentationDisplayer(n)),this.hasToolbar=!this.config.touch||"mobile_slideview"!==this.config.hosted_in,t.navigators.push(t.slidedisplayer),this.setDimensions();var r=this.currentComponentSet.width,s=this.currentComponentSet.height;if(this.config.shareScreenClass="",this.config.lastScreenClass="",this.config.showProLastScreen=!0,"mobile_slideview"!==this.config.hosted_in&&(this.config.disable_share||(this.config.shareScreenClass=this._getShareScreenClass(r,s)),"slideview"!==this.config.hosted_in&&(this.config.lastScreenClass=this._getLastScreenClass(r,s)),this.config.showProLastScreen=this.canShowProLastScreen(r,s)),this.config.touch)t.touchInteraction=new SSTouchInteraction({container:t.slidedisplayer.container,playerType:this.config.player_type,hostedIn:this.config.hosted_in}),t.navigators.push(t.touchInteraction);else if("presentation"===this.config.player_type&&!isMobile()){var a="none"===this.config.render_links;t.bandInteraction=new SSBandInteraction({container:t.slidedisplayer.container,width:t.width,linksDisabled:a}),t.navigators.push(t.bandInteraction)}if(t.leadForm=new SSLeadForm(this),t.navigators.push(t.leadForm),this.hasToolbar){var l={width:t.width,height:this.TOOLBAR_HEIGHT,html:this.config.toolbar_html,renderTo:t.container,totalSlideCount:this.slideCount,primaryResourceType:this.config.primaryResourceType,disableShare:this.config.disable_share,disableFullScreen:this.config.disable_full_screen,enableViewSS:this.config.enable_viewSS,isFullScreen:i,playerType:this.config.player_type,enableZoomButtons:"document"==this.config.player_type,show_image_player:this.config.show_image_player,isEmbed:"slideview"!==this.config.hosted_in,isFlagged:this.config.flagging&&this.config.flagging.is_flagged,player_type:this.config.player_type},d=this.config.player_type;if("infographic"===d||"html"===d){var c={disableNav:!0,disableGoToSlide:!0,disableShare:!1,enableViewSS:!0,enableZoomButtons:!1,disableFullScreen:!1,disableLeaveFullScreen:!1,buttonOverrides:{btnLeaveFullScreen:"."+d+"_player a.j-exit-fullscreen"},elementOverrides:{leaveFullScreen:"."+d+"_player a.exit-fullscreen"}};if("slideview"==this.config.hosted_in){c.enableViewSS=!1,c.disableFullScreen=!1,c.disableLeaveFullScreen=!1,c.enableZoomButtons=!1;var h=c.buttonOverrides;h.btnFullScreen=".btnFullScreen",c.elementOverrides.fullScreen=".btnFullScreen"}"slideshare"==this.config.hosted_in&&(c.enableViewSS=!1),$.extend(l,c)}t.toolbar=new SSToolbar(l),t.navigators.push(t.toolbar)}"video"===this.config.player_type&&(t.toolbar||(t.toolbar=$("<div/>")),t.videobar=new SSVideoBar({renderTo:t.toolbar.container,height:this.MULTIMEDIABAR_HEIGHT,html:this.config.multimediabar_html,isMobileDevice:this.config.touch}),t.navigators.push(t.videobar),this.multimediaResource=t.videobar),this.config.has_video&&(t.videoConfetti=$("<img/>").attr({src:this.config.confetti_url}).css({position:"absolute",top:"-1px",left:"-1px"}).appendTo(t.container.find(".stage"))),this.config.disable_share||$(".j-action-share").click(function(e){e.preventDefault(),e.stopPropagation(),$.slideshareEventManager.trigger("playershare","share_btn_")}),"video"!==this.mode&&this._bindComponentSetEvents()},SSPlayerController.prototype.configureComponentsForNativeMode=function(e){var t=this.currentComponentSet;t.slidedisplayer.refresh({spinnerUrl:this.config.spinner_url_fullscreen}),t.toolbar.config.isFullScreen=this._isFullScreen(e),t.toolbar._initForNativeFullScreen(e)},SSPlayerController.prototype._isFullScreen=function(e){return"fullscreen"===e||"nativefullscreen"===e||this.config.is_fullscreen;
},SSPlayerController.prototype._getPlayerBgColor=function(e){var t=this._isFullScreen(e),i="jsplBgColorBigfoot";return i=t?this.config.fullscreen_bgcolor:this.config.player_bgcolor},SSPlayerController.prototype._getShareScreenClass=function(e,t){var i=null;return e>360&&t>260?i="normal":e>320&&t>250?i="small":e>290&&t>280&&(i="tiny"),i},SSPlayerController.prototype.canShowProLastScreen=function(e,t){return!(337>e||142>t)},SSPlayerController.prototype._getLastScreenClass=function(e,t){var i="small";return e>=512&&t>=421?i="medium":e>=427&&t>=356&&(i="normal"),i},SSPlayerController.prototype._destroyComponentSet=function(e){var t=this.componentSets[e];$.each(t.navigators,function(e,t){t.destroy()}),delete this.componentSets[e].navigators,delete this.componentSets[e].slidedisplayer,"fullscreen"===e&&(t.container.remove(),$("body, html").css({overflow:"auto"}));var i;if(this.slides)for(var o=1;o<=this.slideCount;o++)i=this.slides[o],i.viewModes[e].container.remove(),delete i.viewModes[e];delete this.componentSets[e].container,delete this.componentSets[e]},SSPlayerController.prototype._mapIndexes=function(){for(var e=this.config.video_hash,t=1,i=this.slideCount,o={},n={},r=1;i>=r;r++)e&&e[r]?o[r]=null:(o[r]=t,n[t]=r,t++);if(this.config.has_video){var s=document.createElement("script"),a=this.config.use_ssl?"https://":"http://";s.src=a+"www.youtube.com/player_api";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(s,l)}this.indexToRealIndex=o,this.realIndexToIndex=n},SSPlayerController.prototype._percentageFailing=function(e){var t=0;for(var i in this.errorScores)this.errorScores[i]>e&&t++;return 0===this.slideCount?0:parseInt(100*(t/this.slideCount),10)},SSPlayerController.prototype._initSlides=function(){this.slides=[],this.slideModes.image=[],this.slideModes.html=[];var e,t,i,o,n,r,s,a=!1,l=0,d=this.config.video_hash;this._mapIndexes();var c=this.indexToRealIndex,h=this.AUTOVERIFICATION_ERROR_THRESHOLD,p=0,u=100,f=638,g=479;2===this.conversionVersion&&"undefined"!=typeof this.AUTOVERIFICATION_THRESHOLDS[this.algo]&&(h=this.AUTOVERIFICATION_THRESHOLDS[this.algo],p=this._percentageFailing(h)),2===this.conversionVersion&&"undefined"!=typeof this.MAX_PERCENTAGE_FAILING[this.algo]&&(u=this.MAX_PERCENTAGE_FAILING[this.algo]);for(e in c)if(c.hasOwnProperty(e)){e=parseInt(e,10),s=c[e],null===c[e]?(r="ytube_video",l++):"iframe"===this.mode?r="iframe":1===e&&this.config.image_ready?(r="image",a=!0):"html"!==this.mode||this.config.image_ready?"image"===this.mode?r="image":2===this.conversionVersion&&p>u?(r="image",a=!0,this.disableLoadingFonts=!0):(n=parseFloat(this.errorScores[e]),isNaN(n)&&(n=this.DEFAULT_ERROR_SCORE),n>h?(r="image",a=!0):r="html"):r="html",null===s&&(s=d[e].parent),i=this.slideSizes[s]||{},"html"===r?this.slideModes.html.push(s):"image"===r&&this.slideModes.image.push(s);var m="all"===this.config.render_links;o={ssid:this.config.id,realIndex:s,index:e,type:this.mode,linkOffset:l,slideMode:r,indexGenerator:this._getIndexString,contentWidth:parseInt(i.width,10)||f,contentHeight:parseInt(i.height,10)||g,playerWidth:this.currentComponentSet.width,errorImageUrl:this.config.error_image_url,spinnerUrl:this.config.spinner_url,spinnerUrlFullscreen:this.config.spinner_url_fullscreen,playerType:this.config.player_type,stripped_title:this.config.stripped_title,timestamp:this.config.timestamp,ppt_location:this.config.ppt_location,is_private:this.config.is_private,is_render_all_links:m,hosted_in:this.config.hosted_in,show_image_player:this.config.show_image_player,isStartSlide:this.config.start_slide===e},"html"===r?(o.bucketLocation=this.config.bucket_location,o.availableSizes=this.availableBgSizes[s]):"image"===r?(o.bucketLocation=this.config.image_bucket_location,o.availableSizes=this.config.disable_meta?{1024:[95]}:this.availableFallbackSizes[s]):"iframe"===r&&(o.html_location=this.config.html_location,o.iframe_id=this.config.iframe_id),this.config.is_private&&("html"==r?(this.htmlResourceSignatures&&this.htmlResourceSignatures[s]&&(o.htmlResourceSignature=this.htmlResourceSignatures[s].url),o.privateImageSignatures=this.privateImageSignatures[s]):"image"==r&&this.privateFallBackImageSignatures&&(o.privateImageSignatures=this.privateFallBackImageSignatures[s])),"document"===this.config.player_type?t="undefined"!=typeof new_mobile_player?new MobileDocumentSlide(o):new SSDocumentSlide(o):"infographic"===this.config.player_type?t=new SSInfographicSlide(o):"html"===this.config.player_type?t=new SSIframeSlide(o):"ytube_video"!==r?t="undefined"!=typeof new_mobile_player?new SlideshareMobileSlide(o):new SSPresentationSlide(o):(o.video_id=d[e].video_id,o.current_video_count=l,o.loading_message_partial=this.config.loading_message_partial,1===e&&(o.contentWidth=728,o.contentHeight=542),t=new SSVideoEmbedSlide(o)),"image"===this.mode&&void 0!==this.slideLinks[s]&&t.updateResource("image",{linkData:this.slideLinks[s]||{}}),this.slides[e]=t,delete this.availableFallbackSizes[s]}a===!0&&(this.slidesCreated=!0,this.fallbackMetaData&&this.fallbackMetaHandler(this.fallbackMetaData))},SSPlayerController.prototype._getIndexString=function(e,t){var i,o=""+e,n=o.length;for(i=0;t-n>i;i++)o="0"+o;return o},SSPlayerController.prototype._getContainerSize=function(){this.currentComponentSet.width=this.currentComponentSet.container.width(),this.currentComponentSet.height=this.currentComponentSet.container.height()},SSPlayerController.prototype.setDimensions=function(e,t){var i=this.currentComponentSet;if(this._getContainerSize(),e=e||!1,i.viewHeight=i.height,this.hasToolbar&&(i.viewHeight-=this.TOOLBAR_HEIGHT),i.slidedisplayer.setDimensions({width:i.width,height:i.viewHeight,partial:e}),!e){var o={height:i.viewHeight,width:i.width},n=this.currentComponentSet;$.each(["toolbar","videobar","leadcta","shareScreen","lastScreen"],function(e,i){n[i]&&"function"==typeof n[i].setDimensions&&n[i].setDimensions(o,t)})}},SSPlayerController.prototype.getSpecialSettingsForVideo=function(){var e=navigator.userAgent.toLowerCase(),t=(/mozilla/.test(e)&&!/(compatible|webkit|trident)/.test(e),/msie/.test(e)&&!/opera/.test(e)&&document.documentMode&&document.documentMode<8),i={ieLT8:t},o=!1;return"video"===this.config.player_type?t&&this.isEmbedAndIE()&&(o=!0):o=!1,i.defaultToolbar=o,i},SSPlayerController.prototype.repaint=function(e){var t=navigator.userAgent.toLowerCase(),i=/msie/.test(t)&&!/opera/.test(t);if(!(void 0===this.currentComponentSet.slidedisplayer||"video"===this.config.player_type&&i&&this.currentComponentSet.videobar.fullscreen)){if(this.setDimensions(!0),this.setDimensions(!1,e),this._repaintPrerenderedSlides(),this.config.has_video){var o=this;setTimeout(function(){o.resizeVideoEmbeds()},250)}this.config.show_image_player||this.currentComponentSet.slidedisplayer._scrollTo(this.currentPosition)}},SSPlayerController.prototype._repaintPrerenderedSlides=function(){var e,t=this.currentComponentSet.slidedisplayer.prerenderedSlides;if(t&&t.length>0){var i;for(i=0;i<t.length;i++)e=t[i],this.slides[e].show(!0)}},SSPlayerController.prototype.updateCurrentPosition=function(e){if(this.slides&&void 0!==this.slides[e]){if(this.config.show_image_player&&(this.currentComponentSet.slidedisplayer.currentPosition=e),"video"===this.config.player_type)return;var t=this.currentComponentSet.toolbar;t&&t.updateCurrentPosition(e),this.multimediaResource,this.currentPosition=e,this.slides[e].painted=!0,t.updateProgressBar()}},SSPlayerController.prototype.displayLastScreen=function(){var e=this;if("video"!==this.config.player_type||!this.currentComponentSet.videobar.fullscreen){"undefined"==typeof this.currentComponentSet.lastScreen&&(this.config.is_only_private||this.config.disable_lastscreen&&!this.config.showProLastScreen||this.config.show_replay_screen?this.currentComponentSet.lastScreen=new SSReplayScreen({renderTo:this.currentComponentSet.container,settings:this.config.replayscreen}):("undefined"==typeof this.currentComponentSet.lastScreen&&(this.currentComponentSet.lastScreen=this._getShareScreen()),this.currentComponentSet.lastScreen=this.currentComponentSet.shareScreen),$(this.currentComponentSet.lastScreen).bind("gotofirstslide",function(){$(e).trigger("gotofirstslide")}));var t=this.currentComponentSet;t.viewHeight=t.height,this.hasToolbar&&(t.viewHeight-=this.TOOLBAR_HEIGHT),this.currentComponentSet.lastScreen.show({width:t.width,height:t.viewHeight},this._isFullScreen(this.currentViewMode)),this.currentComponentSet.lastScreen.isProLastScreen?$.slideshareEventManager.trackEvent("proLastscreen_shown"):$.slideshareEventManager.trackEvent("lastscreen_shown")}},SSPlayerController.prototype.hideLastScreen=function(){this.currentComponentSet.lastScreen&&this.currentComponentSet.lastScreen.isVisible&&this.currentComponentSet.lastScreen.hide()},SSPlayerController.prototype.hideShareScreen=function(){this.currentComponentSet.shareScreen&&this.currentComponentSet.shareScreen.isVisible&&this.currentComponentSet.shareScreen.hide()},SSPlayerController.prototype.displayShareScreen=function(e){var t=e.gaCategory;t||(t="lastscreen_v1_"),$.slideshareEventManager.trackEvent(t+"share_cta_click"),this._getShareScreen(),this.currentComponentSet.shareScreen.showShareScreen({width:this.currentComponentSet.width,height:this.currentComponentSet.viewHeight,customizations:e.customizations}),this.currentComponentSet.shareScreen.modalShare?this.currentComponentSet.shareScreen.modalShare.gaCategory=t:this.currentComponentSet.shareScreen.modalShare=new PlayerModalShare({btnShare:".action-btns-container .action-btn.share",parentEl:".lastScreenContainer .lastScreen",el:".lastScreenContainer .lastScreen .modal-share",gaCategory:t,authorId:this.config.author_id,isEmbed:this.isEmbed},this.currentComponentSet.shareScreen),this.currentComponentSet.shareScreen.modalShare.updateEmbed()},SSPlayerController.prototype.updateEmbedSizes=function(){var e=this.config.embed_sizes,t=this.slideAspectRatio;if("infographic"===this.config.player_type&&e&&t){for(var i in e.presets)e.presets.hasOwnProperty(i)&&(preset=e.presets[i],preset.size.height=parseInt(preset.size.width*t+49,10));this.currentComponentSet&&this.currentComponentSet.shareScreen&&this.currentComponentSet.shareScreen.populateEmbedSizes()}},SSPlayerController.prototype._getShareScreen=function(){return"undefined"==typeof this.currentComponentSet.shareScreen&&(this.currentComponentSet.shareScreen=new SSLastScreen({renderTo:this.currentComponentSet.container,settings:this.config.lastscreen,slideshowId:this.config.id,embed_code:this.config.embed_code,iframe_url:this.config.iframe_url,iframe_code:this.config.iframe_code,embed_sizes:this.config.embed_sizes,wp_code:this.config.wp_code,lastScreenClass:this.config.lastScreenClass,disableRelated:this.config.disable_lastscreen,disableShare:this.config.disable_share,shareOptions:this.config.shareoptions,hostedIn:this.config.hosted_in,totalSlides:this.slideCount})),this.currentComponentSet.shareScreen},SSPlayerController.prototype.loadFonts=function(e){"html"===this.mode&&this.disableLoadingFonts!==!0&&"initialized"===this.fontResources[e].status&&this.fontResources[e].load()},SSPlayerController.prototype.getPrerenderSlideIndices=function(e,t){var i=e-this.PRERENDER_COUNT;1>i&&(i=1);var o=e+this.PRERENDER_COUNT;return o>this.slideCount&&(o=this.slideCount),[i,o]},SSPlayerController.prototype._load=function(e,t){var i=navigator.userAgent.toLowerCase(),o=/msie/.test(i)&&!/opera/.test(i);if("video"!==this.config.player_type){e=e||this.config.start_slide;var n,r,s=this;if(this.loadFonts(Math.ceil(e/this.FONT_BATCH_COUNT)),!t){var a=this.getPrerenderSlideIndices(e,t),l=a[0],d=a[1];for(n=l;d>=n;n++)this.config.show_image_player&&this.slides[n].render(),this.slides[n].show(),this.loadedSlides[n]=!0;if((o||"function"==typeof isIos&&isIos())&&"undefined"==typeof new_mobile_player){var c,h=this.currentComponentSet.slidedisplayer.prerenderedSlides;if(h)for(n=0;n<h.length;n++)c=h[n],(l>c||c>d)&&(r=this.slides[c],r.hide());this.currentComponentSet.slidedisplayer.prerenderedSlides=[]}this.currentComponentSet.slidedisplayer.setPrerenderedSlides({start:l,end:d})}if(!this.config.disable_eagerload||e!==this.config.start_slide){var p=this.preloadAnchorIndex;this.preloadAnchorIndex=e;var u=function(){s.preloadSlides()};this.config.preload_after_pageload&&!this.pageLoadFired?p||$(window).bind("load",u):(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=setTimeout(u,2e3))}}},SSPlayerController.prototype.preloadSlides=function(){if(this.preloadAnchorIndex){var e=this.PRELOAD_PRE_LIMIT+this.PRELOAD_POST_LIMIT+1,t=this.preloadAnchorIndex-this.PRELOAD_PRE_LIMIT;1>t&&(t=1);var o=t+e-1;o>this.slideCount&&(o=this.slideCount);var n=Math.ceil(t/this.FONT_BATCH_COUNT),r=Math.ceil(o/this.FONT_BATCH_COUNT);for(i=n;i<=r;i++)this.loadFonts(i);for(i=t;i<=o;i++)this.loadedSlides[i]||(slide=this.slides[i],this.config.show_image_player&&slide.render(),slide.load(),this.loadedSlides[i]=!0);delete this.preloadAnchorIndex}},SSPlayerController.prototype.preloadMoreIfIdle=function(e){if(!this.config.disable_eagerload){var t=this.loadingSlides,i=t.indexOf(e);if(i>-1&&t.splice(i,1),!this.preloadAnchorIndex&&t.length<2){var o=this.loadedSlides.length+1;if(o>this.realSlideCount)return;var n=this;setTimeout(function(){n._load(o,!0)},0)}}},SSPlayerController.prototype.play=function(e,t,i,o){if(!this.initialized)return void(this.playQueue=e||1);if(void 0===e&&("undefined"!=typeof this.playQueue?(e=this.playQueue,delete this.playQueue):e=1),1>e&&(e=1),e>this.slideCount&&(e=this.slideCount),this.currentPosition!==e||t){if("video"===this.config.player_type)return void this.currentComponentSet.slidedisplayer.start();o&&o.updateBamboo&&this.config.bambooleaf_enabled&&this.updateBambooProperties({index:e}),$.slideshareEventManager.trigger("slidechanged",{index:e,force:t,source:i})}},SSPlayerController.prototype.updateBambooProperties=function(e){var t,i=e.index<this.slideCount?e.index+1:1,o=e.index>1?e.index-1:1;for(t in this.componentSets){var n=this.componentSets[t];n&&n.toolbar&&n.toolbar.updateBamboo({nextInd:i,prevInd:o,nextHref:this.config.rel_slide_urls[i-1],prevHref:this.config.rel_slide_urls[o-1],nextTitle:this.config.slide_titles[i-1],prevTitle:this.config.slide_titles[o-1]})}},SSPlayerController.prototype._enableVideoReloading=function(){var e=this.slides;for(var t in e)e.hasOwnProperty(t)&&e[t]&&"ytube_video"===e[t].config.slideMode&&e[t].emptySlide()},SSPlayerController.prototype.switchNativeView=function(e){if("nativefullscreen"===e){var t=this.currentComponentSet.container;t.length&&this.nativeFullScreen.request(t[0])}else this.nativeFullScreen.cancel();void 0===this.componentSets[e]&&(this.componentSets[e]=this.componentSets[this.currentViewMode]),this.currentComponentSet=this.componentSets[e],this.currentViewMode=e,this.currentComponentSet.slidedisplayer.emptySlides(),this.configureComponentsForNativeMode(e),this._setModeForSlides(e),this._load(this.currentPosition),this.updateCurrentPosition(this.currentPosition)},SSPlayerController.prototype._nativeFullScreenHandler=function(e,t){var i=this;this.nativeFullScreen.isFullScreen()?this.currentViewMode="nativefullscreen":$.slideshareEventManager.trigger("leavefullscreen"),window.setTimeout(function(){i.repaint.call(i)},500)},SSPlayerController.prototype.nativeFullScreen={request:function(e){if(document.webkitFullscreenEnabled){var t=/safari/.test(navigator.userAgent.toLowerCase())&&!/chrome/.test(navigator.userAgent.toLowerCase());Element&&Element.ALLOW_KEYBOARD_INPUT&&!t?e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.webkitRequestFullScreen()}else document.mozFullScreenEnabled&&e.mozRequestFullScreen()},cancel:function(){document.webkitFullscreenEnabled?document.webkitCancelFullScreen():document.mozFullScreenEnabled&&document.mozCancelFullScreen()},fullScreenChangeEventName:function(){return document.webkitFullscreenEnabled?"webkitfullscreenchange":document.mozFullScreenEnabled?"mozfullscreenchange":void 0},isFullScreen:function(){return document.webkitIsFullScreen||document.mozFullScreen}},SSPlayerController.prototype._isNativeFullScreenSupported=function(){var e=navigator.userAgent.toLowerCase(),t=(navigator.appName.toLowerCase(),document.webkitFullscreenEnabled||document.mozFullScreenEnabled),i=/chrome/.test(e)||/firefox/.test(e)||/safari/.test(e);return t&&i},SSPlayerController.prototype.leaveFullScreen=function(){if(this.currentComponentSet.container.removeClass("fullscreen"),this.currentComponentSet.videobar&&(this.disableLeadForFullscreenVideo(!1),this.currentComponentSet.slidedisplayer.adjustSpinnerPosition(!1)),this.currentComponentSet.lastscreen&&this.currentComponentSet.lastscreen.hide(),"nativefullscreen"===this.currentViewMode&&this.isNativeFullScreenSupported)this.switchNativeView("normal");else if(isIEAllVersion)try{window.close()}catch(e){}else"video"===this.config.player_type?this.returnFromFullscreenForVideo():this.config.inpage_full_screen&&this.switchView("normal")},SSPlayerController.prototype.switchToFullScreen=function(){"video"===this.config.player_type?(this.currentComponentSet.container.addClass("fullscreen"),this.goHtmlFullscreenForVideo()):this.config.inpage_full_screen&&(this.currentComponentSet.container.addClass("fullscreen"),this.switchView("fullscreen"))},SSPlayerController.prototype.switchView=function(e){return this.config.show_image_player?("fullscreen"===e?(this.currentViewMode="nativefullscreen",this.currentComponentSet.container.addClass("non-native-fullscreen")):"normal"===e&&(this.currentViewMode="normal",this.currentComponentSet.container.removeClass("non-native-fullscreen"),this.switchNativeView(this.currentViewMode)),this.configureComponentsForNativeMode(e),this.repaint(),void $(window).trigger("resize")):void(e!==this.currentViewMode&&(this.config.has_video&&(this._enableVideoReloading(),$("[id*=ytube_player]").remove()),this._deactivateComponentSet(this.currentViewMode),void 0===this.componentSets[e]&&this._createComponentSet(e),this._activateComponentSet(e),this._setModeForSlides(e),this.setDimensions(),this.play(this.currentPosition,!0),this._load(this.currentPosition),this.updateCurrentPosition(this.currentPosition)))},SSPlayerController.prototype._activateComponentSet=function(e){var t=this.componentSets[e],i=t.navigators;this.currentComponentSet=t,this.currentViewMode=e,$.each(i,function(e,t){t.activate()}),"fullscreen"===e||this.config.is_fullscreen?($(document).bind("keyup",this.exitFullScreenHandler),$(window).scrollTop(0)):($(document).unbind("keyup",this.exitFullScreenHandler),this.normalModeScrollPosition&&$(window).scrollTop(this.normalModeScrollPosition))},SSPlayerController.prototype.exitFullScreenHandlerFactory=function(){return function(e){if(27===e.keyCode)try{$.slideshareEventManager.trigger("leavefullscreen")}catch(t){}}},SSPlayerController.prototype._deactivateComponentSet=function(e){var t=this.componentSets[e],i=t.navigators;$.each(i,function(e,t){t.deactivate()}),"fullscreen"===e&&this._destroyComponentSet("fullscreen"),this.currentComponentSet=null,this.currentViewMode=null},SSPlayerController.prototype._setModeForSlides=function(e){"video"!==this.config.player_type&&this.currentComponentSet.slidedisplayer.start({slides:this.slides,mode:e,playerBgColor:this._getPlayerBgColor(e)}),this.currentComponentSet.slidedisplayer._bindEvents()},SSPlayerController.prototype.getFullScreenUrl=function(){return this.config.fullscreen_url?this.config.fullscreen_url+"/"+this.currentPosition:document.location},SSPlayerController.prototype.generateErrorDom=function(e,t){var i=e+"_"+t.width+"_"+t.height,o=this.cachedDomElements[i];if(void 0===o){var n=t.width,r=t.height,s=r/3;s=s>n/4?n/4:s;var a=parseInt(s/20,10),l=14,d="document"===this.config.player_type?4:2,c=(r-s)/d,h=n/25,p=s-l;o=$(this.config[e]),o.css({height:r-c,padding:c+"px "+l+"px 0"});var u=o.children("div");u.css({"-moz-border-radius":a,"-webkit-border-radius":a,"-o-border-radius":a,"-ms-border-radius":a,"border-radius":a,height:s}),u.children("img").css({margin:l/2,height:p,width:p}),u.children("div").css({left:p+l,padding:l+"px 0 0 "+l/2+"px","font-size":h}),this.cachedDomElements[i]=o}return $(o).clone()},SSPlayerController.prototype.disableLeadForFullscreenVideo=function(e){this.currentComponentSet.videobar.fullscreen=e,this.currentComponentSet.leadForm&&(e?this.currentComponentSet.leadForm.hideCta():this.currentComponentSet.leadForm.checkLeadFilledForAuthor()||this.currentComponentSet.leadForm.showCta())},SSPlayerController.prototype.goHtmlFullscreenForVideo=function(){this.currentComponentSet.slidedisplayer.container.addClass("inPageFullscreen");var e=this.multimediaResource.videoPlayer,t=$(e.getContainer()),i=$(t.parent());this.normalPosition=t.css("position"),this.normalZindex=t.css("z-index"),this.normalLeft=t.css("left"),this.normalTop=t.css("top"),this.normalPlayerWidth=i.width(),this.normalPlayerHeight=i.height(),this.toolbarPaddingLeft=parseInt($(".toolbar").css("padding-left"),10),this.toolbarPadingRight=parseInt($(".toolbar").css("padding-right"),10),this.fullscreenHeight=$(window).height()-this.TOOLBAR_HEIGHT,this.fullscreenWidth=$(window).width();var o=this;i.css({position:"fixed",width:"100%",height:"100%",left:0,top:0,"z-index":this.VIDEO_FULLSCREEN_ZINDEX}),e.resize(this.fullscreenWidth,this.fullscreenHeight),this.normalPlayerContainer=this.currentComponentSet.container,this.currentComponentSet.container=i,$(this.currentComponentSet.toolbar.container).css({"z-index":this.VIDEO_FULLSCREEN_ZINDEX,width:o.fullscreenWidth-(o.toolbarPaddingLeft+o.toolbarPadingRight),position:"fixed",left:0,bottom:0}),$(this.currentComponentSet.toolbar.volumeControl.container).css({"z-index":this.VIDEO_FULLSCREEN_ZINDEX,position:"fixed",bottom:0}),$(this.currentComponentSet.videobar.container).css({"z-index":this.VIDEO_FULLSCREEN_ZINDEX,width:"100%",position:"relative",left:0,bottom:0}),this.currentComponentSet.videobar.setDimensions({height:o.fullscreenHeight,width:o.fullscreenWidth,fullscreen:!0});var n=this.currentComponentSet.toolbar.getElements();n.fullScreen.hide(),n.leaveFullScreen.show(),e.fullscreen=!0,setTimeout(function(){"PLAYING"===e.getState()&&e.play(!0)},this.VIDEO_REINITIALISE_TIME),this.currentViewMode="fullscreen"},SSPlayerController.prototype.returnFromFullscreenForVideo=function(){this.currentComponentSet.slidedisplayer.container.removeClass("inPageFullscreen");var e=this.multimediaResource.videoPlayer,t=$(e.getContainer()),i=$(t.parent()),o=this;i.css({position:"relative",height:o.normalPlayerHeight,width:o.normalPlayerWidth,"z-index":o.normalZindex,left:o.normalLeft,top:o.normalTop}),e.resize(this.normalPlayerWidth,this.normalPlayerHeight),this.currentComponentSet.container=this.normalPlayerContainer;var n=this.currentComponentSet.toolbar.getElements();n.leaveFullScreen.hide(),n.fullScreen.show();var r=$(this.currentComponentSet.toolbar.container);r.css({position:"relative",height:o.TOOLBAR_HEIGHT,width:o.normalPlayerWidth-(o.toolbarPaddingLeft+o.toolbarPadingRight),"z-index":o.normalZindex,left:o.normalLeft,top:o.normalTop,bottom:0}),$(this.currentComponentSet.toolbar.volumeControl.container).css({position:"relative","z-index":o.normalZindex}),$(this.currentComponentSet.videobar.container).css({position:"relative",height:o.MULTIMEDIABAR_HEIGHT,width:o.normalPlayerWidth,"z-index":o.normalZindex}),this.currentComponentSet.videobar.setDimensions({height:this.normalPlayerHeight,width:this.normalPlayerWidth}),e.fullscreen=!1,setTimeout(function(){"PLAYING"===e.getState()&&e.play(!0)},this.VIDEO_REINITIALISE_TIME),this.currentViewMode="normal"},SSPlayerController.prototype.isEmbedAndIE=function(){return isIEAllVersion&&"slideview"!==this.config.hosted_in},SSPlayerController.prototype.deactivateToolbar=function(){this.currentComponentSet.toolbar.deactivate()},SSPlayerController.prototype.activateToolbar=function(){this.currentComponentSet.toolbar.activate()},SSPlayerController.prototype.isToolbarActive=function(){return this.currentComponentSet.toolbar.active},SSPlayerController.prototype.resizeVideoEmbeds=function(){if(this.currentComponentSet&&this.currentComponentSet.slidedisplayer&&this.currentComponentSet.slidedisplayer.container){var e=this.currentComponentSet.slidedisplayer.container,t=e.find(".ytube-container");t.length>0&&t.height(e.height())}},SSPlayerController.prototype.isValidNextSlideshowExperiment=function(){return this.config.next_prev_experiment&&"presentation"===this.config.player_type&&!this.currentComponentSet.leadForm.exists()},SSPlayerController.prototype.showNextSlideshowCTA=function(){var e=this;if(this.isValidNextSlideshowExperiment()&&$(".j-related-item a:visible").length&&!$(".j-next-container").is(":visible")){var t=$(".j-related-item a:visible").first(),i={id:t.data("ssid")||"0",thumb:t.find("img").attr("src")||"",title:t.attr("title")||"",url:t.attr("href")||"#",views:t.find(".j-related-views").html()||"0 views"};this.config.nextSlideshow=i;var o=this.currentComponentSet.container,n=o.find(".j-next-container"),r=n.find(".j-timer-count"),s=2,a=function(){0===s&&(clearInterval(e.countDown),$.slideshareEventManager.trackEvent("next_slideshow_cta_loaded"),e.goToNextSlideshow()),s>=0&&(r.html(s),s--)};n.find(".j-next-url").on("click",function(){$.slideshareEventManager.trackEvent("next_slideshow_cta_loaded"),e.goToNextSlideshow()}),n.find(".j-next-cancel").on("click",function(){e.hideNextSlideshowCTA()}),$(".ssActions .j-tooltip").bind("click.cancel_next_slideshow",function(){e.hideNextSlideshowCTA()}),n.length&&(n.find(".j-next-thumb").attr({alt:i.title,src:i.thumb}),n.find(".j-next-title").html(i.title),n.find(".j-next-views").html(i.views),r.html(s+1),n.addClass("active"),this.countDown=setInterval(a,1e3),$.slideshareEventManager.trackEvent("next_slideshow_cta_opened"),$(document).bind("keyup.next_slideshow",$.proxy(e.nextSlideshowKeypressHandler,e)))}},SSPlayerController.prototype.nextSlideshowKeypressHandler=function(e){27===e.keyCode&&this.hideNextSlideshowCTA(),13===e.keyCode&&($.slideshareEventManager.trackEvent("next_slideshow_cta_loaded"),this.goToNextSlideshow())},SSPlayerController.prototype.goToNextSlideshow=function(){$.slideshareEventManager.trigger("updateNextSlideshowCookie",this.config.nextSlideshow.id),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var e=this.config.next_slideshow_pos?parseInt(this.config.next_slideshow_pos,10)+1:1,t=window.location.origin+this.config.nextSlideshow.url+"?next_slideshow="+e;window.location.href=t},SSPlayerController.prototype.hideNextSlideshowCTA=function(){if($(".j-next-container").is(":visible")){$.slideshareEventManager.trackEvent("next_slideshow_cta_closed"),clearInterval(this.countDown);var e=this.currentComponentSet.container,t=e.find(".j-next-container");t.removeClass("active"),$(document).unbind("keyup.next_slideshow"),$(".ssActions .j-tooltip").unbind("click.cancel_next_slideshow"),t.find(".j-next-url, .j-next-cancel").unbind("click")}},SSPlayerController.prototype.updateProgressBar=function(){if(0!==this.$slidesLoadedBar.length){var e=this.currentPosition/this.slideCount*100;this.$slidesLoadedBar.width(e+"%")}},window.Modernizr=function(e,t,i){function o(e,t){for(var o in e)if(f[e[o]]!==i)return"pfx"==t?e[o]:!0;return!1}function n(e,t){return typeof e===t}function r(e){f.cssText=e}var s,a,l,d="2.0.6",c={},h=t.documentElement,p=(t.head||t.getElementsByTagName("head")[0],"modernizr"),u=t.createElement(p),f=u.style,g=(Object.prototype.toString," -webkit- -moz- -o- -ms- -khtml- ".split(" ")),m={},S=[],v=function(e,i,o,n){var r,s,a,l=t.createElement("div");if(parseInt(o,10))for(;o--;)a=t.createElement("div"),a.id=n?n[o]:p+(o+1),l.appendChild(a);return r=["&shy;","<style>",e,"</style>"].join(""),l.id=p,l.innerHTML+=r,h.appendChild(l),s=i(l,e),l.parentNode.removeChild(l),!!s},b={}.hasOwnProperty;l=n(b,i)||n(b.call,i)?function(e,t){return t in e&&n(e.constructor.prototype[t],i)}:function(e,t){return b.call(e,t)},function(i,o){var n=i.join(""),r=o.length;v(n,function(i,o){for(var n=t.styleSheets[t.styleSheets.length-1],s=(n.cssRules&&n.cssRules[0]?n.cssRules[0].cssText:n.cssText||"",i.childNodes),a={};r--;)a[s[r].id]=s[r];c.touch="ontouchstart"in e||9===a.touch.offsetTop},r,o)}([,["@media (",g.join("touch-enabled),("),p,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]),m.touch=function(){return c.touch},m.csstransforms=function(){return!!o(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};for(var y in m)l(m,y)&&(a=y.toLowerCase(),c[a]=m[y](),S.push((c[a]?"":"no-")+a));return r(""),u=s=null,c._version=d,c._prefixes=g,c.testProp=function(e){return o([e])},c.testStyles=v,c}(this,this.document);var isMobile=function(){var e=navigator.userAgent.match(/iPhone|iPad|iPod|Android|BlackBerry|IEMobile|webOS|Mobile|Windows Phone/i);return e},isIEAllVersion=function(){var e=navigator.userAgent.toLowerCase(),t=navigator.appName.toLowerCase();return/msie/.test(e)&&!/opera/.test(e)||/trident/.test(e)&&"netscape"===t}();Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var o=0;if(arguments.length>0&&(o=Number(arguments[1]),o!=o?o=0:0!=o&&o!=1/0&&o!=-(1/0)&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=i)return-1;for(var n=o>=0?o:Math.max(i-Math.abs(o),0);i>n;n++)if(n in t&&t[n]===e)return n;return-1}),SSPlayer.prototype._init=function(){var e=isMobile();this.config.touch=e&&(Modernizr.touch||"Windows Phone"==e)&&!cookie("nomobile"),$.slideshareEventManager.registerPlayer(this),"undefined"!=typeof new_mobile_player?this.controller=new MobileNewPlayerController(this.config):this.controller=new SSPlayerController(this.config),this.$playerContainer=$(this.config.container);var t=this,i=function(){if(t.config.show_image_player){var o=$(".stage"),n=$("#svPlayerId"),r=$(".slide_container");if("presentation"===t.config.player_type||"webinar"===t.config.player_type){var s=t.controller.currentPosition,a="ytube_video"===t.controller.slides[s].config.slideMode;if(o.css("height","auto"),o.css("max-height","none"),o.css("line-height","normal"),o.removeClass("valign-first-slide"),a){if("undefined"==typeof t.referenceSlideIndex)for(var l=t.controller.slides,d=1;d<=l.length;d++){var c=l[d];if("ytube_video"!==c.config.slideMode){t.referenceSlideIndex=c.index;break}}t.controller.currentComponentSet.slidedisplayer._scrollTo(t.referenceSlideIndex)}var h;h="slideview"===t.config.hosted_in&&"normal"===t.controller.currentViewMode?r.find(".slide_image").height():"slideview"!==t.config.hosted_in&&"embed"!==t.config.hosted_in||"nativefullscreen"!==t.controller.currentViewMode?"embed"===t.config.hosted_in&&"normal"===t.controller.currentViewMode?window.innerHeight-$(".toolbar").height():o.height():window.innerHeight;var p=$.map(n.find(".j-player-toolbar"),function(e){return $(e).height()}).reduce(function(e,t){return e+t},0),u=$(".j-clips-toolbar"),f=u.is(":visible")?u.height():0,g=$(".embed_player .stage");g.length&&($(".embed_player .stage").css("top",f),h-=f),o.css("height",h),o.css("max-height",h),o.css("line-height",h+"px");var m=100;"slideview"!==t.config.hosted_in||t.setMinHeight||(o.css("min-height",m),n.css("min-height",m+p),t.setMinHeight=!0),t.controller.setDimensions(!1,t.config.touch),a&&(t.controller.currentComponentSet.slidedisplayer._scrollTo(s),t.controller.resizeVideoEmbeds());var S="#"+t.controller.config.container,v=$(S+" .slide").eq(s-1).children(".slide_image");if("undefined"!=typeof v&&"undefined"!=typeof v[0]){var b=o.width()/o.height(),y=v.naturalWidth()/v.naturalHeight();b>y?(r.removeClass("wide_img"),r.addClass("tall_img")):(r.removeClass("tall_img"),r.addClass("wide_img"))}}}else $.slideshareEventManager.trigger("repaint",{mobile:t.config.touch});e&&"document"===t.config.player_type&&($(window).unbind("resize",i),setTimeout(function(){$(window).bind("resize",i)},1e3))};"undefined"==typeof new_mobile_player&&$(window).bind("load resize",i);
},SSPlayer.prototype.play=function(e){e=e||1,this.controller.play(e)},SSPlayer.prototype.goToSlide=function(e){$.slideshareEventManager.trigger("gotoslide",e)},SSPlayer.prototype.gotoCurrent=function(){this.controller.play(this.controller.currentPosition,!0)},function(e){function t(){this._trackingUtils=new n,this._appId=this._trackingUtils.getAppId(r),this._eventBodyDefaults={requestHeader:{pageKey:this._trackingUtils.getPageKey(),path:e.document.location.pathname}},this._impressionQueue=[],this.lastLinkImpressionInfo={}}var i=e.slideshare_object,o=i.utils,n=i.utils.imports("tracking.TrackingUtils"),r="leads",s={SlideShareLinkImpressionEvent:"SlideShareLinkImpressionEvent",SlideShareLinkClickEvent:"SlideShareLinkClickEvent"},a={SlideIndex:"data-slideIndex",LinkIndex:"data-linkIndex"};t.prototype={constructor:t,LINK_TYPE:{Organic:"ORGANIC",OverlaidCTA:"OVERLAID_CTA"},registerLinksMetadata:function(e){this.linksMetadata=e,this.flushImpressionQueue()},trackLinkImpressionEvent:function(e,t,o){var n,r,a,l,d=this,c=this._trackingUtils.getUrn("Slideshow",i.slideshow.id);return e&&t?(l={slideshowUrn:c,url:e,linkType:t},o&&(l.slideNumber=o),n=d._trackingUtils.generateTrackingID(),r={slideShareGuestUrn:d._trackingUtils.getSlideShareGuest(),impressionId:n,linkInfo:l},a=$.extend({},d._eventBodyDefaults,r),d._trackingUtils.recordTrackingEvent(d._appId,s.SlideShareLinkImpressionEvent,a),n):void 0},trackLinkClickEvent:function(e){e&&(eventBodyExtras={impressionId:e},eventBody=$.extend({},this._eventBodyDefaults,eventBodyExtras),this._trackingUtils.recordTrackingEvent(this._appId,s.SlideShareLinkClickEvent,eventBody))},trackOrganicLinkImpressionEventsForSlide:function(e){e&&this._areLinksEnabledOnSlide(e)&&(this.linksMetadata?(this.flushImpressionQueue(),this._trackOrganicLinkImpressionEvent(e)):this._impressionQueue.push(e))},trackOrganicLinkClickEvent:function(e){var t,i,o,n,r;if(this.linksMetadata&&(this.flushImpressionQueue(),e)){if(t=e.getAttribute(a.SlideIndex),i=e.getAttribute(a.LinkIndex),!(t&&i&&this.linksMetadata[t]&&this.linksMetadata[t].links[i]))return;o=this.linksMetadata[t].links[i],n={impressionId:o.impressionId},r=$.extend({},this._eventBodyDefaults,n),this._trackingUtils.recordTrackingEvent(this._appId,s.SlideShareLinkClickEvent,r)}},_trackOrganicLinkImpressionEvent:function(e){var t,o,n,r,a,l=this,d=this._trackingUtils.getUrn("Slideshow",i.slideshow.id),c=this.LINK_TYPE.Organic;this.linksMetadata&&(t=this.linksMetadata[e],t&&t.links&&(t=t.links,t.forEach(function(t){a={slideshowUrn:d,url:t.url,slideNumber:e,displayRectangle:l._getLinkDisplayRectangle(t.box),linkType:c},l._isDuplicateImpression(a)||(o=l._trackingUtils.generateTrackingID(),t.impressionId=o,n={slideShareGuestUrn:l._trackingUtils.getSlideShareGuest(),impressionId:o,linkInfo:a},r=$.extend({},l._eventBodyDefaults,n),l._trackingUtils.recordTrackingEvent(l._appId,s.SlideShareLinkImpressionEvent,r),l.lastLinkImpressionInfo=a)})))},flushImpressionQueue:function(){var e=this;this._impressionQueue.forEach(function(t){e._trackOrganicLinkImpressionEvent(t)}),this._impressionQueue=[]},_areLinksEnabledOnSlide:function(e){return this.renderAllLinks||"undefined"!=typeof i&&i.user.su?!0:e&&!(3>=e)},_getLinkDisplayRectangle:function(e){var t=parseInt(e[0]||0,10),i=parseInt(e[3]||0,10),o=parseInt(e[2]||0,10),n=parseInt(e[1]||0,10);return{top:i,left:t,size:{height:n-i,width:o-t}}},_isDuplicateImpression:function(e){var t=this.lastLinkImpressionInfo;return JSON.stringify(t)===JSON.stringify(e)}},o.exports("tracking.ClickGenTracker",t)}(window),!function(e){for(var t,i=["Width","Height"];t=i.pop();)!function(t,i){e.fn[t]=t in new Image?function(){return this[0][t]}:function(){var e,t,o=this[0];return"img"===o.tagName.toLowerCase()&&(e=new Image,e.src=o.src,t=e[i]),t}}("natural"+t,t.toLowerCase())}(jQuery),function(e){e.fn.rwdImageMaps=function(){var t=this,i=parseFloat(e.fn.jquery),o=function(){t.each(function(){if("undefined"!=typeof e(this).attr("usemap")){var t=this,o=e(t);e("<img />").load(function(){var n,r,s="width",a="height";if(1.6>i?(n=t.getAttribute(s),r=t.getAttribute(a)):(n=o.attr(s),r=o.attr(a)),!n||!r){var l=new Image;l.src=o.attr("src"),n||(n=l.width),r||(r=l.height)}var d=o.width()/100,c=o.height()/100,h=o.attr("usemap").replace("#",""),p="coords";e('map[name="'+h+'"]').find("area").each(function(){var t=e(this);t.data(p)||t.data(p,t.attr(p));for(var i=t.data(p).split(","),o=new Array(i.length),s=0;s<o.length;++s)s%2===0?o[s]=parseInt(i[s]/n*100*d):o[s]=parseInt(i[s]/r*100*c);t.attr(p,o.toString())})}).attr("src",o.attr("src"))}})};return e(window).resize(o).trigger("resize"),this}}(jQuery),SSResource.prototype._init=function(){this._initResourceConfig(),this.status="initialized"},SSResource.prototype.reset=function(){if(this.status="initialized",this.retries=0,this.suffixes){var e,t;for(e in this.suffixes)t=this.suffixes[e],t.status="initialized",delete t.startTime,t.retries=2}},SSResource.prototype.load=function(){this.status="loading",this.loadBlocked||(this.startTime=(new Date).getTime(),this._tryLoad())},SSResource.prototype.update=function(e){var t,i;for(t in e)i=e[t],"image"===this.resourceKey&&"sizes"===t?this.delayedInitialize&&this.delayedInitialize(i):"image"===this.resourceKey&&"linkData"===t?this.addLinks(i):this[t]=i},SSResource.prototype.resourceErrorInternalHandler=function(){var e=this;return function(t){var i=e.startTime,o=(new Date).getTime()-i,n=e.retries;n>0&&o<e.TIMEOUT_LIMIT?(n-=1,e.update({retries:n}),setTimeout(function(){e._tryLoad()},e.RETRY_WAIT_TIME)):$.slideshareEventManager.trigger("resourceloadfailed",{index:e.config.slideIndex,resourceKey:e.resourceKey})}},SSSlide.prototype.setContentDimensions=function(e,t){this.contentWidth=e,this.contentHeight=t},SSSlide.prototype._init=function(){this.status="initialized",this.controller=$.slideshareEventManager.getController(),this.playerContainer="#"+this.controller.config.container,this.$stage=$(this.playerContainer+" .stage"),this.$slide=this.$stage.find(".slide").eq(this.index-1),this.$imageEle=this.$slide.children(".slide_image"),this.viewModes={},this.resources={},this._createResources(),this._bindEvents()},SSSlide.prototype.stop=function(){},SSSlide.prototype._createResources=function(){switch("undefined"==typeof this.config.timestamp&&(this.config.timestamp=(new Date).getTime()),this.config.slideMode){case"image":var e={};this.resources.image=new SSFallbackImageResource({baseUrl:this.config.bucketLocation,timestamp:this.config.timestamp,resourceKey:"image",indexGenerator:this.config.indexGenerator,playerWidth:this.config.playerWidth,slideIndex:this.index,realIndex:this.realIndex,is_private:this.config.is_private,signatures:e,availableSizes:this.config.availableSizes,contentWidth:this.contentWidth,privateImageSignatures:this.config.privateImageSignatures,conversionVersion:this.config.conversionVersion,isFullscreen:this.isFullscreen(),show_image_player:this.config.show_image_player});break;case"html":this.resources.image=new SSBgImageResource({baseUrl:this.config.bucketLocation,availableSizes:this.config.availableSizes,timestamp:this.config.timestamp,resourceKey:"image",indexGenerator:this.config.indexGenerator,playerWidth:this.config.playerWidth,slideIndex:this.index,realIndex:this.realIndex,is_private:this.config.is_private,contentWidth:this.contentWidth,conversionVersion:this.config.conversionVersion,privateImageSignatures:this.config.privateImageSignatures}),this.resources.html=new SSHtmlResource({baseUrl:this.config.bucketLocation,timestamp:this.config.timestamp,resourceKey:"html",indexGenerator:this.config.indexGenerator,slideIndex:this.index,realIndex:this.realIndex,is_private:this.config.is_private,conversionVersion:this.config.conversionVersion,signature:this.config.htmlResourceSignature})}delete this.config.availableSizes},SSSlide.prototype.reset=function(){this.status="initialized";var e;for(e in this.resources)resource=this.resources[e].reset()},SSSlide.prototype.load=function(){if("cached"===this.status)return this._getNewResourceVersions(this.currentViewMode.wrapperWidth),void $.slideshareEventManager.trigger("slideloaded",{index:this.index});if("loading"===this.status)return void $.slideshareEventManager.trigger("slideloading",{index:this.index});if("failed"===this.status)return void $.slideshareEventManager.trigger("slideloadfailed",{index:this.index});this.status="loading",$.slideshareEventManager.trigger("slideloading",{index:this.index});var e;for(e in this.resources)resource=this.resources[e],resource.status="loading",resource.load()},SSSlide.prototype.updateResource=function(e,t){"undefined"!=typeof this.resources[e]&&this.resources[e].update(t)},SSSlide.prototype.displayError=function(e,t){this.empty(),e.appendTo(this.currentViewMode.wrapper);var i=this,o=e.find("input");t?o.hide():o.bind("click",function(e){e.preventDefault(),e.stopPropagation(),i.reset(),i.load()})},SSSlide.prototype.paint=function(){if("undefined"==typeof this.currentViewMode.imageElement&&this.render(),this.currentViewMode.imageElement.css({width:this.currentViewMode.width}),"html"===this.config.slideMode){var e;e=Modernizr.csstransforms?{"-moz-transform":"scale("+this.currentViewMode.contentScale+")","-webkit-transform":"scale("+this.currentViewMode.contentScale+")","-o-transform":"scale("+this.currentViewMode.contentScale+")",msTransform:"scale("+this.currentViewMode.contentScale+")","-moz-transform-origin":"0 0","-webkit-transform-origin":"0 0","-o-transform-origin":"0 0",msTransformOrigin:"0 0"}:{zoom:this.currentViewMode.contentScale},this.currentViewMode.contentElement.css({width:this.currentViewMode.width,height:this.currentViewMode.height}),this.currentViewMode.contentElement.children(".ssml_div").css(e),this.areLinksEnabled()||this.currentViewMode.contentElement.find(".ssml_a").remove()}else"image"===this.config.slideMode&&this.config.show_image_player!==!0&&this._updateLinks()},SSSlide.prototype.isFullscreen=function(){return"fullscreen"===this.currentMode||"nativefullscreen"===this.currentMode},SSSlide.prototype.render=function(){this.empty();var e,t,i=this;switch($.slideshareEventManager.getCurrentPosition(),"#"+i.controller.config.container,this.config.slideMode){case"html":e=$("<img/>").css({height:"auto",position:"absolute",top:0,left:0,margin:0,padding:0}),t=this.resources.image.getContent();break;case"image":e=this.$imageEle,t=this.isFullscreen()||this.$stage.width()>640?this.$imageEle.data("full"):this.$stage.width()<=320?this.$imageEle.data("small"):this.$imageEle.data("normal")}if("undefined"!=typeof t){this.imageEle=e,this.currentViewMode.imageElement=e;var o=new Image;o.onload=function(){if("undefined"!=typeof n&&"undefined"!=typeof _gaq){var e=new Date-n;_gaq.push(["_trackTiming","image","slide_load",e,i.index.toString()])}var o=i.controller.currentPosition,r=i.$slide.height(),s=i.$stage.scrollTop();if(i.$slide.css("min-height",0),"undefined"==typeof i.controller.firstLoad?i.controller.firstLoad=!0:i.controller.firstLoad=!1,i.currentViewMode.imageElement.attr({src:t}),i.$slide.find(".fa-spinner").remove(),"infographic"===i.config.playerType&&i.addScrollIfNeeded(),"document"===i.config.playerType){var a=i.$slide.height()-r;i.controller.firstLoad&&!isMobile()&&i.controller.currentComponentSet.slidedisplayer.$slides&&(i.controller.currentComponentSet.slidedisplayer.$slides.css("min-height",i.$slide.height()),s+=a*(o-2)),i.index<o&&i.$stage.scrollTop(s+a)}$(window).trigger("resize");var l=function(){i.loadLinks()};if(i.config.show_image_player&&("complete"===document.readyState?l():window.addEventListener?window.addEventListener("load",l,!1):window.attachEvent&&window.attachEvent("onload",l)),"function"==typeof isIos&&isIos()&&$(this).css("-webkit-backface-visibility","hidden"),"slideview"===i.config.hosted_in&&!i.config.show_image_player){var d=$(this).height();$(this).css("height","auto");var c=$(this).height();if(d!==c&&!window.slideResizeEventFired){window.slideResizeEventFired=!0;var h=i.config.ssid,p="00",u=/slide-(\d+)-.*/;u.test(this.src)&&(p=this.src.match(u)[1]);var f=h+"_slide_"+p;$.slideshareEventManager.trackRawEvent("jsplayer_debug","slideresize",f)}$(this).css("height","auto")}},o.src=t;var n=new Date;if(this.config.show_image_player||e.appendTo(this.currentViewMode.wrapper),"html"===this.config.slideMode){var r="<style>"+this.resources.html.getContent().style+"</style>";$(r).appendTo(this.currentViewMode.wrapper),this.currentViewMode.contentElement=$("<div/>").css({position:"absolute",overflow:"hidden"}).html(this.resources.html.getContent().html),this.currentViewMode.contentElement.appendTo(this.currentViewMode.wrapper)}}},SSSlide.prototype.addScrollIfNeeded=function(){var e=15;this.$imageEle.height()>this.$slide.height()+e&&this.$slide.css("overflow-y","auto")},SSSlide.prototype.areLinksEnabled=function(){return this.config.is_render_all_links||"undefined"!=typeof slideshare_object&&slideshare_object.user.su?!0:-1===$.inArray(this.index,[1,2,3])},SSSlide.prototype.loadLinks=function(){var e=this;return e.controller.linksLoaded===!0?void this.renderLinksForSlide():void $.jsonp({url:e.config.bucketLocation+"/meta.js?"+this.config.timestamp,callback:"slideshare_jsonp_meta_hook_trigger",cache:!0,timeout:1e4,success:function(t){e.controller.links=t.links,e.controller.linksLoaded=!0,e.controller.clickGenTracker.registerLinksMetadata(t.links),e.renderLinksForSlide(),e.controller.slideAspectRatio=t.sizes[1].height/t.sizes[1].width,e.controller.updateEmbedSizes()}})},SSSlide.prototype.renderLinksForSlide=function(){if(this.areLinksEnabled()){var e=this,t="#"+e.controller.config.container,i=this.index-this.config.linkOffset;if("undefined"==typeof e.controller.links||"undefined"==typeof e.controller.links[i])return;var o,n,r,s=this.imageEle,a=s.naturalWidth(),l=s.naturalHeight(),d=e.controller.links[i].links,c=d.length,h="image_map_"+this.index+"_"+(new Date).getTime();void 0!==this.currentViewMode.imageMapId&&$("#"+this.currentViewMode.imageMapId).remove(),this.currentViewMode.imageMapId=h;var p='<map id="'+h+'" name="'+h+'">';for(o=0;c>o;o++){n=d[o],r=[parseInt((n.box[0]||0)*a/100,10),parseInt((n.box[3]||0)*l/100,10),parseInt((n.box[2]||0)*a/100,10),parseInt((n.box[1]||0)*l/100,10)],r=r.join(",");var u='<area shape="rect" target="_blank" coords="'+r+'" href="'+n.url+'" rel="nofollow" data-linkIndex="'+o+'" data-slideIndex="'+this.index+'" />';p+=u}p+="</map>";var f=$(p).appendTo(t+" .image_maps");s.attr("usemap","#"+h),$(document).ready(function(){s.rwdImageMaps()}),f.find("area").click(function(e){var t=e.target;$.slideshareEventManager.trackOutboundClick(t)})}},SSSlide.prototype._updateLinks=function(){void 0!==this.currentViewMode.imageMapId&&$("#"+this.currentViewMode.imageMapId).remove(),this._renderLinks()},SSSlide.prototype._renderLinks=function(){var e=this.resources.image.links;if(void 0!==e){var t,i,o,n=this.currentViewMode.width,r=this.currentViewMode.height,s=e.length,a="image_map_"+this.currentMode+"_"+this.index+parseInt(2500*Math.random(),10),l='<map id="'+a+'" name="'+a+'">';for(t=0;s>t;t++)i=e[t],o=[parseInt((i.box[0]||0)*n/100,10),parseInt((i.box[3]||0)*r/100,10),parseInt((i.box[2]||0)*n/100,10),parseInt((i.box[1]||0)*r/100,10)],o=o.join(","),l=l+'<area shape="rect" coords="'+o+'" href="'+i.url+'" rel="nofollow" />';l+="</map>",$(l).appendTo(this.currentViewMode.wrapper),this.currentViewMode.imageElement.attr("usemap","#"+a),this.currentViewMode.imageMapId=a}},SSSlide.prototype._getNewResourceVersions=function(){this.resources.image._tryLoad(this.currentViewMode.wrapperWidth)},SSSlide.prototype.updateRenderedResourceVersion=function(e){this.currentViewMode.rendered&&"image"===e&&void 0!==this.currentViewMode.imageElement&&this.currentViewMode.imageElement.attr({src:this.resources.image.getContent()})},SSSlide.prototype._bindEvents=function(){},SSFontResource.prototype=new SSResource,SSFontResource.prototype._initResourceConfig=function(){var e=this.resourceTemplate;this.url=e.prefix+"meta-"+this.config.indexString+this.config.suffix+"?"+this.config.timestamp,this.cacheable=e.cacheable,this.retries=e.retries||0,this.isCritical=e.isCritical},SSFontResource.prototype._tryLoad=function(){$.jsonp({url:this.url,callback:"slideshare_jsonp_font_hook_trigger",success:this.resourceLoadedInternalHandler(),error:this.resourceErrorInternalHandler(),cache:!0,timeout:1e4})},SSFontResource.prototype.resourceLoadedInternalHandler=function(){var e=this;return function(t){e.status="cached",$.slideshareEventManager.trigger("fontresourceloaded",{style:t.style})}},SSFontResource.prototype.resourceErrorInternalHandler=function(){var e=this;return function(t){var i=e.startTime,o=(new Date).getTime()-i,n=e.retries;n>0&&o<e.TIMEOUT_LIMIT?(n-=1,e.update({retries:n}),setTimeout(function(){e._tryLoad()},1e3)):$.slideshareEventManager.trigger("fontloadfailed",{})}},SSHtmlResource.prototype=new SSResource,SSHtmlResource.prototype.ready=function(){this._initResourceConfig(),this.loadBlocked=!1,"loading"===this.status&&this.load()},SSHtmlResource.prototype._initResourceConfig=function(){if(!this.config.is_private||void 0!==this.config.signature){var e=this.resourceTemplate,t=this.config.indexGenerator(this.config.realIndex,e.digitLength);this.config.is_private?this.url=e.prefix+e.key+t+".js"+this.config.signature:this.url=e.prefix+e.key+t+e.suffix,this.cacheable=e.cacheable,this.retries=e.retries||0,this.isCritical=e.isCritical}},SSHtmlResource.prototype.updateSignature=function(e){this.config.signature=e},SSHtmlResource.prototype._tryLoad=function(){$.jsonp({url:this.url,callback:"slideshare_jsonp_hook_trigger",success:this.resourceLoadedInternalHandler(),error:this.resourceErrorInternalHandler(),cache:!0,timeout:1e4})},SSHtmlResource.prototype.resourceLoadedInternalHandler=function(){var e=this;return function(t){var i=t.style.replace(/a\.ssml_a \{.*?\}/,"").replace(/\.ssml_div span \{.*?\}/,"").replace(/\.ps([\s\S]*?)\{[\s\S]*?\}/g,"").replace(/@font-face[\s\S]*?\{[\s\S]*?\}/g,"");e.html=t.html,e.style=i,$.slideshareEventManager.trigger("resourceloaded",{index:e.config.slideIndex,resourceKey:e.resourceKey})}},SSHtmlResource.prototype.getContent=function(){return{html:this.html,style:this.style}},SSImageResource.prototype=new SSResource,SSImageResource.prototype._initResourceConfig=function(){if(void 0!==this.imageVersions){var e=this.resourceTemplate;this.indexString=this.config.indexGenerator(this.config.realIndex,e.digitLength),this.suffixes=this._getSuffixes(),this.cacheable=e.cacheable,this.retries=e.retries||0,this.isCritical=e.isCritical,this.privateUrls={}}},SSImageResource.prototype._getUrl=function(e){return e[e.length-1].url},SSImageResource.prototype._mapSizesToVersions=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&(t[parseInt(i,10)]=e[i]);return t},SSImageResource.prototype._setUrlGenerator=function(e){e?(this.useTimeStamp=!1,this._generateUrl=this._generatePrivateUrl):this._generateUrl=this._generateUrl},SSImageResource.prototype.delayedInitialize=function(e){this.imageVersions=this._mapSizesToVersions(e.availableSizes),this.contentWidth=e.contentWidth,this._setUrlGenerator(e.is_private),e.is_private||this.ready()},SSImageResource.prototype.ready=function(){this._initResourceConfig(),delete this.imageVersions,this.loadBlocked=!1,"loading"===this.status&&this.load()},SSImageResource.prototype._tryLoad=function(e){e=e||this.config.playerWidth;var t,i=this._getAppropriateWidth(e),o=this.suffixes[i];if(t=this._getUrl(o),i!==this.currentWidth||"initialized"===o.status){if("failed"===o.status)return void this.versionErrorInternalHandler(i,t)();if(this.currentWidth=i,"loading"!==o.status){if("loaded"===o.status)return void this.versionLoadedInternalHandler(i,t)();if(o.status="loading",void 0===o.startTime&&(o.startTime=(new Date).getTime()),this.config.show_image_player){var n=$(".slide").eq(this.config.realIndex-1).children();t=this.config.isFullScreen?n.data("full"):n.data("normal")}var r=new Image;$(r).bind("load",this.versionLoadedInternalHandler(i,t)).bind("error",this.versionErrorInternalHandler(i)),void 0!==t&&(r.src=t)}}},SSImageResource.prototype.versionLoadedInternalHandler=function(e,t){var i=this;return function(o){i.suffixes[e].status="loaded","loading"===i.status?(i.url=t,i.resourceLoadedInternalHandler()()):"cached"===i.status&&e===i.currentWidth&&(i.url=t,$.slideshareEventManager.trigger("currentversionloaded",{index:i.config.slideIndex,resourceKey:i.resourceKey}))}},SSImageResource.prototype.versionErrorInternalHandler=function(e){var t=this;return function(i){var o=t.suffixes[e],n=o.startTime,r=(new Date).getTime()-n,s=o.retries;if(s>0&&r<t.TIMEOUT_LIMIT)s-=1,o.retries=s,o.status="initialized",setTimeout(function(){t._tryLoad()},t.RETRY_WAIT_TIME);else if(o.status="failed","loading"===t.status&&e===t.currentWidth){var a,l=!1;for(a in t.suffixes){var d=t.suffixes[e];"loading"!==d.status&&"loaded"!=d.status||(l=!0)}l||t.resourceErrorInternalHandler()()}}},SSImageResource.prototype.resourceLoadedInternalHandler=function(){var e=this;return function(t){$.slideshareEventManager.trigger("resourceloaded",{index:e.config.slideIndex,resourceKey:e.resourceKey})}},SSImageResource.prototype.getContent=function(){var e=this.suffixes[this.currentWidth];if("loaded"===e.status)return this.url;var t;for(t in this.suffixes)if(e=this.suffixes[t],"loaded"===e.status)return url=this._getUrl(e),url;return this.url},SSImageResource.prototype._getAppropriateWidth=function(e){var t,i,o,n=this.suffixes,r=[],s=426,a=638;for(i in n)i=parseInt(i,10),n.hasOwnProperty(i)&&r.push(i);for(r.sort(function(e,t){return e-t}),s>e&&window.devicePixelRatio>=2&&(e=a),t=0;t<r.length;t++)if(i=r[t],o=i,i>=e)return i;return o},SSMetaResource.prototype=new SSResource,SSMetaResource.prototype._initResourceConfig=function(){var e=this.resourceTemplate;this.url=e.url+"?"+this.config.timestamp,this.cacheable=e.cacheable,this.retries=e.retries||0,this.isCritical=e.isCritical},SSMetaResource.prototype._tryLoad=function(){$.jsonp({url:this.url,callback:"slideshare_jsonp_meta_hook_trigger",success:this.resourceLoadedInternalHandler(),error:this.resourceErrorInternalHandler(),cache:!0,timeout:1e4})},SSMetaResource.prototype.resourceLoadedInternalHandler=function(){var e=this;return function(t){e.status="loaded",$.slideshareEventManager.trigger("metadataloaded",{type:e.config.type,json:t})}},SSMetaResource.prototype.resourceErrorInternalHandler=function(){var e=this;return function(t){var i=e.startTime,o=(new Date).getTime()-i,n=e.retries;n>0&&o<e.TIMEOUT_LIMIT?(n-=1,e.update({retries:n}),setTimeout(function(){e._tryLoad()},1e3)):$.slideshareEventManager.trigger("metadataloadfailed",{type:e.config.type})}},SSBgImageResource.prototype=new SSImageResource,SSBgImageResource.prototype._generateUrl=function(e,t,i){return this.config.baseUrl+"images/"+parseInt(i,10)+"/slide-"+e+"-"+t+".jpg?cb="+this.config.timestamp},SSBgImageResource.prototype._generatePrivateUrl=function(e,t,i){return this.config.baseUrl+"images%2F"+parseInt(i,10)+"%2Fslide-"+e+"-"+t+".jpg"+this.config.privateImageSignatures[t][i].url},SSBgImageResource.prototype._getSuffixes=function(){var e,t,i,o,n,r,s={},a=this.imageVersions;this.config.timestamp;for(t in a)if(a.hasOwnProperty(t))for(t=parseInt(t,10),i=a[t],s[t]=[],o=i.length,e=0;o>e;e++)n=parseInt(i[e],10),r={url:this._generateUrl(this.indexString,t,i[e]),status:"initialized",retries:2},s[t][isNaN(n)?75:n]=r;return s},SSFallbackImageResource.prototype=new SSImageResource,SSFallbackImageResource.prototype._generateUrl=function(e,t,i){return this.config.baseUrl+"/"+i+"/slide-"+e+"-"+t+".jpg?"+this.config.timestamp},SSFallbackImageResource.prototype._generatePrivateUrl=function(e,t,i){return"undefined"==typeof this.config.privateImageSignatures?"":this.config.baseUrl+"%2F"+i+"%2Fslide-"+e+"-"+t+".jpg"+this.config.privateImageSignatures[t][i].url},SSFallbackImageResource.prototype._getSuffixes=function(){var e,t,i,o,n,r,s=[],a=this.imageVersions;for(t in a)if(a.hasOwnProperty(t))for(t=parseInt(t,10),o=a[t],s[t]=[],r=o.length,e=0;r>e;e++)n=parseInt(o[e],10),i={url:this._generateUrl(this.indexString,t,n),status:"initialized",retries:2},s[t][n]=i;return s},SSFallbackImageResource.prototype.addLinks=function(e){this.links=e.links||[]},SSFallbackImageResource.prototype.addSignature=function(e){this.config.privateImageSignatures=e},SSBandInteraction.prototype._init=function(){var e=this,t=this.config.container,i=this.config.linksDisabled;t.bind("mousedown",function(o){if(1===o.which){var n=$(this).offset();e.startX=o.pageX-n.left,t.bind("mouseup",function(e){var o,n=e.target,r=n.tagName.toUpperCase();if(i?o=!1:"SPAN"===r&&"A"===n.parentNode.tagName.toUpperCase()?o=n.parentNode:"A"!==r&&"AREA"!==r||(o=n),o){var s=parseInt(o.attributes.href.value,10);isNaN(s)&&window.open(o.href),$.slideshareEventManager.trackOutboundClick(o)}t.unbind("mouseup")})}}),$(t).bind("click",function(e){e.preventDefault()}),$(this).bind("bandclick",function(t){t.preventDefault();var i=t.ssData.x,o=e.config.width/3;o>i?$(e).trigger("bandprevious"):i>2*o&&$(e).trigger("bandnext")});var o=$(".leftpoint");o.click(function(t){$(e).trigger("bandprevious")});var n=$(".rightpoint");n.click(function(t){$(e).trigger("bandnext")})},SSBandInteraction.prototype.activate=function(){$(this).bind("bandprevious",function(){$.slideshareEventManager.trigger("previous",{source:"band"})}),$(this).bind("bandnext",function(){$.slideshareEventManager.trigger("next",{source:"band"})})},SSBandInteraction.prototype.deactivate=function(){$(this).unbind("bandprevious"),$(this).unbind("bandnext")},SSBandInteraction.prototype.destroy=function(){},SSInfographicDisplayer.prototype=new SSSlideDisplayer,SSInfographicDisplayer.prototype.start=function(e){"undefined"==typeof this.slidesContainer&&(this.slidesContainer=$(".slide_container"),this.bindEvents()),this.config.playerBgColor&&(this.playerBgColor=this.config.playerBgColor),this.slides=e.slides,this.slide=this.slides[1],this.slideContainer=this.slidesContainer.children(".slide"),this.slide.setContainer({mode:e.mode,bgColor:this.playerBgColor,container:this.slideContainer})},SSInfographicDisplayer.prototype.bindEvents=function(){this.config.isMobileDevice||this.slidesContainer.bind("click",function(e){e.preventDefault(),e.stopPropagation(),$.slideshareEventManager.trigger("viewfullscreen")})},SSInfographicDisplayer.prototype.setDimensions=function(e){"object"==typeof e&&(this.config.width=e.width,this.config.height=e.height)},SSInfographicDisplayer.prototype.emptySlides=function(){},SSInfographicDisplayer.prototype.setPrerenderedSlides=function(){},SSInfographicDisplayer.prototype.showInitializer=function(){this.config.show_image_player||$("<div/>").addClass(".jsplInitializer").css({width:this.container.width()-10,height:this.container.height()-20}).html("Loading...").appendTo(this.container)},SSInfographicDisplayer.prototype._scrollTo=function(e){if(this.config.show_image_player){var t=this.slidesContainer.children();return t.removeClass("show"),void t.eq(e-1).addClass("show")}},SSInfographicSlide.prototype=new SSSlide,SSInfographicSlide.prototype.empty=function(){},SSInfographicSlide.prototype.setContainer=function(e){var t=e.mode;void 0===this.viewModes[t]&&(this.viewModes[t]={rendered:!1,bgColor:e.bgColor||"jsplBgColorBigfoot",container:e.container,wrapper:$("<div/>")}),this.viewModes[t].container.css({position:"relative"}),this.currentViewMode=this.viewModes[t],this.currentViewMode.wrapper.removeClass("hide"),this.currentMode=e.mode},SSInfographicSlide.prototype.show=function(e){this.currentViewMode.rendered&&!e||(this.currentViewMode.rendered=!0,this.load())},SSInfographicSlide.prototype.hide=function(){this.$slide.hide()},SSInfographicSlide.prototype.displayLoading=function(){},SSInfographicSlide.prototype.bindScrollEvents=function(){var e=this,t=$("#slideview-container");$(document).ready(function(){var i=parseInt($("#main-nav").height(),10)||51,o=8,n=0,r=550,s=550,a=$("#svPlayerId"),l=parseInt(a.css("height"),10);if(s>l)return void t.removeClass("infographicHoverTitle");var d=!0;setInterval(function(){d=!0},10),"infographic"===e.config.playerType&&$(window).on("scroll",function(e){if(d&&a&&a.offset()){d=!1;var s=a.offset().top-i,c=$(this).scrollTop(),h=l+s-r;c>h&&(c=h);var p=$.slideshareEventManager.getController(),u="nativefullscreen"===p.currentViewMode||"fullscreen"===p.currentViewMode;if(c>s&&!u){$(".action-btns-container").css("top",o+c-s+"px"),$(".modal-popup").css("top",n+c-s+"px");var f=$(this).scrollTop()+$(this).height()-a.height()-a.offset().top;t.toggleClass("infographicHoverTitle",0>=f)}else $(".action-btns-container").css("top",o+12+"px"),$(".modal-popup").css("top",n+"px")}})})},SSPresentationDisplayer.prototype=new SSSlideDisplayer,SSPresentationDisplayer.prototype.initPointlyFinger=function(){this.rightbandInteraction=$("<div/>").attr({"class":"rightpoint pointly"}).appendTo(this.container),this.leftbandInteraction=$("<div/>").attr({"class":"leftpoint pointly"}).appendTo(this.container)},SSPresentationDisplayer.prototype._scrollTo=function(e){if("playing"===this.state){if(this.config.show_image_player){var t=this.slidesContainer.children();return t.removeClass("show"),void t.eq(e-1).addClass("show")}var i="function"==typeof isIos&&isIos(),o=-1*this.slideOffsets[e],n=!1;n&&i?this.slidesContainer.css({"-webkit-transform":"translateX("+o+"px)","-webkit-transition":"-webkit-transform 275ms ease-in-out"}):this.slidesContainer.css("margin-left",o)}},SSPresentationDisplayer.prototype.start=function(e){var t,i;void 0===this.slideContainers&&(this.slideContainers=[]);var o=this.slideContainers;if(void 0===this.slides)for(this.slides=e.slides,this.state="playing",this.hideInitializer(),this.slidesContainer=this.config.show_image_player?$(".slide_container"):$("<div/>").appendTo(this.container),t=1;t<=this.config.slideCount;t++)o[t]=this.config.show_image_player?$(".slide").eq(t-1):$("<div/>").appendTo(this.slidesContainer);for(!this.config.show_image_player&&this.slidesContainer.removeClass(this.playerBgColor).addClass("slidesContainer "+e.playerBgColor),e.playerBgColor&&(this.slidesContainer.removeClass(this.playerBgColor),this.playerBgColor=e.playerBgColor,this.slidesContainer.addClass(this.playerBgColor)),t=1;t<=this.config.slideCount;t++)i=this.slides[t],i.setContainer({mode:e.mode,container:o[t],bgColor:this.playerBgColor,slideNumber:t})},SSPresentationDisplayer.prototype.showInitializer=function(){var e,t;e=this.container.height()/2-16,t=this.container.width()/2-16,$("<img/>").attr({src:this.config.spinnerUrl,"class":"jsplInitializer"}).css({width:32,height:32,top:e,left:t}).appendTo(this.container)},SSPresentationDisplayer.prototype.setDimensions=function(e){"object"==typeof e&&(this.config.width=e.width,this.config.height=e.height);var t=e&&e.partial;if(!this.config.show_image_player&&this.container.css({height:this.config.height,width:this.config.width}),!t&&"playing"===this.state){this.panelWidth=0;var i,o,n;for(n=0,i=1;i<=this.config.slideCount;i++)o=this.slides[i],!this.config.show_image_player&&o.setDimensions({parentHeight:this.config.height,parentWidth:this.config.width}),this.slideOffsets[i]=n,n+=o.wrapperOffset();this.slidesContainer.width(n),this.width=n}},SSPresentationDisplayer.prototype.setPrerenderedSlides=function(e){var t;for(t=e.start;t<=e.end;t++)-1===$.inArray(t,this.prerenderedSlides)&&this.prerenderedSlides.push(t)},SSPresentationDisplayer.prototype.emptySlides=function(){var e;for(e in this.slides){var t=this.slides;if(t.hasOwnProperty(e)){var i=t[e];i.hide()}}this.prerenderedSlides=[]},SSPresentationSlide.prototype=new SSSlide,SSPresentationSlide.prototype.wrapperOffset=function(){return this.currentViewMode.wrapperWidth},SSPresentationSlide.prototype.empty=function(){"undefined"!=typeof this.currentViewMode.wrapper&&this.currentViewMode.wrapper.empty()},SSPresentationSlide.prototype.displayLoading=function(){var e,t;e=this.currentViewMode.height/2-16,t=this.currentViewMode.width/2-16,this.empty(),this.spinnerUrl=this.isFullscreen()?this.config.spinnerUrlFullscreen:this.config.spinnerUrl,
$("<img/>").attr({src:this.spinnerUrl}).css({width:32,height:32,top:e,left:t,position:"absolute"}).appendTo(this.currentViewMode.wrapper)},SSPresentationSlide.prototype.setDimensions=function(e){var t,i,o,n,r=e.parentWidth,s=e.parentHeight,a=r/s;void 0===this.contentWidth||void 0===this.contentHeight?(t=r,i=s,o=a,n=o,$.slideshareEventManager.trackRawEvent("jsplayer_debug","no_content_meta_info","st_"+this.config.stripped_title)):(t=this.contentWidth,i=this.contentHeight,o=t/i,n=t/(i-20));var l,d,c,h,p,u,f;n>a?(d=r/t,c=16*d,h=r,l=a/o,f=0,u=(1-l)/2*100+"%",p=l*e.parentHeight):(d=s/i,c=16*d,l=o/a,u=0,f=(1-l)/2*100+"%",h=l*e.parentWidth,p=s),h=parseInt(h,10),p=parseInt(p,10);var g=r,m=s;this.currentViewMode.container.css({width:r,height:s}),!this.config.show_image_player&&this.currentViewMode.wrapper.css({width:h,height:p,top:u,left:f,position:"absolute",padding:this.PADDING,overflow:"hidden"}),this.currentViewMode.wrapperWidth=g,this.currentViewMode.wrapperHeight=m,this.currentViewMode.top=u,this.currentViewMode.left=f,this.currentViewMode.contentScale=d,this.currentViewMode.fontscale=c,this.currentViewMode.width=h,this.currentViewMode.height=p},SSPresentationSlide.prototype.hide=function(){this.currentViewMode.rendered&&(this.empty(),delete this.currentViewMode.contentElement,delete this.currentViewMode.imageElement,this.currentViewMode.rendered=!1)},SSPresentationSlide.prototype.show=function(e){this.currentViewMode.rendered&&!e||(this.currentViewMode.rendered=!0,this.load())},SSPresentationSlide.prototype.play=function(){this.show()},SSPresentationSlide.prototype.setContainer=function(e){var t=e.mode,i=this.viewModes[t],o=!1;this.config.isStartSlide&&this.config.show_image_player&&(o=!0);var n={rendered:o,container:e.container};if(void 0===i?(this.config.show_image_player||(n.wrapper=$("<div/>").appendTo(e.container)),i=n):"nativefullscreen"==t&&(this.config.show_image_player||(n.wrapper=this.currentViewMode.wrapper),i=n),!this.config.show_image_player){i.container.removeClass();var r=e.bgColor||"jsplBgColorBigfoot";r+="undefined"==typeof new_mobile_player?" horizontalStack":" verticalStack",i.container.addClass(r)}var s=e.slideNumber;s&&i.container.attr("slideNumber",s),this.viewModes[t]=i,this.currentViewMode=i,this.currentMode=e.mode},SSVideoEmbedSlide.prototype=new SSPresentationSlide,SSVideoEmbedSlide.prototype._initVideoSlidesLoading=function(){"function"!=typeof window.onYouTubePlayerAPIReady&&(window.onYouTubePlayerAPIReady=function(){$(window.video_slides||[]).each(function(e,t){t.playerReady=!0})}),window.video_slides||(window.video_slides=[]),window.video_slides.push(this)},SSVideoEmbedSlide.prototype._videoReady=function(e){this.ytube_player=e.target},SSVideoEmbedSlide.prototype._playVideo=function(){if(this.ytube_player.getPlayerState)this.ytube_player.getPlayerState()===this.PLAYER_UNINITIALIZED&&this.ytube_player.playVideo();else{var e=this;setTimeout(function(){e._playVideo()},1e3)}},SSVideoEmbedSlide.prototype._pauseVideo=function(){this.ytube_player&&this.ytube_player.pauseVideo&&this.ytube_player.pauseVideo()},SSVideoEmbedSlide.prototype._videoLoadFailed=function(e){$.slideshareEventManager.trigger("videoloadfailed")},SSVideoEmbedSlide.prototype._tryPlayerLoad=function(){var e=this,t="ytube_player"+e.config.current_video_count,i="100%";navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&(i="80%"),e.ytube_player||(e.ytube_player=new YT.Player(t,{videoId:e.config.video_id,playerVars:{autohide:e.PLAYER_AUTOHIDE,enablejsapi:e.ENABLE_JS_API,rel:e.RELATED_VIDEOS,origin:"http://www.slideshare.net",theme:"light"},width:i,height:"100%",events:{onReady:function(){var t=e;return function(e){t._videoReady(e)}}(),onError:e._videoLoadFailed}}))},SSVideoEmbedSlide.prototype.retryPlayerLoad=function(){if(clearTimeout(this.retrying),this.playerReady)this._tryPlayerLoad();else{var e=this;this.retrying=setTimeout(function(){e.retryPlayerLoad()},1e3)}},SSVideoEmbedSlide.prototype.removeLoading=function(){var e=this.currentViewMode.wrapper,t="#ytube_player"+this.config.current_video_count,i=".ytube_message";$(t,e).show(),$(i,e).remove()},SSVideoEmbedSlide.prototype.showLoading=function(){var e=this.currentViewMode.wrapper,t=this.config.loading_message_partial;$(t).appendTo(e),this.hideLoadingMessage=!0},SSVideoEmbedSlide.prototype.show=function(e){this.currentViewMode.rendered=!0,this.load(),this.painted&&this.showMessage()},SSVideoEmbedSlide.prototype.showMessage=function(){if(this.hideLoadingMessage)$("#ytube_player"+this.config.current_video_count).show();else{this.showLoading(),clearTimeout(this.removeLoadingTimeout);var e=this;(void 0===this.hideLoadingMessage||this.hideLoadingMessage)&&(this.removeLoadingTimeout=setTimeout(function(){e.removeLoading()},3e3))}},SSVideoEmbedSlide.prototype.emptySlide=function(){this.currentViewMode.contentElement=null,this.currentViewMode.rendered=!1,this.painted=!1,this.ytube_player=null},SSVideoEmbedSlide.prototype.stop=function(){this._pauseVideo()},SSVideoEmbedSlide.prototype.load=function(){$.slideshareEventManager.trigger("slideloaded",{index:this.index})},SSVideoEmbedSlide.prototype.paint=function(){var e="ytube_player"+this.config.current_video_count;this.config.show_image_player?0===this.$slide.find(".ytube-container").length&&(this.currentViewMode.contentElement=$("<div id="+e+"></div>").css({overflow:"hidden"}),this.currentViewMode.contentElement.appendTo($("<div/>").addClass("ytube-container").css({height:this.$stage.height()||this.contentHeight}).appendTo(this.$slide)),this.playerReady?this._tryPlayerLoad():this.retryPlayerLoad()):(this.currentViewMode.contentElement=$("<div id="+e+"></div>").css({position:"absolute",overflow:"hidden",display:"none"}),this.currentViewMode.contentElement.appendTo(this.currentViewMode.wrapper),this.playerReady?this._tryPlayerLoad():this.retryPlayerLoad())},SSVideoEmbedSlide.prototype._getNewResourceVersions=function(){},!function(e){function t(){var e,t;i.slideshareEventManager&&(this.$clickgenCTATop=i(d.clickgenCTATop),this.$clickgenCTA=this.$clickgenCTATop.find(d.clickgenCTA),this.clickgenTracker=r.controller.clickGenTracker,s.addClass(d.clickgenCTA,a),o.slideshow.is_clickgen_enabled&&l&&(this.$clickgenCTA.addClass(c.visible),t=r.controller.currentPosition,e=this.clickgenTracker.trackLinkImpressionEvent(o.slideshow.clickgen_url,this.clickgenTracker.LINK_TYPE.OverlaidCTA,t),this.impressionId=e,this.lastSlideWithImpression=t,this.bindEvents()))}var i=e.$,o=e.slideshare_object,n=o.utils.imports("Experiments"),r=i.slideshareEventManager,s=new n,a="slideview-clickgen-cta-2",l=s.is(a,"b"),d={clickgenCTATop:".clickgen-cta-top",clickgenCTA:".j-clickgen-cta",stage:".stage, .image_maps"},c={visible:"visible"};t.prototype={constructor:t,bindEvents:function(){this.$clickgenCTA.off("click").on("click",function(){this.impressionId&&(this.clickgenTracker.trackLinkClickEvent(this.impressionId),e.open(o.slideshow.clickgen_url,"_blank"),e.focus())}.bind(this)),i(d.stage).hover(function(){var e,t;this.$clickgenCTA.hasClass(c.visible)||(this.$clickgenCTA.addClass(c.visible),t=r.controller.currentPosition,t!=this.lastSlideWithImpression&&(e=this.clickgenTracker.trackLinkImpressionEvent(o.slideshow.clickgen_url,this.clickgenTracker.LINK_TYPE.OverlaidCTA,t),this.impressionId=e,this.lastSlideWithImpression=t))}.bind(this),function(){this.$clickgenCTA.removeClass(c.visible)}.bind(this)),r.player&&r.player.one("next previous gotoslide",function(){this.$clickgenCTA.removeClass(c.visible)}.bind(this))}},o.utils.exports("clickgen.ClickgenCTA",t)}(window),function(e){function t(){$.slideshareEventManager&&$.slideshareEventManager.controller?o=new i:$(document).on("slideshare-player-controller:init-done",function(){o=new i})}var i=e.slideshare_object.utils.imports("clickgen.ClickgenCTA"),o=null;t()}(window),Handlebars.registerPartial("svg-icon",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r=t.helperMissing,s="function",a=this.escapeExpression;return'<svg>\n  <use data-size="'+a((n=null!=(n=t.size||(null!=e?e.size:e))?n:r,typeof n===s?n.call(e,{name:"size",hash:{},data:o}):n))+'" xlink:href="#'+a((n=null!=(n=t.type||(null!=e?e.type:e))?n:r,typeof n===s?n.call(e,{name:"type",hash:{},data:o}):n))+'"></use>\n</svg>\n'},useData:!0})),Handlebars.registerPartial("clipboard-trio",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r=t.helperMissing,s="function",a=this.escapeExpression;return'<div class="container clearfix">\n  <div class="main left">\n    <a href="'+a((n=null!=(n=t.url||(null!=e?e.url:e))?n:r,typeof n===s?n.call(e,{name:"url",hash:{},data:o}):n))+'" class="main-image link-bg-img" data-original="'+a((n=null!=(n=t.mainImage||(null!=e?e.mainImage:e))?n:r,typeof n===s?n.call(e,{name:"mainImage",hash:{},data:o}):n))+'" alt="'+a((n=null!=(n=t.title||(null!=e?e.title:e))?n:r,typeof n===s?n.call(e,{name:"title",hash:{},data:o}):n))+'"/>\n  </div>\n  <div class="side">\n    <a href="'+a((n=null!=(n=t.url||(null!=e?e.url:e))?n:r,typeof n===s?n.call(e,{name:"url",hash:{},data:o}):n))+'" class="side-image link-bg-img" data-original="'+a((n=null!=(n=t.firstSideImage||(null!=e?e.firstSideImage:e))?n:r,typeof n===s?n.call(e,{name:"firstSideImage",hash:{},data:o}):n))+'" alt="'+a((n=null!=(n=t.title||(null!=e?e.title:e))?n:r,typeof n===s?n.call(e,{name:"title",hash:{},data:o}):n))+'"/>\n    <a href="'+a((n=null!=(n=t.url||(null!=e?e.url:e))?n:r,typeof n===s?n.call(e,{name:"url",hash:{},data:o}):n))+'" class="side-image link-bg-img" data-original="'+a((n=null!=(n=t.secSideImage||(null!=e?e.secSideImage:e))?n:r,typeof n===s?n.call(e,{name:"secSideImage",hash:{},data:o}):n))+'" alt="'+a((n=null!=(n=t.title||(null!=e?e.title:e))?n:r,typeof n===s?n.call(e,{name:"title",hash:{},data:o}):n))+'"/>\n  </div>\n</div>\n'},useData:!0})),slideshare_object.utils.exports("templates.clipping.top-clipboards-thumbnail",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r,s=t.helperMissing,a="function",l=this.escapeExpression,d=this.lambda;return'<li class="clipboard-thumbnail thumbnail">\n  <div class="thumbnail-content">\n'+(null!=(n=this.invokePartial(i["clipboard-trio"],e,{name:"clipboard-trio",hash:{secSideImage:null!=(n=null!=(n=null!=e?e.clips:e)?n[2]:n)?n.image_url:n,firstSideImage:null!=(n=null!=(n=null!=e?e.clips:e)?n[1]:n)?n.image_url:n,mainImage:null!=e?e.image_url:e,url:null!=e?e.url:e,title:null!=e?e.title:e},data:o,indent:"    ",helpers:t,partials:i}))?n:"")+'    <a class="clipboard-url" href="'+l((r=null!=(r=t.url||(null!=e?e.url:e))?r:s,typeof r===a?r.call(e,{name:"url",hash:{},data:o}):r))+'"><h5 class="title">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:o}):r))+'</h5></a>\n    <a class="author" href="'+l(d(null!=(n=null!=e?e.user:e)?n.url:n,e))+'">\n      <img alt="author" class="user-photo left" src="'+l(d(null!=(n=null!=e?e.user:e)?n.photo:n,e))+'">\n      <div class="user-name">'+l(d(null!=(n=null!=e?e.user:e)?n.return_name:n,e))+"</div>\n    </a>\n  </div>\n</li>\n"},usePartial:!0,useData:!0})),slideshare_object.utils.exports("templates.clipping.clipboards-dropdown-list-item",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r,s=t.helperMissing,a="function",l=this.escapeExpression;return'<li class="j-clipboard j-clipboard-item">\n    <button>\n      <span class="title left"> '+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:o}):r))+' </span>\n      <span class="svg-icon check right '+l((r=null!=(r=t.checkVisibility||(null!=e?e.checkVisibility:e))?r:s,typeof r===a?r.call(e,{name:"checkVisibility",hash:{},data:o}):r))+'">\n'+(null!=(n=this.invokePartial(i["svg-icon"],e,{name:"svg-icon",hash:{type:"check-icon",size:"small"},data:o,indent:"        ",helpers:t,partials:i}))?n:"")+"      </span>\n    </button>\n</li>\n"},usePartial:!0,useData:!0})),slideshare_object.utils.exports("templates.clipping.clipboards-list-item",Handlebars.template({1:function(e,t,i,o){return"clip-added"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r,s=t.helperMissing,a="function",l=this.escapeExpression;return'<li class="clipboard-list-item '+(null!=(n=t["if"].call(e,null!=e?e.checked:e,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+'">\n  <div class="clipboard-item-thumb" style="background-image: url(\''+l((r=null!=(r=t.clipboard_image_url||(null!=e?e.clipboard_image_url:e))?r:s,typeof r===a?r.call(e,{name:"clipboard_image_url",hash:{},data:o}):r))+'\');"></div>\n  <div class="clipboard-item-title">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:o}):r))+'\n    <span class="svg-icon check">\n'+(null!=(n=this.invokePartial(i["svg-icon"],e,{name:"svg-icon",hash:{type:"check-icon",size:"small"},data:o,indent:"      ",helpers:t,partials:i}))?n:"")+'    </span>\n  </div>\n  <button class="clipboard-item-select-btn art-deco small primary" type="button">'+l(this.lambda(null!=(n=null!=e?e.i18n:e)?n.select:n,e))+"</button>\n</li>\n"},usePartial:!0,useData:!0})),slideshare_object.utils.exports("templates.clipping.clipboards-list-item-default",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r,s=t.helperMissing,a="function",l=this.escapeExpression;return'<li class="clipboard-list-item clip-added">\n  <div class="clipboard-item-thumb" style="background-image: url(\''+l((r=null!=(r=t.clipboard_image_url||(null!=e?e.clipboard_image_url:e))?r:s,typeof r===a?r.call(e,{name:"clipboard_image_url",hash:{},data:o}):r))+'\');"></div>\n  <div class="clipboard-item-title">'+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:s,typeof r===a?r.call(e,{name:"title",hash:{},data:o}):r))+'</div>\n  <button class="clipboard-item-select-btn art-deco small tertiary" type="button" disabled>'+l(this.lambda(null!=(n=null!=e?e.i18n:e)?n.selected:n,e))+"</button>\n</li>\n"},useData:!0})),slideshare_object.utils.exports("templates.clipping.notice-prompt",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n;return'<div class="notice-prompt-container">\n  <div class="side-bar column small-1">\n    <div class="icon-container">\n      <div class="svg-icon">\n'+(null!=(n=this.invokePartial(i["svg-icon"],e,{name:"svg-icon",hash:{type:null!=e?e.svg_icon_type:e,size:"large"},data:o,indent:"        ",helpers:t,partials:i}))?n:"")+'      </div>\n    </div>\n  </div>\n  <div class="content-bar column small-11">\n    <div class="close-container clearfix">\n      <span class="close"></span>\n    </div>\n    <div class="content">\n    </div>\n  </div>\n</div>\n'},usePartial:!0,useData:!0})),slideshare_object.utils.exports("templates.clipping.success-toast",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,o){var n,r=this.lambda,s=this.escapeExpression;return'<a href="'+s(r(null!=(n=null!=e?e.clipboard:e)?n.url:n,e))+'">\n  <span class="slide-thumb" style="background-image: url(\''+s(r(null!=(n=null!=e?e.clip:e)?n.thumbnail:n,e))+'\');"></span>\n</a>\n<p class="details">\n  Slide '+s(r(null!=(n=null!=e?e.clip:e)?n.position:n,e))+' clipped to: <br />\n  <a class="clipboard-title" title="'+s(r(null!=(n=null!=e?e.clipboard:e)?n.title:n,e))+'" href="'+s(r(null!=(n=null!=e?e.clipboard:e)?n.url:n,e))+'">'+s(r(null!=(n=null!=e?e.clipboard:e)?n.title:n,e))+'</a>\n</p>\n<div class="toast-actions">\n  <span class="change j-change-clipboard">'+s(r(null!=(n=null!=(n=null!=(n=null!=e?e.i18n:e)?n.clipping:n)?n.toast:n)?n.change_clipboard:n,e))+'</span>\n  <span class="share j-share-clip">\n    <i class="fa fa-fw fa-share"></i> '+s(r(null!=(n=null!=(n=null!=(n=null!=e?e.i18n:e)?n.clipping:n)?n.toast:n)?n.share_clip:n,e))+"\n  </span>\n</div>\n"},useData:!0})),function(e){var t=(window.encodeURIComponent,"LinkedIn"),i="Twitter",o="Facebook",n="GooglePlus",r="Pinterest",s={linkedin:t,twitter:i,facebook:o,googleplus:n,pinterest:r},a="https://www.linkedin.com/shareArticle",l="https://twitter.com/intent/tweet",d="https://www.facebook.com/sharer/sharer.php",c="https://plus.google.com/u/0/share",h="https://pinterest.com/pin/create/button/",p={SERVICE_LINKEDIN:t,SERVICE_TWITTER:i,SERVICE_FACEBOOK:o,SERVICE_GOOGLEPLUS:n,SERVICE_PINTEREST:r,getNormalizedServiceName:function(e){var t,i;if(!e)throw new Error("Undefined service name: "+e);return t=e.toLowerCase(),i=s[t],i&&(e=i),e},isSupportedService:function(e){return Object.keys(s).some(function(t){return s[t]===e})},generateLinkedInShareWindowUrl:function(e,t){var i={url:e};return t&&(t.title&&(i.title=t.title),t.description&&(i.summary=t.description)),a+"?"+$.param(i)},generateTwitterShareWindowUrl:function(e,t){var i={url:e};return t&&(t.description&&(i.text=t.description),t.via&&(i.via=t.via)),l+"?"+$.param(i)},generateFacebookShareWindowUrl:function(e){var t={u:e};return d+"?"+$.param(t)},generateGooglePlusShareWindowUrl:function(e){var t={url:e};return c+"?"+$.param(t)},generatePinterestShareWindowUrl:function(e,t){var i={url:e};return t&&(t.title&&(i.title=t.title),t.description&&(i.description=t.description),t.imageUrl&&(i.media=t.imageUrl)),h+"?"+$.param(i)},generateShareWindowUrl:function(e,t,i){var o="generate"+e+"ShareWindowUrl";return this[o](t,i)}};e.utils.exports("socialShareUtil",p)}(window.slideshare_object),function(e){var t,i=e.utils.imports("socialShareUtil"),o={strWindowFeatures:"width=550,height=380,scrollbars=yes,resizable=yes"};if(!i)throw new Error("SocialShareWindow dependency missing: SocialShareUtil");t=function(e){var e=$.extend({},o,e),t=e.url||window.location.href,n=i.getNormalizedServiceName(e.serviceType),r=e.title,s=e.description,a=e.imageUrl,l=e.strWindowFeatures,d=i.generateShareWindowUrl(n,t,{title:r,description:s,imageUrl:a});return{open:function(){if(!i.isSupportedService(n))throw new Error("Unsupported service: "+n);window.open(d,null,l)}}},e.utils.exports("SocialShareWindow",t)}(window.slideshare_object),function(e){function t(e){this.config=$.extend({},l,e),this.shareEntity=this.config.shareEntity,this.shareEntityType=this.config.shareEntityType,this.onClose=this.config.onClose,this.shareTypes=[],this._init()}var i=e.utils.imports("SocialShareWindow"),o=e.utils.imports("socialShareUtil"),n={email:"email",facebook:"facebook",twitter:"twitter",linkedin:"linkedin",googleplus:"googleplus"},r="clipboard",s="clip",a={clipShared:"clip:shared",clipboardShared:"clipboard:shared",beforeModalOpen:"open.fndtn.reveal",afterModalOpen:"opened.fndtn.reveal",afterModalClose:"closed.fndtn.reveal"},l={shareEntity:{},shareEntityType:r,onClose:$.noop},d={modalTitle:".j-modal-title",shareLinkInput:".j-share-link-url",socialNetworkList:".j-share-social-list",emailShareForm:".j-share-email-form",shareEmailSend:"#share-email-send",shareEmailForm:".j-share-email-form",shareEmailTo:".j-share-email-to",shareEmailName:".j-share-email-name",shareEmailMessage:".j-share-email-msg",shareEmailClear:".j-email-clear",shareEmailSent:".j-email-sent",shareEmailFlash:".j-email-flash"};t.prototype._init=function(){if(this.$el=$(this.config.el),this.$shareLinkInput=this.$el.find(d.shareLinkInput),this.$shareEmailSend=this.$el.find(d.shareEmailSend),this.$shareEmailForm=this.$el.find(d.shareEmailForm),this.$modalTitle=this.$el.find(d.modalTitle),!this.$el.length||$.isEmptyObject(this.shareEntity))throw new Error("Error initializing ShareModal");if(!i)throw new Error("ClipboardModalShare dependency missing: SocialShareWindow");this.gaTrackCategory=this.$el.data("ga-track-category"),this.gaTrackAction=this.$el.data("ga-track-action"),this._updateView(),this._attachEventListeners()},t.prototype._updateView=function(){var t=this.config.modalTitle;t&&this.$modalTitle.text(t),this.$shareLinkInput.val(this.shareEntity.url),e&&e.utils.isUserAuthenticated()&&this.$el.find(d.shareEmailName).val(e.user.login)},t.prototype._attachEventListeners=function(){this.$el.on(a.afterModalClose,this._onClosed.bind(this)),this.$el.on("click",d.socialNetworkList,this._onSocialNetworkClick.bind(this)),this.$el.on("click",d.shareLinkInput,function(e){$(e.target).select()}),this.$el.on("submit",d.emailShareForm,this._onEmailShareSubmit.bind(this))},t.prototype._detachEventListeners=function(){this.$el.off()},t.prototype._onSocialNetworkClick=function(e){var t,a,l,d,c=$(e.target),h=c.data("network"),p="Make your own by #clipping the best @SlideShare slides.",u="Share your own by #clipping the best @SlideShare slides.";h&&(this.shareTypes.push(n[h]),a={url:this.shareEntity.url,serviceType:h},o.getNormalizedServiceName(h)==o.SERVICE_TWITTER&&(this.shareEntityType===r?l="See "+this.shareEntityType+' "'+this.shareEntity.title+'". '+p:this.shareEntityType===s?(t=this.shareEntity.description.charAt(0).toLowerCase()+this.shareEntity.description.slice(1),l="See "+t+". "+u):l=p,a.description=l),d=new i(a),d.open())},t.prototype._clearEmailErrorAlerts=function(){this.$el.find(".error").removeClass("error")},t.prototype._clearEmailFields=function(){this.$el.find(d.shareEmailClear).val(""),this.$shareEmailSend.prop("disabled",!1),this._clearEmailErrorAlerts()},t.prototype._onEmailShareSubmit=function(e){e.preventDefault();var t=this,i=this.$el.find(d.shareEmailTo).val(),o=this.$el.find(d.shareEmailName).val(),r=this.$el.find(d.shareEmailMessage).val(),s=!1;t.$shareEmailSend.val("Sending").addClass("sending").prop("disabled",!0),t._clearEmailErrorAlerts(),s||(s=!0,$.ajax({url:"/clipboards/email_share",type:"POST",dataType:"json",data:{id:this.shareEntity.id,name:o,recipients:i,message:r,entity:this.shareEntityType},success:function(e){if(0===e.response_code)t.shareTypes.push(n.email),t._clearEmailFields(),t.$shareEmailForm.slideUp(400),t.$el.find(d.shareEmailSent).slideDown(400),setTimeout(function(){t.$el.find(d.shareEmailSent).slideUp(400),t.$shareEmailForm.slideDown(400)},2e3);else{var i=t.$el.find(d.shareEmailFlash);switch(i.text(e.response).show(),e.response_code){case 1:t.$el.find(d.shareEmailTo).addClass("error");break;case 2:t.$el.find(d.shareEmailName).addClass("error")}setTimeout(function(){i.fadeOut(400)},5e3)}},complete:function(){s=!1,t.$shareEmailSend.val("Send").removeClass("sending").prop("disabled",!1)}}))},t.prototype._onClosed=function(){this._detachEventListeners(),this._trackEvents(),this.onClose({shareEntity:this.shareEntity,shareEntityType:this.shareEntityType,shareTypes:this.shareTypes})},t.prototype._trackEvents=function(){var e,t;this.shareEntityType===s?(e=a.clipShared,t={clip:this.shareEntity}):this.shareEntityType===r&&(e=a.clipboardShared,t={clipboard:this.shareEntity}),e&&t&&this.shareTypes.forEach(function(i){$(document).trigger(e,$.extend(t,{shareType:i}))})},t.prototype.close=function(){this.$el.foundation("reveal","close")},t.prototype.open=function(){this.$el.foundation("reveal","open"),this.shareTypes=[]},e.utils.exports("ClipboardModalShare",t)}(window.slideshare_object),function(e,t){var i=e.utils,o={onClose:t.noop,onHide:t.noop},n={close:".close"},r="notice-prompt",s=function(e){return e.toString()+"px"},a=function(e){var i;return this.config=t.extend(o,e),this.$el=t(this.config.selector||n.container),(i=this._getInstance(this.$el))?i:void this._init()};a.prototype={constructor:a,_getInstance:function(e){return e.data(r)},_init:function(){this.$el.data(r,this),this.timeouts={hide:null},this.$close=t(n.close),this._attachEventListeners()},_attachEventListeners:function(){this.$el.on("click",n.close,function(){this.hide(),this.config.onClose.call()}.bind(this))},show:function(){var e=this.$el;1!==e.css("opacity")&&(e.css("opacity",0).removeClass("hide").addClass("show").css("right","-"+s(this.width())),e.animate({right:"+="+this.width(),opacity:1}))},hide:function(){this.$el.animate({right:"-"+this.width(),opacity:0},function(){this.$el.removeClass("show").addClass("hide")}.bind(this)),this.config.onHide.call()},width:function(){return this.width=this.width||this.$el.width(),this.width}},i.exports("NoticePrompt",a)}(window.slideshare_object,jQuery),function(e){var t=e.slideshare_object.utils.imports("Experiments"),i=new t;i.deleteExperiment("slideview-clip-button"),i.deleteExperiment("slideview-clip-button-exp-2"),i.deleteExperiment("slideview-clip-button-exp-3")}(window),function(e){function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.prototype["super"]=function(){t.apply(this,arguments)}}Handlebars.registerHelper("pluralize",function(e,t,i){return 1===e?t:i}),e.Clipboards={},e.Clipboards.config={},e.Clipboards.inherits=t}(window.slideshare_object),function(e){function t(){}var i=e.slideshare_object.utils,o="POST",n="GET",r="PUT",s="DELETE";t.prototype.addAnnotation=function(e,t,i){return this._ajax("/clipboards/"+e+"/clips/"+t+"/add_annotation",o,{annotation:i})},t.prototype.addClipToClipboard=function(e,t){return this._ajax("/clipboards/"+e+"/clips",o,t)},t.prototype.addClips=function(e,t){return this._ajax("/clipboards/"+e+"/clips/bulk",o,{ids:t})},t.prototype.reclipClips=function(e,t,i){return this._ajax("/clipboards/"+e+"/clips/bulk_reclip",o,{source_clipboard_id:t,ids:i})},t.prototype.clipboards=function(){return this._ajax("/clipboards",n)},t.prototype.createClipboard=function(e){return this._ajax("/clipboards",o,e)},t.prototype.deleteClip=function(e){return this._ajax("/clips/"+e,s)},t.prototype.deleteClipFromClipboard=function(e,t){return this._ajax("/clipboards/"+e+"/clips/"+t,s)},t.prototype.deleteClipsFromClipboard=function(e,t){return this._ajax("/clipboards/"+e+"/clips/bulk",s,{ids:t})},t.prototype.deleteClipboard=function(e){return this._ajax("/clipboards/"+e,s)},t.prototype.editClipboard=function(e,t){return this._ajax("/clipboards/"+e,r,t)},t.prototype.reorderClips=function(e,t){return this._ajax("/clipboards/"+e+"/clips/reorder",o,{clips_order:t})},t.prototype.topClipboards=function(e,t){return this._ajax("/clipboards/top",n,{slideshow_id:e,position:t})},t.prototype._ajax=function(e,t,i){return $.ajax({url:e,type:t,dataType:"json",contentType:"application/json",data:t===n?i:JSON.stringify(i)})},i.exports("clips.api",new t)}(window),function(e){function t(e,t,i){var o=s(t).data(f.clipboard),n=s(i).data(f.clipboard),r=o.title.toLowerCase(),a=n.title.toLowerCase(),l=r.indexOf(e),d=a.indexOf(e);return l!==d?l-d:a>r?-1:r>a?1:0}function i(e,t){return t=t||e.title}function o(e,t){var o=e.title,n=o.toLowerCase().indexOf(t),r=o.substring(0,n),a=o.substring(n,n+t.length),l=o.substring(n+t.length),d=s("<span>").addClass(c.searchHighlight).text(a);return i(e,r+d.get(0).outerHTML+l)}function n(){this._$events=s({}),this.api=l.imports("clips.api"),this.$el=s(p.dropdown),this.$clipboardList=this.$el.find(p.clipboardList),this.$searchInput=this.$el.find(p.searchInput),this.$createNew=this.$el.find(p.createNew),this.$createFormWrapper=this.$el.find(p.createFormWrapper),this.$createForm=this.$createFormWrapper.find(p.createForm),this.$createFormInput=this.$createFormWrapper.find(p.createFormInput),this.$createFormError=this.$createFormWrapper.find(p.createFormError),this.itemTemplate=l.imports(u.listItem),this.attachEventListeners()}var r=4,s=e.$,a=e.slideshare_object,l=a.utils,d=!!s.fn.foundation,c=(e.jSecure,{clipboardItem:"j-clipboard j-clipboard-item",searchHighlight:"search-highlight",bulk:"bulk"}),h={enter:13},p={searchInput:".j-clips-search",createForm:".j-create-form",createFormError:".j-create-form-error",createFormInput:".j-create-form-input",createFormWrapper:".j-create-form-wrapper",clipboardItem:".j-clipboard-item",clipboardList:".j-clipboard-names-dropdown",createNew:".j-create-new",dropdown:"#clipboard-names-dropdown"},u={listItem:"templates.clipping.clipboards-dropdown-list-item"},f={clipboard:"clipboard-to"},g={clipboardSelected:"clipboard:selected",clipboardCreated:"clipboard:created",bulkClipboardSelected:"clipboard:selected:bulk",bulkClipboardCreated:"clipboard:created:bulk"};n.prototype.attachEventListeners=function(){this.$el.on("input",p.searchInput,this.onSearchClipboards.bind(this)),this.$el.on("input",p.searchInput,this.clearCreateFormError.bind(this)),this.$el.on("input",p.createFormInput,this.clearCreateFormError.bind(this)),this.$el.on("keypress",p.searchInput,this.onSearchKeypress.bind(this)),this.$el.on("click",p.createNew,this.showCreateInput.bind(this)),this.$el.on("submit",p.createForm,this.onCreateFormSubmit.bind(this)),this.$el.on("click",p.clipboardItem,this.onClipboardClick.bind(this))},n.prototype.onCreateFormSubmit=function(e){e.preventDefault(),this.clearCreateFormError(),this.api.createClipboard({title:this.$createFormInput.val()}).then(this.onCreateClipboardSuccess.bind(this),this.onCreateClipboardFailure.bind(this))},n.prototype.onCreateClipboardSuccess=function(e){var t=this.isBulk()?g.bulkClipboardCreated:g.clipboardCreated;this._$events.trigger(t,e),s(document).trigger(g.clipboardCreated,e),this.close()},n.prototype.onCreateClipboardFailure=function(e){this.setCreateFormError("Name "+e.responseJSON.errors.title[0])},n.prototype.onClipboardClick=function(e){var t=s(e.currentTarget),i=t.data(f.clipboard);if(i){var o=this.isBulk()?g.bulkClipboardSelected:g.clipboardSelected;this._$events.trigger(o,i),this.close()}},n.prototype.onSearchClipboards=function(e){var i=s(e.target),n=i.val().toLowerCase(),r=s(p.clipboardItem);r.hide(),r.detach(),r.sort(function(e,i){return t(n,e,i)}),r.appendTo(this.$clipboardList),r.each(function(e,t){var i=s(t),r=i.find("button"),a=i.data(f.clipboard),l=a.title;l.toLowerCase().indexOf(n)>-1&&(r.html(o(a,n)),i.show())}),this.scrollToTop()},n.prototype.onSearchKeypress=function(e){if(e.which===h.enter){var t=s(p.clipboardItem+":visible"),i=t.first(),o=i.data(f.clipboard);o&&(o.is_default?this.close():this._$events.trigger(g.clipboardSelected,o))}},n.prototype.showCreateInput=function(){this.$createNew.hide(),this.$createForm.show(),this.$createFormInput.val("").focus()},n.prototype.setCreateFormError=function(e){var t=Boolean(e);this.$createFormWrapper.toggleClass("error",t),this.$createFormError.text(e||"").toggleClass("hide",!t)},n.prototype.clearCreateFormError=function(){this.setCreateFormError()},n.prototype.on=function(e,t){this._$events.on(e,t)},n.prototype.updateClipboards=function(e){this.$clipboardList.empty().append(e.map(function(e){return e.checkVisibility=e.checked?"show":"hide",itemTempl=this.itemTemplate(e),s(itemTempl).data(f.clipboard,e)}.bind(this)))},n.prototype.updateSearchInput=function(e){var t=e.length>r;this.$clipboardList.toggleClass("has-search",t),this.$searchInput.toggle(t),this.$searchInput.val("")},n.prototype.updateCreateNew=function(){this.clearCreateFormError(),this.$createNew.show(),this.$createForm.hide()},n.prototype.update=function(e){this.updateClipboards(e),this.updateSearchInput(e),this.updateCreateNew(),this.scrollToTop()},n.prototype.close=function(){d&&s(document).foundation("dropdown","close",this.$el)},n.prototype.scrollToTop=function(){this.$clipboardList.scrollTop(0)},n.prototype.isBulk=function(){return this.$clipboardList.hasClass(c.bulk)},l.exports("clips.ClipboardsDropdown",n)}(window),function(e,t){function i(e){this.api=r,this.config=o.extend(!0,{},h,e),this._$events=o({}),this.$el=o(this.config.el),this.$el.length?(this._init(),this._attachEventListeners()):console.error("Unable to initialize ClipboardsList")}var o=e.$,n=t.utils,r=n.imports("clips.api"),s=!!o.fn.foundation,a={enter:13},l=".clipboardslist",d={clipboardSelected:"clipboard:selected"},c={select:n.i18n("select"),selected:n.i18n("selected")},h={el:null,classes:{clipboardItem:"j-clipboard j-clipboard-item",searchHighlight:"search-highlight"},selectors:{searchInputContainer:".clipboard-search-input-container",searchInput:".clipboard-search-input",clipboardList:".clipboard-list",clipboardItem:".clipboard-list .clipboard-list-item",clipboardItemTitle:".clipboard-item-title"},templates:{listItem:"templates.clipping.clipboards-list-item"},dataAttr:{clipboard:"clipboard-to"},minItemsToShowSearch:4};i.prototype._init=function(){this.classes=this.config.classes,
this.selectors=this.config.selectors,this.dataAttr=this.config.dataAttr,this.templates={listItem:n.imports(this.config.templates.listItem)},this.$clipboardList=this.$el.find(this.selectors.clipboardList),this.$searchInputContainer=this.$el.find(this.selectors.searchInputContainer),this.$searchInput=this.$el.find(this.selectors.searchInput)},i.prototype._attachEventListeners=function(){this.$el.on("input"+l,this.selectors.searchInput,this.onSearchClipboards.bind(this)),this.$el.on("keypress"+l,this.selectors.searchInput,this.onSearchKeypress.bind(this)),this.$el.on("click"+l,this.selectors.clipboardItem,this.onClipboardClick.bind(this))},i.prototype._detachEventListeners=function(){this.$el.off(l)},i.prototype.sortClipboardsByQueryMatch=function(e,t,i){var n=o(t).data(this.dataAttr.clipboard),r=o(i).data(this.dataAttr.clipboard),s=n.title.toLowerCase(),a=r.title.toLowerCase(),l=s.indexOf(e),d=a.indexOf(e);return l!==d?l-d:a>s?-1:s>a?1:0},i.prototype.makeClipboardTitle=function(e,t){return t=t||e.title},i.prototype.makeSearchTitle=function(e,t){var i=e.title,n=i.toLowerCase().indexOf(t),r=i.substring(0,n),s=i.substring(n,n+t.length),a=i.substring(n+t.length),l=o("<span>").addClass(this.classes.searchHighlight).text(s);return this.makeClipboardTitle(e,r+l.get(0).outerHTML+a)},i.prototype.onClipboardClick=function(e){var t=o(e.currentTarget),i=t.data(this.dataAttr.clipboard);i&&!i.checked&&this._$events.trigger(d.clipboardSelected,i)},i.prototype.onSearchClipboards=function(e){var t=o(e.target),i=t.val().toLowerCase(),n=o(this.selectors.clipboardItem);n.hide(),n.detach(),n.sort(function(e,t){return this.sortClipboardsByQueryMatch(i,e,t)}.bind(this)),n.appendTo(this.$clipboardList),n.each(function(e,t){var n=o(t),r=n.find(this.selectors.clipboardItemTitle),s=n.data(this.dataAttr.clipboard),a=s.title;a.toLowerCase().indexOf(i)>-1&&(r.html(this.makeSearchTitle(s,i)),n.show())}.bind(this)),this.scrollToTop()},i.prototype.onSearchKeypress=function(e){if(e.which===a.enter){var t=o(this.selectors.clipboardItem+":visible"),i=t.first(),n=i.data(this.dataAttr.clipboard);n&&(n.is_default?this.close():this._$events.trigger(d.clipboardSelected,n))}},i.prototype.updateClipboards=function(e){this.$clipboardList.empty().append(e.map(function(e){var t=this.templates.listItem(o.extend(!0,{},{i18n:c},e));return o(t).data(this.dataAttr.clipboard,e)}.bind(this)))},i.prototype.updateSearchInput=function(e){var t=e.length>this.config.minItemsToShowSearch;this.$clipboardList.toggleClass("has-search",t),this.$searchInputContainer.toggle(t),this.$searchInput.val("")},i.prototype.update=function(e){this.updateClipboards(e),this.updateSearchInput(e),this.scrollToTop()},i.prototype.close=function(){s&&o(document).foundation("dropdown","close",this.$el)},i.prototype.scrollToTop=function(){this.$clipboardList.scrollTop(0)},i.prototype.on=function(e,t){this._$events.on(e,t)},n.exports("clips.ClipboardsList",i)}(window,window.slideshare_object),function(e){function t(e){this.$el=$(e.el),this.$loader=this.$el.find(".loading"),this.$empty=this.$el.find(".empty"),this.$clipboards=this.$el.find(".clipboards"),this.$clipboardsList=this.$clipboards.find("ul"),this.api=i.imports("clips.api")}var i=e.utils,o={tiny:"tiny",small:"small",medium:"medium",large:"large",xlarge:"xlarge",full:"full"},n={singleColumn:"small-block-grid-1 medium-block-grid-1 large-block-grid-1",multiColumns:"small-block-grid-1 medium-block-grid-2 large-block-grid-3"},r={template:"#top-clipboards-thumbnail-template",lazyImg:".thumbnail .link-bg-img"},s={thumbnail:i.imports("templates.clipping.top-clipboards-thumbnail")};t.prototype.loadClipboards=function(e){this.api.topClipboards(this.slideshowId,this.position).then(function(t){e(t)}.bind(this),function(){console.log("failed to load clipboards",arguments),e([])})},t.prototype.showClipboards=function(e){this.$clipboardsList.empty().append(e.map(s.thumbnail)),this.$clipboards.show(),this.$el.find(r.lazyImg).lazyload({threshold:300,effect:"fadeIn"})},t.prototype.hideClipboards=function(e){this.$clipboards.hide()},t.prototype.showEmptyMessage=function(){this.$empty.show()},t.prototype.hideEmptyMessage=function(){this.$empty.hide()},t.prototype.updateModalSize=function(e){var t=e.length<=2;this.$el.removeClass(o.medium).removeClass(o.xlarge).addClass(t?o.medium:o.xlarge),this.$clipboardsList.removeClass().addClass(t?n.singleColumn:n.multiColumns)},t.prototype.open=function(e,t){this.slideshowId=e,this.position=t,this.showLoader(),this.hideEmptyMessage(),this.hideClipboards(),this.$el.foundation("reveal","open"),this.loadClipboards(function(e){this.hideLoader(),e&&0!==e.length?(this.updateModalSize(e),this.showClipboards(e)):this.showEmptyMessage()}.bind(this))},t.prototype.close=function(){this.$el.foundation("reveal","close")},t.prototype.showLoader=function(){this.$loader.show()},t.prototype.hideLoader=function(){this.$loader.hide()},i.exports("clips.TopClipboardsModal",t)}(window.slideshare_object),function(e){function t(e){this.config=$.extend({},d,e),this.clipboard=this.config.clipboard,this.onClose=this.config.onClose,this.onSave=this.config.onSave,this.status=i.cancelled,this.changedFields=s,this._init()}var i={created:"created",updated:"updated",cancelled:"cancelled",failed:"failed"},o={clipboardEdited:"clipboard:edited",clipboardCreated:"clipboard:created",beforeModalOpen:"open.fndtn.reveal",afterModalOpen:"opened.fndtn.reveal",afterModalClose:"closed.fndtn.reveal"},n={cancel:".j-cancel-button",submit:".j-submit-button",form:"form",firstClipMessage:".first-clip-message",modalTitle:".modal-title","private":".j-privacy-input",privacyDescription:"#privacy-switch-description",title:".j-title-input",titleError:".j-title-error",titleWrapper:".j-title-wrapper",description:".j-description-input",descriptionError:".j-description-error",descriptionWrapper:".j-description-wrapper",i18n:".j-i18n-edit-clipboard-modal"},r={firstClipModal:"first-clip-modal",hide:"hide"},s={title:!1,description:!1},a="edit",l="create",d={onClose:$.noop,clipboard:{}};t.prototype._init=function(){var e;if(this.$el=$(this.config.el),!this.$el.length)throw new Error("Error initializing EditModal");this.$form=this.$el.find(n.form),this.$firstClipMessage=this.$el.find(n.firstClipMessage),this.$modalTitle=this.$el.find(n.modalTitle),this.$private=this.$form.find(n["private"]),this.$privacyDescription=this.$form.find(n.privacyDescription),this.$title=this.$form.find(n.title),this.$description=this.$form.find(n.description),this.i18n=JSON.parse($(n.i18n).val()),e=this.$el.find(this.config.focus),this.$focusEl=e.length?e:this.$title,this._attachEventListeners()},t.prototype._attachEventListeners=function(){this.config.type.toLowerCase()===a?this.$el.on("click",n.submit,this._editClipboard.bind(this)):this.$el.on("click",n.submit,this._createClipboard.bind(this)),this.$el.on("click",n.cancel,this.close.bind(this)),this.$el.on("keyup",n.title,this._clearTitleErrors.bind(this)),this.$el.on("keyup",n.description,this._clearDescriptionErrors.bind(this)),this.$el.on("change",n["private"],this._setPrivacyDescription.bind(this)),this.$el.on(o.beforeModalOpen,this._onOpen.bind(this)),this.$el.on(o.afterModalOpen,this._onOpened.bind(this)),this.$el.on(o.afterModalClose,this._onClosed.bind(this))},t.prototype._detachEventListeners=function(){this.$el.off()},t.prototype.reset=function(){this.$form[0].reset(),this._resetChangedFields(),this.$el.removeClass(r.firstClipModal),this.$firstClipMessage.addClass(r.hide)},t.prototype._setModalTitle=function(){var e=this.config.type===l?this.i18n.formTitleCreate:this.i18n.formTitleEdit;this.$modalTitle.text(e)},t.prototype._setFormContent=function(){this.clipboard&&this.config.type.toLowerCase()===a&&(this.$title.val(this.clipboard.title),this.$description.val(this.clipboard.description),this.$private.attr("checked",!!this.clipboard["private"]))},t.prototype._setPrivacyDescription=function(){var e=this.$private.is(":checked")?this.i18n.privacyEnabled:this.i18n.privacyDisabled;this.$privacyDescription.text(e)},t.prototype._setFirstClipMessage=function(){this.config.showFirstClipMessage&&(this.$el.addClass(r.firstClipModal),this.$firstClipMessage.removeClass(r.hide))},t.prototype._showErrors=function(e){var t=(e.responseJSON||{}).errors||{};t.title&&this._setTitleErrors(t.title[0]),t.description&&this._setDescriptionErrors(t.description[0])},t.prototype._setTitleErrors=function(e){var t=this.$el.find(n.titleError),i=this.$el.find(n.titleWrapper);this._setErrors(t,i,e)},t.prototype._setDescriptionErrors=function(e){var t=this.$el.find(n.descriptionError),i=this.$el.find(n.descriptionWrapper);this._setErrors(t,i,e)},t.prototype._setErrors=function(e,t,i){var o=Boolean(i);e.text(i||""),e.toggleClass("hide",!o),t.toggleClass("error",o)},t.prototype._clearTitleErrors=function(){this._setTitleErrors()},t.prototype._clearDescriptionErrors=function(){this._setDescriptionErrors()},t.prototype._onOpen=function(){this._setFirstClipMessage(),this._setModalTitle(),this._setFormContent(),this._setPrivacyDescription()},t.prototype._onOpened=function(){this.$focusEl.focus()},t.prototype._onClosed=function(){this._detachEventListeners(),this.reset(),this.onClose(this.status,this.response)},t.prototype._onClipboadChange=function(){(this.changedFields.title||this.changedFields.description)&&e.sharePrompt.show()},t.prototype._editClipboard=function(t){t.preventDefault(),this._determineChangedFields(),e.api.editClipboard(this.clipboard.id,{title:this.$title.val(),description:this.$description.val(),"private":this.$private.is(":checked")}).then(function(e){$(document).trigger(o.clipboardEdited,{newClipboard:e.clipboard,oldClipboard:this.clipboard}),this.status=i.updated,this.response=e,this.close(),this._onClipboadChange()}.bind(this),function(e){this._showErrors(e),this.status=i.failed}.bind(this))},t.prototype._determineChangedFields=function(){var e=(this.clipboard,this.$title.val()),t=this.$description.val(),i=this.$private.is(":checked");$.extend(this.changedFields,{title:e!==this.clipboard.title,description:t!==this.clipboard.description,privacy:i!==this.clipboard["private"]})},t.prototype._resetChangedFields=function(){this.changedFields=s},t.prototype._createClipboard=function(t){t.preventDefault(),e.api.createClipboard({title:this.$title.val(),description:this.$description.val(),"private":this.$private.is(":checked")}).then(function(e){$(document).trigger(o.clipboardCreated,e),this.status=i.created,this.response=e,this.close()}.bind(this),function(e){this._showErrors(e),this.status=i.failed}.bind(this))},t.prototype.open=function(){this.status=i.cancelled,this.response=null,this.$el.foundation("reveal","open")},t.prototype.close=function(){this.$el.foundation("reveal","close")},e.EditModal=t}(window.slideshare_object.Clipboards),function(e){function t(t){this.api=o,this.config=$.extend(!0,{},u,t),this.$el=$(this.config.el),this.$el.length?(this.clipboards=this.config.clipboards||[],this.clips=e.slideshow.clips||{},this.defaultClipboard=this.config.defaultClipboard||{},this.currentClip=null,this.templates={clipboardListItem:i.imports(c.clipboardListItem),clipboardListItemDefault:i.imports(c.clipboardListItemDefault)},this.clipboardsList=new n({el:this.config.el}),this.config.actionType=this.config.actionType.toLowerCase(),this._init()):console.error("Unable to initialize SelectClipboardModal")}var i=e.utils,o=i.imports("clips.api"),n=i.imports("clips.ClipboardsList"),r=".selectclipboard",s="copy",a="move",l={body:"body",loader:".loading",modalTitle:".modal-title",modalContent:".modal-content",allClipboardsHeader:".all-clipboards-header",defaultClipboardTitle:".default-clipboard-title",defaultClipboardPanel:".default-clipboard-panel",defaultClipboardList:".existing-clipboard-list",clipboardListContainer:".clipboard-list-container",createNewClipboard:".clipboard-create-new"},d={clipCopied:"clip:copied",clipMoved:"clip:moved",clipboardSelected:"clipboard:selected",click:"click"+r,beforeModalOpen:"open.fndtn.reveal"+r,afterModalOpen:"opened.fndtn.reveal"+r,afterModalClose:"closed.fndtn.reveal"+r},c={clipboardListItem:"templates.clipping.clipboards-list-item",clipboardListItemDefault:"templates.clipping.clipboards-list-item-default"},h={defaultClipboard:"slideshare.clips.defaultClipboard."+e.user.id},p={select:i.i18n("select"),selected:i.i18n("selected"),select_new_clipboard:i.i18n("clipping.select_clipboard_modal.select_new_clipboard"),select_another_clipboard:i.i18n("clipping.select_clipboard_modal.select_another_clipboard")},u={el:null,clipboards:[],defaultClipboard:null,actionType:s};t.prototype._init=function(){this.$loader=this.$el.find(l.loader),this.$modalTitle=this.$el.find(l.modalTitle),this.$modalContent=this.$el.find(l.modalContent),this.$defaultClipboardPanel=this.$el.find(l.defaultClipboardPanel),this._attachEventListeners()},t.prototype._attachEventListeners=function(){this.clipboardsList.on(d.clipboardSelected,this._onClipboardSelected.bind(this)),this.$el.on(d.click,l.createNewClipboard,this._onCreateNewClipboardClick.bind(this)),this.$el.on(d.beforeModalOpen,this._onBeforeModalOpen.bind(this)),this.$el.on(d.afterModalClose,this._onAfterModalClose.bind(this))},t.prototype._detachEventListeners=function(){$(document).off(r),this.$el.off(r)},t.prototype._onClipboardSelected=function(e,t){this.config.actionType===s&&this.addClipToClipboard(this.currentClip,t).then(function(e){e.clip.alreadyInClipboard||(this.setUserDefaultClipboard(t.id),$(document).trigger(d.clipCopied,e)),this.close()}.bind(this)).fail(function(e,t,i){e&&console.error("Error while clipping. "+e.statusText)}),this.config.actionType==a&&this.moveClip(this.defaultClipboard,t).then(function(e){$(document).trigger(d.clipMoved,e),this.close()}.bind(this)).fail(function(e,t,i){e&&console.error("Error while moving clip. "+e.statusText)})},t.prototype._onCreateNewClipboardClick=function(){var t=new e.Clipboards.EditModal({el:"#clipboard-create-modal",type:"create",onClose:function(e,t){"created"===e&&t&&t.clipboard?this.clipboardsList._$events.trigger(d.clipboardSelected,t.clipboard):(this._attachEventListeners(),this.clipboardsList._attachEventListeners(),this.open({clip:this.currentClip}))}.bind(this)});t.open()},t.prototype._onBeforeModalOpen=function(){var e=this.config.actionType===s,t=e?p.select_another_clipboard:p.select_new_clipboard;this.$modalContent.hide(),this.$loader.show(),t&&this.updateModalTitle(t),e&&($(l.defaultClipboardTitle).text(this.defaultClipboard.title),this.$defaultClipboardPanel.show()),$(l.body).css("overflow-y","hidden")},t.prototype._onAfterModalClose=function(){this.reset()},t.prototype.updateModalTitle=function(e){this.$modalTitle.text(e)},t.prototype.showDefaultClipboardUI=function(){this.templates.clipboardListItemDefault&&this.config.actionType===a&&$(l.defaultClipboardList).empty().append($(this.templates.clipboardListItemDefault($.extend(!0,{},{i18n:p},this.defaultClipboard))))},t.prototype.loadClipboards=function(e){this.api.clipboards().then(function(t){e(t)}.bind(this),function(){console.log("Failed to load clipboards",arguments),e()})},t.prototype._processClipboards=function(e){var t=this.currentClip,i=t&&t.clipboards||[];return $.map(e,function(e){return e.id===this.defaultClipboard.id&&this.config.actionType==a?void(this.defaultClipboard=e):(e.checked=!1,$.inArray(e.id,i)>-1&&(e.checked=!0),e)}.bind(this))},t.prototype._sortedClipboardsBySelected=function(e,t){return e.checked===t.checked?0:e.checked?-1:1},t.prototype.open=function(e){var t;this.currentClip=this.clips[e.clip&&e.clip.position],this.$el.foundation("reveal","open"),this.loadClipboards(function(e){e&&(processedClipboards=this._processClipboards(e),t=processedClipboards.sort(function(e,t){return this._sortedClipboardsBySelected(e,t)}.bind(this)),this.showDefaultClipboardUI(),this.clipboardsList.update(processedClipboards),this.$loader.hide(),this.$modalContent.show())}.bind(this))},t.prototype.close=function(){this.$el.foundation("reveal","close")},t.prototype.reset=function(){this._detachEventListeners(),this.clipboardsList._detachEventListeners(),$(l.defaultClipboardList).empty(),this.$defaultClipboardPanel.hide(),$(l.clipboardListContainer).scrollTo(0),$(l.body).css("overflow-y","auto")},t.prototype.addClipToClipboard=function(e,t){function i(e){var i=this.currentClip;return i?(i.clipboards=i.clipboards||[],-1===i.clipboards.indexOf(t.id)&&i.clipboards.push(t.id)):e.clip.clipboards=[t.id],e}return this.api.addClipToClipboard(t.id,e).then(function(e){return i.call(this,e),{clip:e.clip,clipboard:t}}.bind(this),function(e,t,i){console.error("Error adding to clipboard. "+e.statusText)})},t.prototype.removeClipFromClipboard=function(e,t){function i(){var e,t=this.currentClip;t&&(t.clipboards=t.clipboards||[],e=t.clipboards.indexOf(o),e>-1&&t.clipboards.splice(e,1))}var o=t.id;return this.api.deleteClipFromClipboard(o,e.id).then(function(e){return i.call(this),e}.bind(this),function(e,t,i){console.error("Error removing clip from clipboard. "+e.statusText)}.bind(this))},t.prototype.moveClip=function(e,t){var i=this.currentClip;return this.addClipToClipboard(i,t).then(function(){return this.removeClipFromClipboard(i,e)}.bind(this)).then(function(){return this.setUserDefaultClipboard(t.id),{clip:i,fromClipboard:e,toClipboard:t}}.bind(this))},t.prototype.setUserDefaultClipboard=function(e){window.localStorage&&window.localStorage.setItem(h.defaultClipboard,e)},i.exports("SelectClipboardModal",t)}(window.slideshare_object),function(e){function t(){this._init()}var i=e.utils,o=e.is_mobile,n=i.i18n(),r=i.imports("SelectClipboardModal"),s=i.imports("ClipboardModalShare"),a=i.imports("NoticePrompt"),l=".successtoast",d={noticePrompt:i.imports("templates.clipping.notice-prompt"),successToast:i.imports("templates.clipping.success-toast")},c={slideContainer:".slide_container",slide:".slide",successToastWrapper:".success-toast-wrapper",content:".content",changeClipboard:".j-change-clipboard",shareClip:".j-share-clip",selectClipboardModal:"#select-clipboard-modal",clipShareModal:"#clipboard-share-modal"},h={clipCreated:"clip:created",clipCopied:"clip:copied",clipShared:"clip:shared",clipMoved:"clip:moved",successToastHide:"successtoast:hide"},p="clipshare",u=5e3;t.prototype={constructor:t,_init:function(){this.$el=$(c.successToastWrapper),this.$noticePrompt=$(d.noticePrompt({svg_icon_type:"success-pebble-icon"})),this.$el.append(this.$noticePrompt),this.$toastContainer=this.$noticePrompt.find(c.content),this.$slides=$(c.slideContainer),this.noticePrompt=new a({selector:c.successToastWrapper,onHide:this._onHide.bind(this)}),this.clip=null,this.clipboard=null,this.hideToastTimer=null,this._attachEventHandlers()},_attachEventHandlers:function(){$(document).on(h.clipCreated,this.show.bind(this)),$(document).on(h.clipCopied,this.show.bind(this)),$(document).on(h.clipMoved,this.show.bind(this)),this.$toastContainer.on("click",c.changeClipboard,this._onChangeClipboard.bind(this)),this.$toastContainer.on("click",c.shareClip,this._onShareClip.bind(this))},_attachHideToastEvents:function(){$(document).on("click"+l,this.hide.bind(this)),this.$el.on("click"+l,function(e){e.stopPropagation()}),this.hideToastTimer=setTimeout(this.hide.bind(this),u),this.$el.on("mouseenter"+l,function(){clearTimeout(this.hideToastTimer)}.bind(this)),this.$el.on("mouseleave"+l,function(){this.hideToastTimer=setTimeout(this.hide.bind(this),u)}.bind(this))},_onChangeClipboard:function(){this.selectModal=new r({el:c.selectClipboardModal,defaultClipboard:this.clipboard,actionType:"move"}),this.selectModal.open({clip:this.clip})},_onShareClip:function(){var e=this.clip,t=e.position,i=this._getClipUrl(e,{src:p}),o="Slide "+t+" from "+slideshare_object.slideshow.title;this.shareModal=new s({el:c.clipShareModal,modalTitle:n.share+" "+o,shareEntityType:"clip",shareEntity:{id:e.id,url:i,description:o}}),this.shareModal.open()},_getClipUrl:function(t,i){var o=e.slideshow.ss_url;return i=i||{},t&&(o+="/"+t.position),o+"?"+$.param(i)},_getClipboardUrl:function(t){var i=e.user.clipboards_url;return i+"/"+t.slug+"?rftp=success_toast"},_getSlideThumb:function(e){var t=this.$slides.find(c.slide+'[slidenumber="'+e+'"]'),i=t.find("img");return i.length?i.attr("data-small"):void 0},_onHide:function(){clearTimeout(this.hideToastTimer),$(document).off("click"+l),this.$el.off("click"+l),this.$el.off("mouseenter"+l),this.$el.off("mouseleave"+l),$(document).trigger(h.successToastHide)},show:function(e,t){if(!o){var i,r=$.extend({},t.clip,{thumbnail:this._getSlideThumb(t.clip.position)});i=e.type===h.clipMoved?t.toClipboard:t.clipboard,i=$.extend({},i,{url:this._getClipboardUrl(i)}),this.clip=r,this.clipboard=i,this.$toastContainer.empty().append(d.successToast($.extend({clipboard:i,clip:r},{i18n:n}))),this.noticePrompt.show(),this._attachHideToastEvents()}},hide:function(){this.noticePrompt.hide()}},e.utils.exports("clips.SuccessToast",t)}(window.slideshare_object),function(e){function t(){this.$document=$(document),this.attachEventListeners()}var i=e.slideshare_object,o=i.utils,n={clipCreated:"clip:created",clipDeleted:"clip:deleted",clipShared:"clip:shared",clipMoved:"clip:moved",clipboardCreated:"clipboard:created"},r={clipTopButton:".clip-button-top",clipsToolbarActive:".j-clips-toolbar:not(.inactive)",topClipboardOwner:".top-clipboards-modal .author",topClipboardThumb:".top-clipboards-modal .link-bg-img",topClipboardTitle:".top-clipboards-modal .clipboard-url"};t.prototype.attachEventListeners=function(){this.$document.on(n.clipCreated,function(e,t){i.clippingTracker.createClip(t.clip,t.clipboard.id)}).on(n.clipDeleted,function(e,t){i.clippingTracker.deleteClip(t.clip)}).on(n.clipMoved,function(e,t){var o=t.clip.id,n=t.fromClipboard.id,r=t.toClipboard.id;i.clippingTracker.moveSingleClip(o,n,r)}).on(n.clipShared,function(e,t){i.clippingTracker.shareClip(t.clip.id,t.shareType)}).on(n.clipboardCreated,function(e,t){i.clippingTracker.createClipboard(t.clipboard)}),o.isUserAuthenticated()||this.attachClickTracker("clipTopButton","clickClipButton"),this.attachClickTracker("clipsToolbarActive","clickSlideviewTopClipboardsOpen"),this.attachClickTracker("topClipboardOwner","clickTopClipboardsClipboardOwner"),this.attachClickTracker("topClipboardThumb","clickTopClipboardsClipboardThumb"),this.attachClickTracker("topClipboardTitle","clickTopClipboardsClipboardTitle")},t.prototype.attachClickTracker=function(e,t){this.$document.on("click",r[e],function(){i.clippingTracker[t]()})},t.prototype.trackAfterLogin=function(){var e=null,t=i.after_login_clip_data,n=o.isUserAuthenticated();n&&t&&!t.trackingComplete&&(e=new i.ClippingTracker({userIsOwner:!0,trackingId:t.tracking_id}),e.createClip(t.clip,t.clipboard.id),t.is_first_clip&&e.createClipboard(t.clipboard),t.trackingComplete=!0)},t.prototype.trackingId=function(){return i.clippingTracker.trackingId},o.exports("clips.Tracker",t)}(window),function(e){function t(){o.slideshareEventManager&&(this.api=r.imports("clips.api"),n.Clipboards.api=this.api,this.tracker=new l,this.topClipboardsModal=new s({el:"#top-clipboards-modal"}),this.successToast=new d,this.ariaLabel="aria-label",this.$clipsToolbar=o(g.clipsToolbar),this.$clipsInfo=o(".j-clips-info"),this.$clipsCount=o(".j-clips-count"),this.$clipsCountText=o(".j-clips-count-text"),this.$slidePosition=o(".j-slide-position"),this.$progressMeter=o(".j-clips-meter"),this.$clipButtonTop=o(".clip-button-top"),this.$clipButton=this.$clipButtonTop.find(g.clipButton),this.$clipButton.show(),this.afterLoginRedirectLink=this.$clipButton.attr("href"),this.clips=n.slideshow.clips||{},this.clipCounts=n.slideshow.clip_counts||{},this.userClipsNumber=n.user.clips_number||0,this.clipboards=n.user.clipboards||[],this.toggleClipButton(!1),this.bindEvents(),this.updateSlideState(),n.after_login_clip_data&&(this.tracker.trackAfterLogin(),this._forceToastAfterLogin()))}var i,o=e.$,n=e.slideshare_object,r=n.utils,s=(r.imports("ClipboardModalShare"),r.imports("clips.TopClipboardsModal")),a=r.imports("SelectClipboardModal"),l=r.imports("clips.Tracker"),d=r.imports("clips.SuccessToast"),c=o.slideshareEventManager,h=(!!o.fn.foundation,e.localStorage),p=slideshare_object.utils.i18n,u={clippedOnce:"slideshare.clips.clippedOnce."+n.user.id,defaultClipboard:"slideshare.clips.defaultClipboard."+n.user.id},f={clipCreated:"clip:created",clipDeleted:"clip:deleted",clipMoved:"clip:moved",clipboardCreated:"clipboard:created"},g={clipButton:".j-clips-button",clipsToolbar:".j-clips-toolbar",clipsToolbarActive:".j-clips-toolbar:not(.inactive,.unavailable)",clipboardCreateModal:"#clipboard-create-modal",selectClipboardModal:"#select-clipboard-modal"},m="My Clips";i=t.prototype,i.activate=function(){},i.handleClipActionLoggedout=function(){var e=location.protocol+"//"+location.host+"/"+slideshare_object.slideshow.user_login+"/"+slideshare_object.stripped_title+"/"+o.slideshareEventManager.getCurrentPosition(),t=this.afterLoginRedirectLink+encodeURIComponent(e);this.$clipButton.attr("href",t),this.$clipButton.attr("data-tracking-id",this.tracker.trackingId()),n.addAfterLoginEvent({event:"clip",data:{slideshow_id:n.slideshow.id,position:o.slideshareEventManager.getCurrentPosition(),tracking_id:this.tracker.trackingId()}});var i="create_loggedout";n.ga("clips","click",i)},i.bindEvents=function(){if(r.isUserAuthenticated()||(this.$clipButtonTop.on("click",this.handleClipActionLoggedout.bind(this)),n.bindToModalLogin(".clip-button-top")),this.$clipButton.off("click").on("click",function(){r.isUserAuthenticated()&&n.slideshow.allow_clips&&this.clipSlide(c.getCurrentPosition())}.bind(this)),c.player){c.player.on("slidechanged.toolbarClips",function(){this.updateSlideState()}.bind(this));var e="next.clipcta previous.clipcta gotoslide.clipcta";c.player.on(e,function(t){c.player.off(e),t.ssData&&"band"===t.ssData.source||this.$clipButton.removeClass("visible")}.bind(this))}o(document).on("click",g.clipsToolbarActive,this._onClipsToolbarClick.bind(this))},i._onClipsToolbarClick=function(e){this.topClipboardsModal.open(n.slideshow.id,c.getCurrentPosition())},i.updateSlideState=function(){var e,t=o.slideshareEventManager.getCurrentPosition();n.slideshow.allow_clips||this.$clipButtonTop.toggleClass("clipped",!1),this.$clipsInfo.toggleClass("j-clips-info-none",!this.clipCounts[t]),this.$clipsToolbar.toggleClass("inactive",!this.clipCounts[t]),this.$clipsCount.attr(this.ariaLabel,this.clipCounts[t]||""),e=p("jsplayer_toolbar_clips.clip_count_info",{count:this.clipCounts[t]}),this.$clipsCountText.attr(this.ariaLabel,e),this.$slidePosition.attr(this.ariaLabel,t),this.updateProgress(this.clips[t]?100:0,!1)},i.updateProgress=function(e,t){this.$progressMeter.toggleClass("j-animate",t).css("width",e+"%")},i.toggleClipButton=function(e){this.$clipButton.toggleClass("pending",e).prop("disabled",e)},i.setClipData=function(e){this.clips[e.position]=e,this.clipCounts[e.position]=(this.clipCounts[e.position]||0)+1,this.userClipsNumber++},i.hasUserClippedOnce=function(){return this.userClipsNumber||!h||h.getItem(u.clippedOnce)},i.setUserClippedOnce=function(){h&&h.setItem(u.clippedOnce,!0)},i._currentClip=function(){return this.clips[c.getCurrentPosition()]},i._getClipboard=function(e){var t=this.clipboards.filter(function(t){return t.id==e});return t.length?t[0]:void 0},i.clipSlide=function(e){function t(e){this.createClip(e).always(function(){this.updateSlideState(),this.toggleClipButton(!1)}.bind(this)),this.toggleClipButton(!0)}var i=this.clips[e];if(i||this.hasUserClippedOnce())t.call(this,e);else{this.setUserClippedOnce();var o=new n.Clipboards.EditModal({el:g.clipboardCreateModal,type:"create",showFirstClipMessage:!0,onClose:function(i,o){t.call(this,e)}.bind(this)});o.open()}n.ga("clips","click","create")},i.onError=function(e){var t=window.console&&(console.error||console.log).bind(console)||function(){};t(e)},i.createClip=function(e){var t=[],i={slideshow_id:n.slideshow.id,user_id:n.user.id,position:e};return this.updateProgress(90,!0),this.getClipboards().then(function(e){var i=this.getDefaultClipboard(e);return t=e,i&&i.id?i:this.createClipboard(i)}.bind(this)).then(function(e){return this.addClipToClipboard(i,e)}.bind(this)).then(function(e){if(e.clip.alreadyInClipboard){var t=(this.clips[c.getCurrentPosition()],new a({el:g.selectClipboardModal,defaultClipboard:e.clipboard,actionType:"copy"}));t.open({clip:e.clip})}else this.clips[e.clip.position]||this.setClipData(e.clip),this.updateSlideState(),o(document).trigger(f.clipCreated,e)}.bind(this)).fail(function(e,t,i){e&&this.onError("Error while clipping. "+e.statusText)}.bind(this))},i.createFakeSystemClipboard=function(){return{title:m,"private":!1,system_created:!0,is_default:!0}},i.getClipboards=function(){return this.api.clipboards().fail(function(e,t,i){this.onError("Error fetching clipboards. "+e.statusText)}.bind(this)).done(function(e){var t=e||[];if(0===t.length)t.push(this.createFakeSystemClipboard());else{var i=null,o=this.getUserDefaultClipboardId();t.some(function(e){return o&&o===e.id||!i||!i.system_created&&e.system_created?(i=e,o&&e.id===o):void 0}),i.is_default=!0,this.setUserDefaultClipboard(i.id)}return t}.bind(this))},i.getUserDefaultClipboardId=function(){return Number(h&&h.getItem(u.defaultClipboard))||!1},i.setUserDefaultClipboard=function(e){h&&h.setItem(u.defaultClipboard,e)},i.createClipboard=function(e){return this.api.createClipboard(e).then(function(e){return this.clipboards.push(e.clipboard),o(document).trigger(f.clipboardCreated,e),e.clipboard}.bind(this),function(e){this.onError("Error creating a clipboard. "+e.statusText)}.bind(this))},i.addClipToClipboard=function(e,t){function i(e){var i=this.clips[c.getCurrentPosition()];i?(i.clipboards=i.clipboards||[],-1===i.clipboards.indexOf(t.id)&&i.clipboards.push(t.id)):e.clip.clipboards=[t.id]}return this.api.addClipToClipboard(t.id,e).then(function(e){return i.call(this,e),{clip:e.clip,clipboard:t}}.bind(this),function(e,t,i){this.onError("Error adding to clipboard. "+e.statusText)}.bind(this))},i.getDefaultClipboard=function(e){var t;for(t=0;t<e.length;t++)if(e[t].is_default)return e[t];return null},i._forceToastAfterLogin=function(){var e=n.after_login_clip_data;this.successToast.show({},{clip:e.clip,clipboard:e.clipboard})},r.exports("clips.Toolbar",t)}(window),function(e,t){function i(){0!==$("#svPlayerId").length&&($.slideshareEventManager&&$.slideshareEventManager.controller?n=new o:$(document).on("slideshare-player-controller:init-done",function(){n=new o}))}var o=t.utils.imports("clips.Toolbar"),n=null;i()}(window,window.slideshare_object);